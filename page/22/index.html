<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
  <meta name="theme-color" content="#222">
  <meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#222">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>
  <script id="hexo-configurations">
    var NexT = window.NexT ||
    {};
    var CONFIG = {
      "hostname": "cuiqingcai.com",
      "root": "/",
      "scheme": "Pisces",
      "version": "7.8.0",
      "exturl": false,
      "sidebar":
      {
        "position": "right",
        "width": 360,
        "display": "post",
        "padding": 18,
        "offset": 12,
        "onmobile": false,
        "widgets": [
          {
            "type": "image",
            "name": "阿布云",
            "enable": true,
            "url": "https://www.abuyun.com/http-proxy/introduce.html",
            "src": "https://qiniu.cuiqingcai.com/88au8.jpg",
            "width": "100%"
      },
          {
            "type": "image",
            "name": "天验",
            "enable": true,
            "url": "https://tutorial.lengyue.video/?coupon=12ef4b1a-a3db-11ea-bb37-0242ac130002_cqx_850",
            "src": "https://qiniu.cuiqingcai.com/bco2a.png",
            "width": "100%"
      },
          {
            "type": "image",
            "name": "华为云",
            "enable": false,
            "url": "https://activity.huaweicloud.com/2020_618_promotion/index.html?bpName=5f9f98a29e2c40b780c1793086f29fe2&bindType=1&salesID=wangyubei",
            "src": "https://qiniu.cuiqingcai.com/y42ik.jpg",
            "width": "100%"
      },
          {
            "type": "image",
            "name": "张小鸡",
            "enable": false,
            "url": "http://www.zxiaoji.com/",
            "src": "https://qiniu.cuiqingcai.com/fm72f.png",
            "width": "100%"
      },
          {
            "type": "image",
            "name": "Luminati",
            "src": "https://qiniu.cuiqingcai.com/ikkq9.jpg",
            "url": "https://luminati-china.io/?affiliate=ref_5fbbaaa9647883f5c6f77095",
            "width": "100%",
            "enable": true
      },
          {
            "type": "tags",
            "name": "标签云",
            "enable": true
      },
          {
            "type": "categories",
            "name": "分类",
            "enable": true
      },
          {
            "type": "friends",
            "name": "友情链接",
            "enable": true
      },
          {
            "type": "hot",
            "name": "猜你喜欢",
            "enable": true
      }]
      },
      "copycode":
      {
        "enable": true,
        "show_result": true,
        "style": "mac"
      },
      "back2top":
      {
        "enable": true,
        "sidebar": false,
        "scrollpercent": true
      },
      "bookmark":
      {
        "enable": false,
        "color": "#222",
        "save": "auto"
      },
      "fancybox": false,
      "mediumzoom": false,
      "lazyload": false,
      "pangu": true,
      "comments":
      {
        "style": "tabs",
        "active": "gitalk",
        "storage": true,
        "lazyload": false,
        "nav": null,
        "activeClass": "gitalk"
      },
      "algolia":
      {
        "hits":
        {
          "per_page": 10
        },
        "labels":
        {
          "input_placeholder": "Search for Posts",
          "hits_empty": "We didn't find any results for the search: ${query}",
          "hits_stats": "${hits} results found in ${time} ms"
        }
      },
      "localsearch":
      {
        "enable": true,
        "trigger": "auto",
        "top_n_per_article": 10,
        "unescape": false,
        "preload": false
      },
      "motion":
      {
        "enable": false,
        "async": false,
        "transition":
        {
          "post_block": "bounceDownIn",
          "post_header": "slideDownIn",
          "post_body": "slideDownIn",
          "coll_header": "slideLeftIn",
          "sidebar": "slideUpIn"
        }
      },
      "path": "search.xml"
    };

  </script>
  <meta name="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
  <meta property="og:type" content="website">
  <meta property="og:title" content="静觅">
  <meta property="og:url" content="https://cuiqingcai.com/page/22/index.html">
  <meta property="og:site_name" content="静觅">
  <meta property="og:description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
  <meta property="og:locale" content="zh_CN">
  <meta property="article:author" content="崔庆才">
  <meta property="article:tag" content="崔庆才">
  <meta property="article:tag" content="静觅">
  <meta property="article:tag" content="PHP">
  <meta property="article:tag" content="Java">
  <meta property="article:tag" content="Python">
  <meta property="article:tag" content="Spider">
  <meta property="article:tag" content="爬虫">
  <meta property="article:tag" content="Web">
  <meta property="article:tag" content="Kubernetes">
  <meta property="article:tag" content="深度学习">
  <meta property="article:tag" content="机器学习">
  <meta property="article:tag" content="数据分析">
  <meta property="article:tag" content="网络">
  <meta property="article:tag" content="IT">
  <meta property="article:tag" content="技术">
  <meta property="article:tag" content="博客">
  <meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://cuiqingcai.com/page/22/">
  <script id="page-configurations">
    // https://hexo.io/docs/variables.html
    CONFIG.page = {
      sidebar: "",
      isHome: true,
      isPost: false,
      lang: 'zh-CN'
    };

  </script>
  <title>静觅丨崔庆才的个人站点</title>
  <meta name="google-site-verification" content="p_bIcnvirkFzG2dYKuNDivKD8-STet5W7D-01woA2fc" />
  <noscript>
    <style>
      .use-motion .brand,
      .use-motion .menu-item,
      .sidebar-inner,
      .use-motion .post-block,
      .use-motion .pagination,
      .use-motion .comments,
      .use-motion .post-header,
      .use-motion .post-body,
      .use-motion .collection-header
      {
        opacity: initial;
      }

      .use-motion .site-title,
      .use-motion .site-subtitle
      {
        opacity: initial;
        top: initial;
      }

      .use-motion .logo-line-before i
      {
        left: initial;
      }

      .use-motion .logo-line-after i
      {
        right: initial;
      }

    </style>
  </noscript>
  <link rel="alternate" href="/atom.xml" title="静觅" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
        <div class="site-brand-container">
          <div class="site-nav-toggle">
            <div class="toggle" aria-label="切换导航栏">
              <span class="toggle-line toggle-line-first"></span>
              <span class="toggle-line toggle-line-middle"></span>
              <span class="toggle-line toggle-line-last"></span>
            </div>
          </div>
          <div class="site-meta">
            <a href="/" class="brand" rel="start">
              <span class="logo-line-before"><i></i></span>
              <h1 class="site-title">静觅 <span class="site-subtitle"> 崔庆才的个人站点 </span>
              </h1>
              <span class="logo-line-after"><i></i></span>
            </a>
          </div>
          <div class="site-nav-right">
            <div class="toggle popup-trigger">
              <i class="fa fa-search fa-fw fa-lg"></i>
            </div>
          </div>
        </div>
        <nav class="site-nav">
          <ul id="menu" class="main-menu menu">
            <li class="menu-item menu-item-home">
              <a href="/" rel="section">首页</a>
            </li>
            <li class="menu-item menu-item-archives">
              <a href="/archives/" rel="section">文章列表</a>
            </li>
            <li class="menu-item menu-item-tags">
              <a href="/tags/" rel="section">文章标签</a>
            </li>
            <li class="menu-item menu-item-categories">
              <a href="/categories/" rel="section">文章分类</a>
            </li>
            <li class="menu-item menu-item-about">
              <a href="/about/" rel="section">关于博主</a>
            </li>
            <li class="menu-item menu-item-message">
              <a href="/message/" rel="section">给我留言</a>
            </li>
            <li class="menu-item menu-item-search">
              <a role="button" class="popup-trigger">搜索 </a>
            </li>
          </ul>
        </nav>
        <div class="search-pop-overlay">
          <div class="popup search-popup">
            <div class="search-header">
              <span class="search-icon">
                <i class="fa fa-search"></i>
              </span>
              <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
              </div>
              <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
              </span>
            </div>
            <div id="search-result">
              <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span>0%</span>
    </div>
    <div class="reading-progress-bar"></div>
    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="content index posts-expand">
            <div class="carousel">
              <div id="wowslider-container">
                <div class="ws_images">
                  <ul>
                    <li><a target="_blank" href="https://cuiqingcai.com/5052.html"><img title="Python3网络爬虫开发实战教程" src="https://qiniu.cuiqingcai.com/ipy96.jpg" /></a></li>
                    <li><a target="_blank" href="https://t.lagou.com/fRCBRsRCSN6FA"><img title="52讲轻松搞定网络爬虫" src="https://qiniu.cuiqingcai.com/fqq5e.png" /></a></li>
                    <li><a target="_blank" href="https://cuiqingcai.com/4320.html"><img title="Python3网络爬虫开发视频教程" src="https://qiniu.cuiqingcai.com/bjrny.jpg" /></a></li>
                    <li><a target="_blank" href="https://cuiqingcai.com/1052.html"><img title="Python2爬虫学习系列教程" src="https://qiniu.cuiqingcai.com/uyl5v.jpg" /></a></li>
                    <li><a target="_blank" href="https://cuiqingcai.com/5094.html"><img title="爬虫代理哪家强？十大付费代理详细对比评测出炉！" src="https://qiniu.cuiqingcai.com/nifs6.jpg" /></a></li>
                  </ul>
                </div>
                <div class="ws_thumbs">
                  <div>
                    <a target="_blank" href="#"><img src="https://qiniu.cuiqingcai.com/ipy96.jpg" /></a>
                    <a target="_blank" href="#"><img src="https://qiniu.cuiqingcai.com/fqq5e.png" /></a>
                    <a target="_blank" href="#"><img src="https://qiniu.cuiqingcai.com/bjrny.jpg" /></a>
                    <a target="_blank" href="#"><img src="https://qiniu.cuiqingcai.com/uyl5v.jpg" /></a>
                    <a target="_blank" href="#"><img src="https://qiniu.cuiqingcai.com/nifs6.jpg" /></a>
                  </div>
                </div>
                <div class="ws_shadow"></div>
              </div>
            </div>
            <link rel="stylesheet" href="/lib/wowslide/slide.css">
            <script src="/lib/wowslide/jquery.min.js"></script>
            <script src="/lib/wowslide/slider.js"></script>
            <script>
              jQuery("#wowslider-container").wowSlider(
              {
                effect: "cube",
                prev: "",
                next: "",
                duration: 20 * 100,
                delay: 20 * 100,
                width: 716,
                height: 297,
                autoPlay: true,
                playPause: true,
                stopOnHover: false,
                loop: false,
                bullets: 0,
                caption: true,
                captionEffect: "slide",
                controls: true,
                onBeforeStep: 0,
                images: 0
              });

            </script>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1680.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> JavaScript <i class="label-arrow"></i>
                  </a>
                  <a href="/1680.html" class="post-title-link" itemprop="url">jQuery应用五之瀑布流效果的实现</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>这里我们来利用jQuery实现瀑布流效果。</p>
                  <h2 id="在线演示"><a href="#在线演示" class="headerlink" title="在线演示"></a>在线演示</h2>
                  <p>我们首先来在线演示一下效果，然后我们说一下是怎样的实现，点开链接进行预览吧 <a href="http://res.cuiqingcai.com/waterfall/" target="_blank" rel="noopener">在线预览</a></p>
                  <h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2>
                  <p>首先我们在页面中加入了一些图片元素，都加到id为container的元素中，每一张图片都在一个class为box的容器里，然后里面是一张图片。</p>
                  <figure class="highlight applescript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"container"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"box"</span>&gt;</span><br><span class="line">            &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"content"</span>&gt;</span><br><span class="line">                &lt;img src=<span class="string">"img/1.jpg"</span>&gt;</span><br><span class="line">            &lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">        &lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在JS中，我们遍历了每一个box，实现box的位置为上一行高度最小的box的位置。</p>
                  <figure class="highlight pgsql">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">function</span> imgLocation()&#123;</span><br><span class="line">    var <span class="type">box</span> = $(".box");</span><br><span class="line">    var boxWidth = <span class="type">box</span>.eq(<span class="number">0</span>).width();</span><br><span class="line">    var num = Math.floor($(<span class="keyword">window</span>).width()/boxWidth);</span><br><span class="line">    var boxArr=[];</span><br><span class="line">    <span class="type">box</span>.<span class="keyword">each</span>(<span class="keyword">function</span>(<span class="keyword">index</span>,<span class="keyword">value</span>)&#123;</span><br><span class="line">        var boxHeight = <span class="type">box</span>.eq(<span class="keyword">index</span>).height();</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">index</span>&lt;num)&#123;</span><br><span class="line">            boxArr[<span class="keyword">index</span>]= boxHeight;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            var minboxHeight = Math.min.apply(<span class="keyword">null</span>,boxArr);</span><br><span class="line">            var minboxIndex = $.inArray(minboxHeight,boxArr);</span><br><span class="line">            $(<span class="keyword">value</span>).css(&#123;</span><br><span class="line">                "position":"absolute",</span><br><span class="line">                "top":minboxHeight,</span><br><span class="line">                "left":<span class="type">box</span>.eq(minboxIndex).position().left</span><br><span class="line">            &#125;);</span><br><span class="line">            boxArr[minboxIndex]+=<span class="type">box</span>.eq(<span class="keyword">index</span>).height();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>最后实现了滚动条滑动时的动态加载</p>
                  <figure class="highlight javascript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollside</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> box = $(<span class="string">".box"</span>);</span><br><span class="line">    <span class="keyword">var</span> lastboxHeight = box.last().get(<span class="number">0</span>).offsetTop+<span class="built_in">Math</span>.floor(box.last().height()/<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> documentHeight = $(<span class="built_in">document</span>).width();</span><br><span class="line">    <span class="keyword">var</span> scrollHeight = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">    <span class="keyword">return</span> (lastboxHeight&lt;scrollHeight+documentHeight)?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>调用如下</p>
                  <figure class="highlight javascript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(scrollside())&#123;</span><br><span class="line">                $.each(dataImg.data,<span class="function"><span class="keyword">function</span>(<span class="params">index,value</span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> box = $(<span class="string">"&lt;div&gt;"</span>).addClass(<span class="string">"box"</span>).appendTo($(<span class="string">"#container"</span>));</span><br><span class="line">                    <span class="keyword">var</span> content = $(<span class="string">"&lt;div&gt;"</span>).addClass(<span class="string">"content"</span>).appendTo(box);</span><br><span class="line">                    $(<span class="string">"&lt;img&gt;"</span>).attr(<span class="string">"src"</span>,<span class="string">"./img/"</span>+$(value).attr(<span class="string">"src"</span>)).appendTo(content);</span><br><span class="line">                &#125;);</span><br><span class="line">                imgLocation();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>通过上述简单的设置我们就实现了瀑布流的效果。</p>
                  <h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2>
                  <p><a href="https://github.com/cqcre/waterfall" target="_blank" rel="noopener">源码下载</a></p>
                  <h2 id="综述-1"><a href="#综述-1" class="headerlink" title="综述"></a>综述</h2>
                  <p>以上便是瀑布流效果的实现，希望对大家有一定帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-24 15:44:34" itemprop="dateCreated datePublished" datetime="2015-04-24T15:44:34+08:00">2015-04-24</time>
                </span>
                <span id="/1680.html" class="post-meta-item leancloud_visitors" data-flag-title="jQuery应用五之瀑布流效果的实现" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>1.6k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>1 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1658.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> C/C++ <i class="label-arrow"></i>
                  </a>
                  <a href="/1658.html" class="post-title-link" itemprop="url">OpenGL绘图实例五之平移缩放旋转</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>OpenGL中的变换可以分为下面的三种： 即模型变换、投影变换、视口变换。 模型变换其实就相当于图形的几何变换，包括平移、缩放、旋转等操作，下面我们来详细研究一下OpenGL中三种操作的函数应用。</p>
                  <h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2>
                  <p>在变换前我们首先要做一下准备工作，首先我们需要调用glMatrixMode函数来设置变换模式。 该方法介绍如下 <strong>glMatrixMode(Glenum mode)</strong>，设置当前矩阵模式，它具有三个参数，分别为<strong>GL_MODELVIEW</strong>，<strong>GL_PROJECTION</strong>，<strong>GL_TEXTURE</strong>。三个参数的含义为：</p>
                  <blockquote>
                    <p><strong>GL_MODELVIEW</strong>,对模型视景矩阵堆栈应用随后的矩阵操作，也就是针对本节的模型几何变换设置的模式，本节所有内容均为此模式。 <strong>GL_PROJECTION</strong>,对投影矩阵应用随后的矩阵操作，在投影变换中设置的模式。 <strong>GL_TEXTURE</strong>,对纹理矩阵堆栈应用随后的矩阵操作，在设置动态纹理的过程中设置的模式。</p>
                  </blockquote>
                  <p>所以，在本节我们就需要设置如下的模式</p>
                  <figure class="highlight lisp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glMatrixMode(<span class="name">GL_MODELVIEW</span>)<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>接下来，我们需要设置</p>
                  <figure class="highlight abnf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glLoadIdentity()<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这个方法的作用是设置将当前的用户坐标系的原点移到了屏幕中心，类似于一个复位操作。 好，设置好以上两个条件之后我们就可以来进行变换啦。主要有以下三个函数：</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">gl<span class="constructor">Rotatef(<span class="params">angle</span>,<span class="params">vx</span>,<span class="params">vy</span>,<span class="params">vz</span>)</span> <span class="comment">//绕向量(vx,vy,vz)为轴旋转角度angle</span></span><br><span class="line">gl<span class="constructor">Translate(<span class="params">dx</span>,<span class="params">dy</span>,<span class="params">dz</span>)</span> <span class="comment">//平移，位移量为向量(dx,dy,dz)</span></span><br><span class="line">gl<span class="constructor">Scalef(<span class="params">sx</span>,<span class="params">sy</span>,<span class="params">sz</span>)</span> <span class="comment">//比例缩放，x，y，z 方向的缩放因子分别为sx，sy，sz</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>下面我们来详细说明这三个函数的用法。</p>
                  <h2 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h2>
                  <p>三种变换中，平移变换是最简单的。 类库中提供了下面两个方法：</p>
                  <blockquote>
                    <p>glTranslated(GLdouble x,GLdouble y,GLdouble z) glTranslatef(GLfloat x,GLfloat y,GLfloat z)</p>
                  </blockquote>
                  <p>这两种方法是基本是等价的，一种方法是传入double类型的参数，另一个是传入float类型的参数。 方法的作用是<strong>将物体分别沿x，y，z轴平移x，y，z的单位长度</strong>。 利用上一节的机器人我们来感受一下</p>
                  <h3 id="1-向右平移100像素"><a href="#1-向右平移100像素" class="headerlink" title="1.向右平移100像素"></a><strong>1.向右平移100像素</strong></h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glTranslated(<span class="number">100</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422142910.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422142910.jpg" alt="20150422142910"></a> 可以看到，机器人向右平移了100像素</p>
                  <h3 id="2-向左下分别平移50-50像素"><a href="#2-向左下分别平移50-50像素" class="headerlink" title="2.向左下分别平移50,50像素"></a><strong>2.向左下分别平移50,50像素</strong></h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glTranslated(<span class="number">-50</span>,<span class="number">-50</span>,<span class="number">0</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422143102.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422143102.jpg" alt="20150422143102"></a> 可以看到，机器人分别向左和向下平移了50像素</p>
                  <h3 id="3-向左下分别平移50-50，向前平移100"><a href="#3-向左下分别平移50-50，向前平移100" class="headerlink" title="3.向左下分别平移50,50，向前平移100"></a><strong>3.向左下分别平移50,50，向前平移100</strong></h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glTranslated(<span class="number">-50</span>,<span class="number">-50</span>,<span class="number">100</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422143102.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422143102.jpg" alt="20150422143102"></a> 哦，和上一个类似，也就是说在z轴上平移没有什么效果吗？难道因为我画的是二维平面图形？哦不，那不应该是距离我的视线更近了所以看到的更大了吗？好吧，事实好像不是这样的，我就姑且认为二维平面在z轴上的平移是没有影响的吧。 恩，这个函数基本用法就是这样，通过传入不同的x，y，z值实现平移即可。</p>
                  <h2 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h2>
                  <p>旋转的方法有下面两个：</p>
                  <blockquote>
                    <p>glRotatef(GLdouble angle,GLdouble x,GLdouble y,GLdouble z) glRotatef(GLfloat angle,GLfloat x,GLfloat y,GLfloat z)</p>
                  </blockquote>
                  <p>其中第一个参数是旋转的角度，后面三个参数 x,yz 参数确立了旋转轴，旋转轴是原点(0,0,0)与(x,y,z)的连线。 下面我们用几个例子来感受一下</p>
                  <h3 id="1-绕-x-轴旋转60度"><a href="#1-绕-x-轴旋转60度" class="headerlink" title="1.绕 x 轴旋转60度"></a><strong>1.绕 x 轴旋转60度</strong></h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glRotated(<span class="number">60</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422144433.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422144433.jpg" alt="20150422144433"></a> 恩，它变扁了，旋转中心在机器人的中心，也就是中间的小红点，设想一下，绕x轴旋转60度，的确我们看到的应该就是变扁的机器人</p>
                  <h3 id="2-绕z轴旋转90度"><a href="#2-绕z轴旋转90度" class="headerlink" title="2.绕z轴旋转90度"></a>2.绕z轴旋转90度</h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glRotated(<span class="number">90</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422144851.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422144851.jpg" alt="20150422144851"></a> 可以看到，机器人绕中心点旋转了90度，是逆时针方向。</p>
                  <h3 id="3-旋转平移结合"><a href="#3-旋转平移结合" class="headerlink" title="3.旋转平移结合"></a>3.旋转平移结合</h3>
                  <p>感受完上面的两个例子之后，<strong>重头戏来了</strong>，上面的例子中旋转轴是(0,0,0)和(x,y,z)两点的连线，也就是旋转轴总是通过坐标原点的。 那如果我们要让物体绕特定的旋转轴来旋转，比如绕(1,2,3)和(4,5,6)来旋转怎么办？ 这里就要用到平移和旋转的组合了。</p>
                  <blockquote>
                    <p>如果旋转轴通过(xp,yp,zp)，而不通过坐标原点。假如旋转轴为(xp,yp,zp)和(xq,yq,zq)确立的。我们首先要将图形沿x,y,z方向分别平移-xp,-yp,-zp，然后旋转参数(x,y,z)分别传入(xq-xp,yq-yp,zq-zp)三个值，旋转完毕之后再把图形沿x,y,z方向分别平移xp,yp,zp个单位长度即可。</p>
                  </blockquote>
                  <p>在这里，<strong>我的教材和指导书中的内容又发生了冲突</strong>，教材中说的是先沿x,y,z方向分别平移<strong>-xp,-yp,-zp</strong>，再沿x,y,z方向分别平移<strong>xp,yp,zp</strong>还原。而指导书中则是先沿x,y,z方向分别平移<strong>xp,yp,zp</strong>，再沿x,y,z方向分别平移<strong>-xp,-yp,-zp</strong>还原，到底谁对谁错呢？我们来一个小例子验证一下。 如果觉得无聊，可以自行忽略下面小段内容。 为了直观地表示，我们统一设z坐标为0，在xy平面中观察变换过程。 假设我们有一个点(2,2,0)，旋转的轴我们设为(1,2,0)和(4,5,0)的连线，那么该点绕轴旋转180度之后应该会是(1,3,0)，从图上可以很直观地看出 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/111.png" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/111.png" alt="111"></a> 那么在调用类库的时候，我们首先就要对这个点进行平移，然后旋转，然后再反平移恢复。</p>
                  <blockquote>
                    <p>首先，我们按照第一种说法，即先沿x,y,z方向分别平移-xp,-yp,-zp，即(2,2,0)减去(1,2,0)，变为了(1,0,0)，然后传入(xq-xp,yq-yp,zq-zp)实现绕(0,0,0)与(xq-xp,yq-yp,zq-zp)两点连线为旋转轴来旋转180度，显然是绕(0,0,0)与(3,3,0)的连线来旋转的，这个点变为了(0,1,0)，然后再沿x,y,z方向分别平移xp,yp,zp还原，即加(1,2,0)，即加得到的结果是(1,3,0)。确实与图中点的符合，所以这一种说法验证正确。 另一种说法，即先沿x,y,z方向分别平移xp,yp,zp，即(2,2,0)加上(1,2,0)，变为了(3,4,0)，然后传入(xq-xp,yq-yp,zq-zp)实现绕(0,0,0)与(xq-xp,yq-yp,zq-zp)两点连线为旋转轴来旋转180度，显然是绕(0,0,0)与(3,3,0)的连线来旋转的，这个点变为了(4,3,0)，然后再沿x,y,z方向分别平移-xp,-yp,-zp还原，即减去(1,2,0)，即加得到的结果是(3,1,0)。与图中的点不符，所以这一种说法验证失败。</p>
                  </blockquote>
                  <p>可见，我们得到的结果是</p>
                  <blockquote>
                    <p>如果旋转轴通过(xp,yp,zp)，而不通过坐标原点。假如旋转轴为(xp,yp,zp)和(xq,yq,zq)确立的。我们首先要将图形沿x,y,z方向分别平移-xp,-yp,-zp，然后旋转参数(x,y,z)分别传入(xq-xp,yq-yp,zq-zp)三个值，旋转完毕之后再把图形沿x,y,z方向分别平移xp,yp,zp个单位长度即可。</p>
                  </blockquote>
                  <p>所以，我们要实现机器人绕两点(10,20,30)和(40,50,60)定义的轴线旋转45度，代码实现如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glTranslatef(<span class="number">-10</span>,<span class="number">-20</span>,<span class="number">-30</span>);</span><br><span class="line"><span class="comment">//(40,50,60)-(10,20,30)=(30,30,30)</span></span><br><span class="line">glRotatef(<span class="number">45</span>,<span class="number">30</span>,<span class="number">30</span>,<span class="number">30</span>);</span><br><span class="line">glTranslatef(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/0150422151947.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/0150422151947.jpg" alt="0150422151947"></a> 运行结果可能不太直观，可以直接参考代码实现</p>
                  <h2 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h2>
                  <p>对于缩放，我们的方法也是有两个</p>
                  <blockquote>
                    <p>glScaled(GLdouble x,GLdouble y,GLdouble z) glScalef(GLfloat x,GLfloat y,GLfloat z)</p>
                  </blockquote>
                  <p>区别也就是一个参数为double类型，一个为float类型 函数的作用是将物体分别在x,y,z轴方向缩放为x,y,z倍，缩放中心为原点 下面我们来几个小例子感受一下</p>
                  <h3 id="1-沿x轴放大2倍"><a href="#1-沿x轴放大2倍" class="headerlink" title="1.沿x轴放大2倍"></a>1.沿x轴放大2倍</h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glScaled(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422153045.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422153045.jpg" alt="20150422153045"></a> 画面好美！</p>
                  <h3 id="2-沿y轴z轴分别放大2倍"><a href="#2-沿y轴z轴分别放大2倍" class="headerlink" title="2.沿y轴z轴分别放大2倍"></a>2.沿y轴z轴分别放大2倍</h3>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glScaled(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422153914.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422153914.jpg" alt="20150422153914"></a> 因为整个图形是一个平面图，所以我们只可以看出z轴放缩的效果</p>
                  <h3 id="3-放缩和平移的变换"><a href="#3-放缩和平移的变换" class="headerlink" title="3.放缩和平移的变换"></a>3.放缩和平移的变换</h3>
                  <p>和旋转的原理一样，默认的放缩中心是原点，在这里，如果我们的放缩中心如果不是原点，我们该怎样设置呢？ 假设放缩中心为(xp,yp,zp)，方法如下：</p>
                  <blockquote>
                    <p>如果我们的放缩中心设置为(xp,yp,zp)，而不是坐标原点。我们首先要将图形沿x,y,z方向分别平移-xp,-yp,-zp，然后放缩参数(x,y,z)分别传入三个值代表放缩比例，放缩完毕之后再把图形沿x,y,z方向分别平移xp,yp,zp个单位长度还原。</p>
                  </blockquote>
                  <p>下面，我们以(50,50,50)为放缩中心来对机器人的xy方向分别放缩1.5倍</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glTranslated(<span class="number">-50</span>,<span class="number">-50</span>,<span class="number">0</span>);</span><br><span class="line">glScaled(<span class="number">1.5</span>,<span class="number">1.5</span>,<span class="number">0</span>);</span><br><span class="line">glTranslated(<span class="number">50</span>,<span class="number">50</span>,<span class="number">0</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422155459.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150422155459.jpg" alt="20150422155459"></a> 这样，我们就实现了以(50,50,0)为放缩原点来进行放大1.5倍的操作。</p>
                  <h2 id="综述-1"><a href="#综述-1" class="headerlink" title="综述"></a>综述</h2>
                  <p>在本篇我们描述了OpenGL中的平移旋转放缩变换操作，以及一些实例演示，希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-22 14:19:04" itemprop="dateCreated datePublished" datetime="2015-04-22T14:19:04+08:00">2015-04-22</time>
                </span>
                <span id="/1658.html" class="post-meta-item leancloud_visitors" data-flag-title="OpenGL绘图实例五之平移缩放旋转" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>3.7k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>3 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1649.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> C/C++ <i class="label-arrow"></i>
                  </a>
                  <a href="/1649.html" class="post-title-link" itemprop="url">OpenGL绘图实例四之区域颜色填充</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>上一节我们利用种子填充算法实现了机器人的区域填充，我们可以发现，种子填充需要一定是时间，并不能在第一时间填充完毕。这里我们介绍一种更加简单的方法，我们利用 glPolygonMode 来绘制机器人，感受一下。</p>
                  <h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2>
                  <p>我们曾经分别使用过类库和直线圆弧生成算法来绘制过机器人的线条。 类库绘制法：<a href="http://cuiqingcai.com/1597.html">OpenGL绘图实例一之机器人的绘制</a> 算法绘制法：<a href="http://cuiqingcai.com/1613.html">OpenGL绘图实例二之直线和圆弧的绘制</a> 填充算法也有两种，一种是种子填充算法，另一种就是本篇说的方法。 在这里我们可以归一下类，算法绘制线条方法和种子填充算法中的每一个点都是我们一点点绘制的，都是我们利用算法一点点计算的坐标来绘制，因此，可以把他俩归为一对。而类库绘制线条方法和本篇说的填充方法都是指定一部分点，类库为我们实现了填充，因此可以把他俩归为一对。下面就让我们来感受一下类库填充的魅力吧！</p>
                  <h2 id="函数说明"><a href="#函数说明" class="headerlink" title="函数说明"></a>函数说明</h2>
                  <h3 id="1-函数原型"><a href="#1-函数原型" class="headerlink" title="1.函数原型"></a><strong>1.函数原型</strong></h3>
                  <p>函数原型：void glPolygonMode(GLenum face, GLenum mode); 说明：控制一个多边形的正面和背面的绘图模式。表示多边形应该被画成点、轮廓还是填充形式。在默认情况下，多边形的正面和背面都被画成填充形式。 函数glPolygonMode()用于改变当前的多边形绘制模式，它有两个参数。第一个参数指定哪些面将被这个调用，可能的值为GL_FRONT、GL_BACK 或GL_FRONT_AND_BACK，分别对应于前向多边形、后向多边形或两者。第二个参数指定将要使用的模式，可以为GL_POINT、GL_LINE 或GL_FILL。 下面我们来用一个小Demo来感受一下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">glBegin(GL_TRIANGLES);</span><br><span class="line">glVertex3f(‐<span class="number">0.8f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(‐<span class="number">0.6f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(‐<span class="number">0.7f</span>,<span class="number">0.2f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glEnd();</span><br><span class="line">glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span><br><span class="line">glBegin(GL_TRIANGLES);</span><br><span class="line">glVertex3f(<span class="number">0.1f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(‐<span class="number">0.1f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(<span class="number">0.0f</span>,<span class="number">0.2f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glEnd();</span><br><span class="line">glPolygonMode(GL_FRONT_AND_BACK, GL_POINT);</span><br><span class="line">glBegin(GL_TRIANGLES);</span><br><span class="line">glVertex3f(<span class="number">0.6f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(<span class="number">0.8f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glVertex3f(<span class="number">0.7f</span>,<span class="number">0.2f</span>,<span class="number">0.0f</span>);</span><br><span class="line">glEnd();</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上三种模式分别是绘制了填充的三角形，三角形的边界，三角形的三个点。</p>
                  <h3 id="2-画多边形"><a href="#2-画多边形" class="headerlink" title="2.画多边形"></a>2.画多边形</h3>
                  <p>在glBegin的参数传入GL_POLYGON，绘制的时候所有的点就会连接而成一个多边形。</p>
                  <h3 id="3-线条的粗细"><a href="#3-线条的粗细" class="headerlink" title="3.线条的粗细"></a>3.线条的粗细</h3>
                  <figure class="highlight lisp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glLineWidth(<span class="name">lineWidth</span>)<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>利用这个方法，我们可以传入像素值大小，比如传入2，画线的时候就是2像素的粗细。</p>
                  <h2 id="绘制机器人"><a href="#绘制机器人" class="headerlink" title="绘制机器人"></a>绘制机器人</h2>
                  <p>接下来我们利用这个方法来绘制机器人吧！我们可以注意到，定义了glPolygonMode(GL_FRONT_AND_BACK, GL_FILL)之后， 如果glBegin传入的是GL_LINE_LOOP，绘制的仍然是封闭的曲线，如果glBegin传入的是GL_POLYGON，绘制的则是封闭的填充的图形。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/图片1.png" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/图片1.png" alt="图片1"></a> 如果要实现上图的机器人，我们既要绘制黑色的边线，又要绘制带颜色的区块。所以我们就需要分别调用两种绘制模式，绘制的过程是完全相同的。所以，我们可以把模式当做一个变量来传入参数中改变绘制模式。比如之前的绘制三角形的方法</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画三角形，传入三个点的坐标</span></span><br><span class="line">void gl<span class="constructor">Tri(<span class="params">int</span> <span class="params">x1</span>,<span class="params">int</span> <span class="params">y1</span>,<span class="params">int</span> <span class="params">x2</span>,<span class="params">int</span> <span class="params">y2</span>,<span class="params">int</span> <span class="params">x3</span>,<span class="params">int</span> <span class="params">y3</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    gl<span class="constructor">Begin(GL_LINE_LOOP)</span>;</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x1</span>,<span class="params">y1</span>)</span>;</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x2</span>,<span class="params">y2</span>)</span>;</span><br><span class="line">	<span class="comment">//三点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x3</span>,<span class="params">y3</span>)</span>;</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	gl<span class="constructor">End()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>就可以改写为</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画三角形，传入三个点的坐标</span></span><br><span class="line">void gl<span class="constructor">Tri(<span class="params">int</span> <span class="params">x1</span>,<span class="params">int</span> <span class="params">y1</span>,<span class="params">int</span> <span class="params">x2</span>,<span class="params">int</span> <span class="params">y2</span>,<span class="params">int</span> <span class="params">x3</span>,<span class="params">int</span> <span class="params">y3</span>,<span class="params">int</span> MODE)</span>&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    gl<span class="constructor">Begin(MODE)</span>;</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x1</span>,<span class="params">y1</span>)</span>;</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x2</span>,<span class="params">y2</span>)</span>;</span><br><span class="line">	<span class="comment">//三点</span></span><br><span class="line">	gl<span class="constructor">Vertex2d(<span class="params">x3</span>,<span class="params">y3</span>)</span>;</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	gl<span class="constructor">End()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在调用的时候我们只需要分别传入GL_LINE_LOOP和GL_POLYGON就可以了。 所有之前的方法改写如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画矩形，传入的是左下角XY坐标和右上角XY坐标</span></span><br><span class="line"><span class="built_in">void</span> glRect(<span class="built_in">int</span> leftX,<span class="built_in">int</span> leftY,<span class="built_in">int</span> rightX,<span class="built_in">int</span> rightY,<span class="built_in">int</span> MODE)&#123;</span><br><span class="line">	<span class="comment">//画封闭曲线</span></span><br><span class="line">    glBegin(MODE);</span><br><span class="line">	<span class="comment">//左下角</span></span><br><span class="line">	glVertex2d(leftX,leftY);</span><br><span class="line">	<span class="comment">//右下角</span></span><br><span class="line">	glVertex2d(rightX,leftY);</span><br><span class="line">	<span class="comment">//右上角</span></span><br><span class="line">	glVertex2d(rightX,rightY);</span><br><span class="line">	<span class="comment">//左上角</span></span><br><span class="line">	glVertex2d(leftX,rightY);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画圆角矩形，传入矩形宽高，角半径，矩形中心点坐标</span></span><br><span class="line"><span class="built_in">void</span> glRoundRec(<span class="built_in">int</span> centerX,<span class="built_in">int</span> centerY,<span class="built_in">int</span> width,<span class="built_in">int</span> height,<span class="built_in">float</span> cirR,<span class="built_in">int</span> MODE)&#123;</span><br><span class="line">	<span class="comment">//二分之PI，一个象限的角度</span></span><br><span class="line">	<span class="built_in">float</span> PI_HALF = PI/<span class="number">2</span>;</span><br><span class="line">	<span class="comment">//划分程度,值越大画得越精细</span></span><br><span class="line">	<span class="built_in">float</span> divide=<span class="number">20.0</span>;</span><br><span class="line">	<span class="comment">//圆角矩形的坐标</span></span><br><span class="line">    <span class="built_in">float</span> tx,ty; </span><br><span class="line">	<span class="comment">//画封闭曲线</span></span><br><span class="line">    glBegin(MODE);</span><br><span class="line">	<span class="comment">//四个象限不同的操作符</span></span><br><span class="line">    <span class="built_in">int</span> opX[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="built_in">int</span> opY[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">	<span class="comment">//用来计数，从第一象限到第四象限</span></span><br><span class="line">    <span class="built_in">float</span> x=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//x自增时加的值</span></span><br><span class="line">	<span class="built_in">float</span> part=<span class="number">1</span>/divide;</span><br><span class="line">	<span class="comment">//计算内矩形宽高一半的数值</span></span><br><span class="line">	<span class="built_in">int</span> w=width/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="built_in">int</span> h=height/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="comment">//循环画线</span></span><br><span class="line">    <span class="keyword">for</span>(x=<span class="number">0</span>;x&lt;<span class="number">4</span>;x+=part)&#123;</span><br><span class="line">		<span class="comment">//求出弧度</span></span><br><span class="line">		<span class="built_in">float</span> rad = PI_HALF*x;</span><br><span class="line">		<span class="comment">//计算坐标值</span></span><br><span class="line">	    tx=cirR*cos(rad)+opX[(<span class="built_in">int</span>)x]*w+centerX;</span><br><span class="line">	    ty=cirR*sin(rad)+opY[(<span class="built_in">int</span>)x]*h+centerY;</span><br><span class="line">		<span class="comment">//传入坐标画线</span></span><br><span class="line">	    glVertex2f(tx,ty);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">   glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画弧线，相对偏移量XY，开始的弧度，结束的弧度，半径</span></span><br><span class="line"><span class="built_in">void</span> glArc(<span class="built_in">double</span> x,<span class="built_in">double</span> y,<span class="built_in">double</span> start_angle,<span class="built_in">double</span> end_angle,<span class="built_in">double</span> radius,<span class="built_in">int</span> MODE)</span><br><span class="line">&#123;   </span><br><span class="line">	<span class="comment">//开始绘制曲线</span></span><br><span class="line">	glBegin(MODE);</span><br><span class="line">	<span class="comment">//每次画增加的弧度</span></span><br><span class="line">	<span class="built_in">double</span> delta_angle=PI/<span class="number">180</span>;</span><br><span class="line">	<span class="comment">//画圆弧</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">double</span> i=start_angle;i&lt;=end_angle;i+=delta_angle)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//绝对定位加三角函数值</span></span><br><span class="line">		<span class="built_in">double</span> vx=x+radius * cos(i);</span><br><span class="line">		<span class="built_in">double</span> vy=y+radius*sin(i);</span><br><span class="line">		glVertex2d(vx,vy);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束绘画</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//画圆</span></span><br><span class="line"><span class="built_in">void</span> glCircle(<span class="built_in">double</span> x, <span class="built_in">double</span> y, <span class="built_in">double</span> radius,<span class="built_in">int</span> MODE)  </span><br><span class="line">&#123;  </span><br><span class="line">	<span class="comment">//画全圆</span></span><br><span class="line">    glArc(x,y,<span class="number">0</span>,<span class="number">2</span>*PI,radius,MODE);  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//画三角形，传入三个点的坐标</span></span><br><span class="line"><span class="built_in">void</span> glTri(<span class="built_in">int</span> x1,<span class="built_in">int</span> y1,<span class="built_in">int</span> x2,<span class="built_in">int</span> y2,<span class="built_in">int</span> x3,<span class="built_in">int</span> y3,<span class="built_in">int</span> MODE)&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    glBegin(MODE);</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	glVertex2d(x1,y1);</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	glVertex2d(x2,y2);</span><br><span class="line">	<span class="comment">//三点</span></span><br><span class="line">	glVertex2d(x3,y3);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画线，传入两点坐标</span></span><br><span class="line"><span class="built_in">void</span> glLine(<span class="built_in">int</span> x1,<span class="built_in">int</span> y1,<span class="built_in">int</span> x2,<span class="built_in">int</span> y2)&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    glBegin(GL_LINE_STRIP);</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	glVertex2d(x1,y1);</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	glVertex2d(x2,y2);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>那么我们实现了上面的方法之后。比如我现在要画一个矩形，就要传入GL_LINE_LOOP绘制一个边缘，然后再传入GL_POLYGON绘制一个填充的矩形，其中这个矩形的长宽等于边缘的长宽减去线的宽度（经过探索发现，应该减去线宽的一半才对，因为线的基准点是在线宽的中心的） 所以，我们可以定义一个画带边矩形的方法，比如</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画填充的矩形，传入左上角和右下角的坐标</span></span><br><span class="line">void gl<span class="constructor">FillRect(<span class="params">int</span> <span class="params">leftX</span>,<span class="params">int</span> <span class="params">leftY</span>,<span class="params">int</span> <span class="params">rightX</span>,<span class="params">int</span> <span class="params">rightY</span>,<span class="params">int</span> <span class="params">color</span>[3])</span>&#123;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">border</span>[0],<span class="params">border</span>[1],<span class="params">border</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Rect(<span class="params">leftX</span>,<span class="params">leftY</span>,<span class="params">rightX</span>,<span class="params">rightY</span>,GL_LINE_LOOP)</span>;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">color</span>[0],<span class="params">color</span>[1],<span class="params">color</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Rect(<span class="params">leftX</span>+<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">leftY</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">rightX</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">rightY</span>+<span class="params">lineWidth</span><span class="operator">/</span>2,GL_POLYGON)</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>我们先定义了边界颜色绘制了边界，然后定义了图形的颜色来绘制填充的图形。其中color作为参数，可以传入不同的RGB值。 定义颜色RGB数组即可</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">int</span> border[<span class="number">3</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> grey[<span class="number">3</span>]=&#123;<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> yellow[<span class="number">3</span>]=&#123;<span class="number">255</span>,<span class="number">243</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> red[<span class="number">3</span>]=&#123;<span class="number">237</span>,<span class="number">28</span>,<span class="number">36</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> darkGrey[<span class="number">3</span>]=&#123;<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> white[<span class="number">3</span>]=&#123;<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>&#125;;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>调用的时候我们只需要</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glFillRect(<span class="number">-108</span>,<span class="number">45</span>,<span class="number">-81</span>,<span class="number">0</span>,darkGrey);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>就可以绘制一个黑色边界的矩形了，填充色为暗灰色。 其他类似的方法实现如下</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画填充的三角形，传值为逆时针，此法针对于机器人的正三角形</span></span><br><span class="line">void gl<span class="constructor">FillTri(<span class="params">int</span> <span class="params">x1</span>,<span class="params">int</span> <span class="params">y1</span>,<span class="params">int</span> <span class="params">x2</span>,<span class="params">int</span> <span class="params">y2</span>,<span class="params">int</span> <span class="params">x3</span>,<span class="params">int</span> <span class="params">y3</span>,<span class="params">int</span> <span class="params">color</span>[3])</span>&#123;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">border</span>[0],<span class="params">border</span>[1],<span class="params">border</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Tri(<span class="params">x1</span>,<span class="params">y1</span>,<span class="params">x2</span>,<span class="params">y2</span>,<span class="params">x3</span>,<span class="params">y3</span>,GL_LINE_LOOP)</span>;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">color</span>[0],<span class="params">color</span>[1],<span class="params">color</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Tri(<span class="params">x1</span>+<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">y1</span>+<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">x2</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">y2</span>+<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">x3</span>,<span class="params">y3</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,GL_POLYGON)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画填充的圆角矩形</span></span><br><span class="line">void gl<span class="constructor">FillRoundRec(<span class="params">int</span> <span class="params">centerX</span>,<span class="params">int</span> <span class="params">centerY</span>,<span class="params">int</span> <span class="params">width</span>,<span class="params">int</span> <span class="params">height</span>,<span class="params">float</span> <span class="params">cirR</span>,<span class="params">int</span> <span class="params">color</span>[3])</span>&#123;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">border</span>[0],<span class="params">border</span>[1],<span class="params">border</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">RoundRec(<span class="params">centerX</span>,<span class="params">centerY</span>,<span class="params">width</span>,<span class="params">height</span>,<span class="params">cirR</span>,GL_LINE_LOOP)</span>;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">color</span>[0],<span class="params">color</span>[1],<span class="params">color</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">RoundRec(<span class="params">centerX</span>,<span class="params">centerY</span>,<span class="params">width</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">height</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,<span class="params">cirR</span>,GL_POLYGON)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画填充的圆形</span></span><br><span class="line">void gl<span class="constructor">FillCircle(<span class="params">double</span> <span class="params">x</span>, <span class="params">double</span> <span class="params">y</span>, <span class="params">double</span> <span class="params">radius</span>,<span class="params">int</span> <span class="params">color</span>[3])</span>&#123;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">border</span>[0],<span class="params">border</span>[1],<span class="params">border</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Circle(<span class="params">x</span>,<span class="params">y</span>,<span class="params">radius</span>,GL_LINE_LOOP)</span>;</span><br><span class="line">	gl<span class="constructor">Color3ub(<span class="params">color</span>[0],<span class="params">color</span>[1],<span class="params">color</span>[2])</span>;</span><br><span class="line">	gl<span class="constructor">Circle(<span class="params">x</span>,<span class="params">y</span>,<span class="params">radius</span>-<span class="params">lineWidth</span><span class="operator">/</span>2,GL_POLYGON)</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>恩，万事俱备只欠东风了，下面我们调用一下这几个函数直接进行绘制就好啦。 display中的绘图调用如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//函数用来画图</span></span><br><span class="line"><span class="built_in">void</span> display(<span class="built_in">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//GL_COLOR_BUFFER_BIT表示清除颜色</span></span><br><span class="line">	glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">	glLineWidth(lineWidth);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置画线颜色</span></span><br><span class="line">    glColor3ub(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">	<span class="comment">//画圆角矩形，大脸</span></span><br><span class="line">	glFillRoundRec(<span class="number">0</span>,<span class="number">113</span>,<span class="number">128</span>,<span class="number">74</span>,<span class="number">10</span>,grey);</span><br><span class="line">	<span class="comment">//两个眼睛</span></span><br><span class="line">	glFillCircle(<span class="number">-30</span>,<span class="number">111</span>,<span class="number">10</span>,white);</span><br><span class="line">	glFillCircle(<span class="number">30</span>,<span class="number">111</span>,<span class="number">10</span>,white);</span><br><span class="line">	<span class="comment">//黑色线</span></span><br><span class="line">	glColor3ub(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//两条天线</span></span><br><span class="line">	glLine(<span class="number">-35</span>,<span class="number">150</span>,<span class="number">-35</span>,<span class="number">173</span>);</span><br><span class="line">	glLine(<span class="number">35</span>,<span class="number">150</span>,<span class="number">35</span>,<span class="number">173</span>);</span><br><span class="line">	<span class="comment">//圆弧，画嘴</span></span><br><span class="line">	glArc(<span class="number">0</span>,<span class="number">133</span>,<span class="number">11</span>*PI/<span class="number">8</span>,<span class="number">13</span>*PI/<span class="number">8</span>,<span class="number">45</span>,GL_LINE_STRIP);</span><br><span class="line">	<span class="comment">//画矩形，脖子</span></span><br><span class="line">	glFillRect(<span class="number">-25</span>,<span class="number">76</span>,<span class="number">25</span>,<span class="number">60</span>,grey);</span><br><span class="line">	<span class="comment">//圆角矩形，两个耳朵</span></span><br><span class="line">	glFillRoundRec(<span class="number">81</span>,<span class="number">115</span>,<span class="number">20</span>,<span class="number">34</span>,<span class="number">5</span>,darkGrey);</span><br><span class="line">	glFillRoundRec(<span class="number">-81</span>,<span class="number">115</span>,<span class="number">20</span>,<span class="number">34</span>,<span class="number">5</span>,darkGrey);</span><br><span class="line">	<span class="comment">//画圆角矩形，大肚子</span></span><br><span class="line">	glFillRoundRec(<span class="number">0</span>,<span class="number">0</span>,<span class="number">146</span>,<span class="number">120</span>,<span class="number">15</span>,grey);</span><br><span class="line">	<span class="comment">//画三角，肚子里的三角</span></span><br><span class="line">	glFillTri(<span class="number">-30</span>,<span class="number">-15</span>,<span class="number">30</span>,<span class="number">-15</span>,<span class="number">0</span>,<span class="number">28</span>,yellow);</span><br><span class="line">	<span class="comment">//画圆，中间小圈</span></span><br><span class="line">	glFillCircle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>,red);</span><br><span class="line">	<span class="comment">//画矩形，胳膊连接处</span></span><br><span class="line">	glFillRect(<span class="number">-81</span>,<span class="number">43</span>,<span class="number">-73</span>,<span class="number">25</span>,grey);</span><br><span class="line">	glFillRect(<span class="number">73</span>,<span class="number">43</span>,<span class="number">81</span>,<span class="number">25</span>,grey);</span><br><span class="line">	<span class="comment">//画矩形，上臂</span></span><br><span class="line">	glFillRect(<span class="number">-108</span>,<span class="number">45</span>,<span class="number">-81</span>,<span class="number">0</span>,darkGrey);</span><br><span class="line">	glFillRect(<span class="number">81</span>,<span class="number">45</span>,<span class="number">108</span>,<span class="number">0</span>,darkGrey);</span><br><span class="line">	<span class="comment">//画矩形，中臂</span></span><br><span class="line">	glFillRect(<span class="number">-101</span>,<span class="number">0</span>,<span class="number">-88</span>,<span class="number">-4</span>,grey);</span><br><span class="line">	glFillRect(<span class="number">88</span>,<span class="number">0</span>,<span class="number">101</span>,<span class="number">-4</span>,grey);</span><br><span class="line">	<span class="comment">//画矩形，下臂</span></span><br><span class="line">	glFillRect(<span class="number">-108</span>,<span class="number">-4</span>,<span class="number">-81</span>,<span class="number">-37</span>,darkGrey);</span><br><span class="line">	glFillRect(<span class="number">81</span>,<span class="number">-4</span>,<span class="number">108</span>,<span class="number">-37</span>,darkGrey);</span><br><span class="line">	<span class="comment">//画圆形，手掌</span></span><br><span class="line">	glFillCircle(<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">10</span>,grey);</span><br><span class="line">	glFillCircle(<span class="number">95</span>,<span class="number">-47</span>,<span class="number">10</span>,grey);</span><br><span class="line">	<span class="comment">//画腿连接处</span></span><br><span class="line">	glFillRect(<span class="number">-41</span>,<span class="number">-62</span>,<span class="number">-21</span>,<span class="number">-66</span>,grey);</span><br><span class="line">	glFillRect(<span class="number">21</span>,<span class="number">-62</span>,<span class="number">41</span>,<span class="number">-66</span>,grey);</span><br><span class="line">	<span class="comment">//画圆角矩形，大长腿</span></span><br><span class="line">	glFillRoundRec(<span class="number">-32</span>,<span class="number">-92</span>,<span class="number">38</span>,<span class="number">52</span>,<span class="number">10</span>,darkGrey);</span><br><span class="line">	glFillRoundRec(<span class="number">32</span>,<span class="number">-92</span>,<span class="number">38</span>,<span class="number">52</span>,<span class="number">10</span>,darkGrey);</span><br><span class="line">	<span class="comment">//画矩形，脚踝</span></span><br><span class="line">	glFillRect(<span class="number">-41</span>,<span class="number">-117</span>,<span class="number">-21</span>,<span class="number">-125</span>,grey);</span><br><span class="line">	glFillRect(<span class="number">21</span>,<span class="number">-117</span>,<span class="number">41</span>,<span class="number">-125</span>,grey);</span><br><span class="line">	<span class="comment">//画矩形，大脚掌</span></span><br><span class="line">	glFillRect(<span class="number">-59</span>,<span class="number">-125</span>,<span class="number">-8</span>,<span class="number">-137</span>,darkGrey);</span><br><span class="line">	glFillRect(<span class="number">8</span>,<span class="number">-125</span>,<span class="number">59</span>,<span class="number">-137</span>,darkGrey);</span><br><span class="line">	glFlush();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>恩，这样就大功告成啦，是不是比种子填充算法简单多了？</p>
                  <h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/QQ截图20150421000536.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/QQ截图20150421000536.jpg" alt="QQ截图20150421000536"></a> 恩，那些小白点就忽略吧！！这叫不拘小节！！哈哈哈！！</p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>本节我们利用了类库的方法来实现了颜色填充，是不是很简单？</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-20 23:56:51" itemprop="dateCreated datePublished" datetime="2015-04-20T23:56:51+08:00">2015-04-20</time>
                </span>
                <span id="/1649.html" class="post-meta-item leancloud_visitors" data-flag-title="OpenGL绘图实例四之区域颜色填充" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>7.2k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>7 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1640.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> C/C++ <i class="label-arrow"></i>
                  </a>
                  <a href="/1640.html" class="post-title-link" itemprop="url">OpenGL绘图实例三之种子填充算法</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>博主研究了一下午加一晚上，终于把种子填充算法实现出来并把机器人填充完毕，路途很艰辛，不过也学到了很多，在此和大家一起分享。</p>
                  <h2 id="吐槽"><a href="#吐槽" class="headerlink" title="吐槽"></a>吐槽</h2>
                  <p>与我不是同学的小伙伴，请自动忽略，我是来吐槽教材的。 在此不得不吐槽一下，不得不说教材实在太坑爹了。对于种子填充算法的后半部分，下一个种子点的寻找过程中，从while(x&lt;=xright)开始，我实在无法搞懂它里面的神逻辑，最初我认为它是对的，后来按照它的思路实现之后，填充基本上是错误的，比如圆角矩形下方的部分，它就无法正常填充。根本原因还是它的下一步种子点找错了，而博主依然在固执地DeBug，看看是不是我哪里编码有问题。后来，干脆放弃了书上的逻辑了，自己改写了搜寻下一个种子点的算法，最后终于成功。 另外，教材上的这些伪代码写得也是太伪，算了，这不是重点，言归正传。</p>
                  <h2 id="基本梳理"><a href="#基本梳理" class="headerlink" title="基本梳理"></a>基本梳理</h2>
                  <p>在博主的研究过程中，遇到了许许多多的小问题，在这里统一做一下总结，也希望大家少走弯路，吸取我的经验教训。</p>
                  <h3 id="1-点的定义"><a href="#1-点的定义" class="headerlink" title="1.点的定义"></a>1.点的定义</h3>
                  <p>在这里我们避免不了要使用点，一个点包括了2个元素，一个是横坐标一个是纵坐标，所以我们可以直接把它定义为一个结构体。</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这样的话，我们就可以直接声明一个 Point 类型的变量使用了，既方便又直观。</p>
                  <h3 id="2-栈的使用"><a href="#2-栈的使用" class="headerlink" title="2.栈的使用"></a>2.栈的使用</h3>
                  <p>对于种子填充算法，肯定避免不了使用栈的，在这里博主分享一下一些使用心得。 <strong>栈的引入</strong> C++代码中，可以直接用下面的代码来导入</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>注意，这里一定记得加上 using namespace std 这句话，否则会出现 stack 未定义的错误，哈哈哈，深有体会。 <strong>栈的定义</strong> 引入了栈之后，我们就可以直接来声明一个栈了</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">stack</span>&lt;Point&gt; pixelStack;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>其中，需要加一个尖括号，尖括号中声明了 Point 类型，这样我们就可以使用它了 <strong>取栈顶元素</strong> C++中取栈顶元素是很坑的，有一个top方法，还有一个pop方法。 其中top方法是只取得栈顶的元素而不移除它，pop方法是直接移除栈顶元素，没有返回值。 所以我们要想取出栈顶元素并移除的话，就要分别调用这两个方法</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//获取最顶端的元素</span></span><br><span class="line"><span class="built_in">Point</span> tempPoint=pixelStack.top();</span><br><span class="line"><span class="comment">//删除最顶端的元素</span></span><br><span class="line">pixelStack.pop();</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>是不是不友好？不友好的话，那就自己去定义一个新方法吧，我就先不这么干啦。 <strong>判断栈非空</strong> 判断当前的栈是否已经为空，只需要调用empty方法就可以了</p>
                  <figure class="highlight stylus">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="function"><span class="title">while</span><span class="params">(!pixelStack.empty()</span></span>)&#123;</span><br><span class="line"><span class="comment">//code</span></span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这里是一个while循环，如果栈为非空的话不断循环。 <strong>关于栈置空</strong> 教材中的种子填充算法中用到了栈置空，不过我感觉没有必要这么做，因为在方法最前面是新声明的栈变量，它一定是空的。不过如果非要置空的话，可以利用下面的代码</p>
                  <figure class="highlight gcode">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">while</span><span class="comment">(!pixelStack.empty()</span>)&#123;</span><br><span class="line">    pixelStack.pop<span class="comment">()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果栈不为空，就一直取元素，就可以把它置空啦。</p>
                  <h3 id="3-关于glColor3b和glColor3ub"><a href="#3-关于glColor3b和glColor3ub" class="headerlink" title="3.关于glColor3b和glColor3ub"></a>3.关于glColor3b和glColor3ub</h3>
                  <p>这的确也是坑得博主不浅，之前一直在用 glColor3b 这个方法来定义颜色，奇怪的是 glColor3b(255,0,0) 竟然不是红色，而是黑色！就是因为这个颜色问题，导致我在比对颜色的过程中走了很多弯路。在这里做一下说明 glColor3b()需要传入的是byte类型，它的数值范围是-128-127，也就是有符号数，我传入255，由于越界了，255这个数就相当于-128，难怪不变红啊。 glColor3ub()需要传入的是unsigned byte类型，范围是0-255，无符号数，那么在这里我们传入255,0,0这三个数，就变成红色了。</p>
                  <h3 id="4-取得某像素颜色"><a href="#4-取得某像素颜色" class="headerlink" title="4.取得某像素颜色"></a>4.取得某像素颜色</h3>
                  <p>我想说的是，这也是个深坑啊，一下午的Debug全归它身上了。 获取某个像素的这个函数是</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">void gl<span class="constructor">ReadPixels(GLint <span class="params">x</span>,GLint <span class="params">y</span>,GLsizesi <span class="params">width</span>,GLsizei <span class="params">height</span>,GLenum <span class="params">format</span>,GLenum <span class="params">type</span>,GLvoid <span class="operator">*</span><span class="params">pixel</span>)</span>;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>函数说明如下：</p>
                  <blockquote>
                    <p>该函数总共有七个参数。前四个参数可以得到一个矩形，该矩形所包括的像素都会被读取出来。（第一、二个参数表示了矩形的左下角横、纵坐标，坐标以窗口最左下角为零，最右上角为最大值；第三、四个参数表示了矩形的宽度和高度） 第五个参数表示读取的内容，例如：GL_RGB就会依次读取像素的红、绿、蓝三种数据，GL_RGBA则会依次读取像素的红、绿、蓝、alpha四种数据，GL_RED则只读取像素的红色数据（类似的还有GL_GREEN，GL_BLUE，以及GL_ALPHA）。如果采用的不是RGBA颜色模式，而是采用颜色索引模式，则也可以使用GL_COLOR_INDEX来读取像素的颜色索引。目前仅需要知道这些，但实际上还可以读取其它内容，例如深度缓冲区的深度数据等。 第六个参数表示读取的内容保存到内存时所使用的格式，例如：GL_UNSIGNED_BYTE会把各种数据保存为GLubyte，GL_FLOAT会把各种数据保存为GLfloat等。 第七个参数表示一个指针，像素数据被读取后，将被保存到这个指针所表示的地址。注意，需要保证该地址有足够的可以使用的空间，以容纳读取的像素数据。例如一幅大小为256*256的图象，如果读取其RGB数据，且每一数据被保存为GLubyte。</p>
                  </blockquote>
                  <p>好了，那么重点来了，这个方法的坐标基准点是在画布的左下角！！而我们绘图的基准点是在画布的正中心！！所以我在获取某个点的颜色的时候一直都是错误的结果，这样的话在使用的时候我们的xy坐标值就要加上画布宽高的一半才能正常获取到像素的颜色，希望大家一定注意！！ 那么我们如何来使用呢？实例如下，首先定义GLByte的数组</p>
                  <figure class="highlight abnf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">GLubyte iPixel[<span class="number">3</span>]<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>另外还有画布的宽度高度的一半变量</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">int</span> halfWidth,halfHeight;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>我们可以调用如下的方法来获取(x,y)这个点像素的值</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfHeight</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里第五个参数我们定义了 GL_RGB，第六个参数我们定义了 GL_UNSIGNED_BYTE，最后是传入了数组的引用。 所以在调用这个方法之后，iPixel数组里面的三个值就已经赋值为了该点的RGB值，可以拿来做下一步的判断。 比如我们边界可以定义为</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">GLubyte oldColor[<span class="number">3</span>]=&#123;<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>&#125;;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在比较的时候就可以用下面的判别式</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">iPixel[<span class="number">0</span>]!=borderColor[<span class="number">0</span>]&amp;&amp;iPixel[<span class="number">1</span>]!=borderColor[<span class="number">1</span>]&amp;&amp;iPixel[<span class="number">2</span>]!=borderColor[<span class="number">2</span>]</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这里我们是依次比较了三个RGB值是否与边界的RGB值相等，不过，有意思的是，识别颜色的这个方法，黑色的RGB值会识别成1,1,1，而有时候在我调试的时候会识别为0,1,1。我在想是不是系统计算误差问题，如果真是的话，因为这个小小的误差就影响了我们的判别条件岂不是亏大了？那么在这里我就定义了一个方法，允许一定的误差，这个误差姑且就称为PS里面的容差吧。</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//传入两个颜色的RGB值，比较是否相同，容差为dis</span></span><br><span class="line"><span class="built_in">bool</span> same<span class="constructor">Color(<span class="params">int</span> <span class="params">r1</span>,<span class="params">int</span> <span class="params">g1</span>,<span class="params">int</span> <span class="params">b1</span>,<span class="params">int</span> <span class="params">r2</span>,<span class="params">int</span> <span class="params">g2</span>,<span class="params">int</span> <span class="params">b2</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//容差度</span></span><br><span class="line">	<span class="built_in">int</span> dis = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">if</span>(abs(r1-r2)&lt;=dis&amp;&amp;abs(g1-g2)&lt;=dis&amp;&amp;abs(b1-b2)&lt;=dis)&#123;</span><br><span class="line">		return <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		return <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>那么我们的判定条件就改为了</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">borderColor</span>[0],<span class="params">borderColor</span>[1],<span class="params">borderColor</span>[2])</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这样系统误差便不会影响了。</p>
                  <h3 id="5-下一个种子点的选取"><a href="#5-下一个种子点的选取" class="headerlink" title="5.下一个种子点的选取"></a>5.下一个种子点的选取</h3>
                  <p>教材上的种子点选取算法有点搞不懂，我按照上面的思路实现出来，在填充的时候出现了一系列问题。后来干脆放弃了教材中的方法，自己改写了一下。 思路大体上是这样的。</p>
                  <blockquote>
                    <p>在填充完一行后，这一行最左边的像素点我们定义为(xLeft,y)，最右边的像素我们定义为(xRight,y)，扫描上一行找寻下一个种子点，这里y就要增加1，如果(xRight,y+1)这个点不是边界不是已经填充的点，那么这个点就可以作为种子点压入堆栈。如果这个点是边界或者是已经填充的点，那么就继续往左搜索，如果找到既不是边界又未填充的点，那么这个点就是种子点，压入堆栈。如果一直往左找到xLeft还是没有找到的话，就不存在下一个种子点了。下一行扫描线也是同样的原理，y要在这个基础上减去2即可。</p>
                  </blockquote>
                  <p>恩，不知道大家有没有看懂，这是我自己想出来的方法，<strong>不敢保证完全正确，在此仅供参考</strong>。 如果大家真的可以按照教材中的方法实现成功的话，希望告诉我一下，感激不尽。</p>
                  <h2 id="方法实现"><a href="#方法实现" class="headerlink" title="方法实现"></a>方法实现</h2>
                  <p>恩，重要的地方都已经点明了，下面就直接附上我的种子填充算法吧！</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//种子填充算法</span></span><br><span class="line">void zz<span class="constructor">Fill(<span class="params">int</span> <span class="params">startX</span>,<span class="params">int</span> <span class="params">startY</span>,<span class="params">int</span> <span class="params">r</span>,<span class="params">int</span> <span class="params">g</span>,<span class="params">int</span> <span class="params">b</span>)</span>&#123;</span><br><span class="line">	stack&lt;Point&gt; pixelStack;</span><br><span class="line">	<span class="comment">//x,y是给定的种子像素点，rgb就是要填充的颜色的RGB值</span></span><br><span class="line">	Point point  = &#123;startX,startY&#125;;</span><br><span class="line">	pixelStack.push(point);</span><br><span class="line">	<span class="built_in">int</span> saveX;</span><br><span class="line">	<span class="built_in">int</span> xRight,xLeft;</span><br><span class="line">	<span class="built_in">int</span> x,y;</span><br><span class="line">	<span class="comment">//如果栈不为空</span></span><br><span class="line">	<span class="keyword">while</span>(!pixelStack.empty<span class="literal">()</span>)&#123;</span><br><span class="line">		<span class="comment">//获取最顶端的元素</span></span><br><span class="line">		Point tempPoint=pixelStack.top<span class="literal">()</span>;</span><br><span class="line">		<span class="comment">//删除最顶端的元素</span></span><br><span class="line">		pixelStack.pop<span class="literal">()</span>;</span><br><span class="line">		saveX=tempPoint.x;</span><br><span class="line">		x=tempPoint.x;</span><br><span class="line">		y=tempPoint.y;</span><br><span class="line">		gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfHeight</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">		<span class="comment">//如果没有到达右边界，就填充</span></span><br><span class="line">		<span class="keyword">while</span>(!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">borderColor</span>[0],<span class="params">borderColor</span>[1],<span class="params">borderColor</span>[2])</span>)&#123;</span><br><span class="line">			gl<span class="constructor">Point(<span class="params">x</span>,<span class="params">y</span>,<span class="params">r</span>,<span class="params">g</span>,<span class="params">b</span>)</span>;</span><br><span class="line">			x=x+<span class="number">1</span>;</span><br><span class="line">			gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfHeight</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		xRight=x-<span class="number">1</span>;</span><br><span class="line">		x=saveX-<span class="number">1</span>;</span><br><span class="line">		gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">		<span class="comment">//如果没有到达左边界，就填充</span></span><br><span class="line">		<span class="keyword">while</span>(!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">borderColor</span>[0],<span class="params">borderColor</span>[1],<span class="params">borderColor</span>[2])</span>)&#123;</span><br><span class="line">			gl<span class="constructor">Point(<span class="params">x</span>,<span class="params">y</span>,<span class="params">r</span>,<span class="params">g</span>,<span class="params">b</span>)</span>;</span><br><span class="line">			x=x-<span class="number">1</span>;</span><br><span class="line">			gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//保存左端点</span></span><br><span class="line">		xLeft=x+<span class="number">1</span>;</span><br><span class="line">		<span class="comment">//从右边的点开始</span></span><br><span class="line">		x=xRight;</span><br><span class="line">		<span class="comment">//检查上端的扫描线</span></span><br><span class="line">		y=y+<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(x&gt;=xLeft)&#123;</span><br><span class="line">			gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">			<span class="keyword">if</span>(!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">borderColor</span>[0],<span class="params">borderColor</span>[1],<span class="params">borderColor</span>[2])</span>&amp;&amp;!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">r</span>,<span class="params">g</span>,<span class="params">b</span>)</span>)&#123;</span><br><span class="line">				<span class="comment">//如果上方的点不是边界点，直接压入</span></span><br><span class="line">				Point p=&#123;x,y&#125;;</span><br><span class="line">				pixelStack.push(p);</span><br><span class="line">				<span class="comment">//压入之后停止循环</span></span><br><span class="line">				break;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				x--;</span><br><span class="line">				gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//检查下端的扫描线</span></span><br><span class="line">		y=y-<span class="number">2</span>;</span><br><span class="line">		<span class="comment">//从右边的点开始</span></span><br><span class="line">		x=xRight;</span><br><span class="line">		<span class="keyword">while</span>(x&gt;=xLeft)&#123;</span><br><span class="line">			gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">			<span class="keyword">if</span>(!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">borderColor</span>[0],<span class="params">borderColor</span>[1],<span class="params">borderColor</span>[2])</span>&amp;&amp;!same<span class="constructor">Color(<span class="params">iPixel</span>[0],<span class="params">iPixel</span>[1],<span class="params">iPixel</span>[2],<span class="params">r</span>,<span class="params">g</span>,<span class="params">b</span>)</span>)&#123;</span><br><span class="line">				<span class="comment">//如果上方的点不是边界点，直接压入</span></span><br><span class="line">				Point p=&#123;x,y&#125;;</span><br><span class="line">				<span class="comment">//压入之后停止循环</span></span><br><span class="line">				pixelStack.push(p);</span><br><span class="line">				break;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				x--;</span><br><span class="line">				gl<span class="constructor">ReadPixels(<span class="params">x</span>+<span class="params">halfWidth</span>,<span class="params">y</span>+<span class="params">halfWidth</span>,1,1,GL_RGB,GL_UNSIGNED_BYTE,&amp;<span class="params">iPixel</span>)</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是我实现的种子填充算法，仅供参考 在这里我们用到了glPoint画点的方法，这是我们定义的，方法如下，为了便于调试，每画一个点刷新一下，这样我们就可以看到绘制的全部动态效果。</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画点</span></span><br><span class="line">void gl<span class="constructor">Point(<span class="params">int</span> <span class="params">x</span>,<span class="params">int</span> <span class="params">y</span>,<span class="params">int</span> <span class="params">r</span>,<span class="params">int</span> <span class="params">g</span>,<span class="params">int</span> <span class="params">b</span>)</span>&#123;</span><br><span class="line">	glColor3ub (r,g,b);  </span><br><span class="line">	gl<span class="constructor">PointSize(1)</span>;</span><br><span class="line">	gl<span class="constructor">Begin(GL_POINTS)</span>;</span><br><span class="line">	gl<span class="constructor">Vertex2i(<span class="params">x</span>,<span class="params">y</span>)</span>;</span><br><span class="line">	gl<span class="constructor">End()</span>;</span><br><span class="line">	gl<span class="constructor">Flush()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是画点的函数</p>
                  <h2 id="方法使用"><a href="#方法使用" class="headerlink" title="方法使用"></a>方法使用</h2>
                  <p>种子填充算法肯定要在我们绘制完机器人之后使用，任意选取某个四连通区域的点，传入xy坐标值还有要填充的颜色的RGB值，就可以成功实现填充。 在上一篇机器人的基础上，我们在画机器人的方法最后加入下面的代码，即可实现填充。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//灰色:195,195,195</span></span><br><span class="line"><span class="comment">//黄色:255,243,0</span></span><br><span class="line"><span class="comment">//红色:237,28,36</span></span><br><span class="line"><span class="comment">//深灰色:126,126,126</span></span><br><span class="line"><span class="comment">//脖子</span></span><br><span class="line">zzFill(<span class="number">0</span>,<span class="number">70</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//头</span></span><br><span class="line">zzFill(<span class="number">-50</span>,<span class="number">110</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line">zzFill(<span class="number">0</span>,<span class="number">93</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//肚子</span></span><br><span class="line">zzFill(<span class="number">-50</span>,<span class="number">0</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//耳朵</span></span><br><span class="line">zzFill(<span class="number">-80</span>,<span class="number">115</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">zzFill(<span class="number">80</span>,<span class="number">115</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line"><span class="comment">//肚子三角</span></span><br><span class="line">zzFill(<span class="number">-20</span>,<span class="number">-10</span>,<span class="number">255</span>,<span class="number">243</span>,<span class="number">0</span>);</span><br><span class="line"><span class="comment">//肚子红色圆</span></span><br><span class="line">zzFill(<span class="number">0</span>,<span class="number">0</span>,<span class="number">237</span>,<span class="number">28</span>,<span class="number">36</span>);</span><br><span class="line"><span class="comment">//zzFill(-50,0,128,255,33);</span></span><br><span class="line"><span class="comment">//大臂</span></span><br><span class="line">zzFill(<span class="number">-90</span>,<span class="number">30</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">zzFill(<span class="number">90</span>,<span class="number">30</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line"><span class="comment">//小臂</span></span><br><span class="line">zzFill(<span class="number">-90</span>,<span class="number">-20</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">zzFill(<span class="number">90</span>,<span class="number">-20</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line"><span class="comment">//手</span></span><br><span class="line">zzFill(<span class="number">-75</span>,<span class="number">40</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line">zzFill(<span class="number">75</span>,<span class="number">40</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//手</span></span><br><span class="line">zzFill(<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line">zzFill(<span class="number">95</span>,<span class="number">-47</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//大腿连接处</span></span><br><span class="line">zzFill(<span class="number">-40</span>,<span class="number">-64</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line">zzFill(<span class="number">40</span>,<span class="number">-64</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//大腿</span></span><br><span class="line">zzFill(<span class="number">-40</span>,<span class="number">-100</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">zzFill(<span class="number">40</span>,<span class="number">-100</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line"><span class="comment">//脚踝</span></span><br><span class="line">zzFill(<span class="number">-40</span>,<span class="number">-121</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line">zzFill(<span class="number">40</span>,<span class="number">-121</span>,<span class="number">195</span>,<span class="number">195</span>,<span class="number">195</span>);</span><br><span class="line"><span class="comment">//脚掌</span></span><br><span class="line">zzFill(<span class="number">-40</span>,<span class="number">-130</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">zzFill(<span class="number">40</span>,<span class="number">-130</span>,<span class="number">126</span>,<span class="number">126</span>,<span class="number">126</span>);</span><br><span class="line">system(<span class="string">"pause"</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>注意，有个很奇怪地方是绘制完了之后机器人就不见了，所以在这里加入了system(“pause”)方法来暂停一下就好啦。 其他的代码基本都是上一篇中的了，大家自行整理。</p>
                  <h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2>
                  <p>运行结果截图如下 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150419015002.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150419015002.jpg" alt="20150419015002"></a> 恩，就是这样！</p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>以上便是博主利用种子填充算法来实现的机器人的颜色填充，在此分享给大家，希望对大家有帮助！ 如有问题和错误，欢迎大家给予我批评和指正，谢谢！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-19 02:00:00" itemprop="dateCreated datePublished" datetime="2015-04-19T02:00:00+08:00">2015-04-19</time>
                </span>
                <span id="/1640.html" class="post-meta-item leancloud_visitors" data-flag-title="OpenGL绘图实例三之种子填充算法" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>7.4k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>7 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1622.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> 福利专区 <i class="label-arrow"></i>
                  </a>
                  <a href="/1622.html" class="post-title-link" itemprop="url">福利！还在用控制面板来隐藏文件夹？来试试这个吧！</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>小伙伴们总要有一些秘密是不能让别人知道的，之前我们使用的设置隐藏文件夹然后在控制面板设置不显示隐藏文件夹的方式都弱爆了，下面我们来用一种更高级的办法来设置隐藏文件夹，感受一下。</p>
                  <h2 id="设置隐藏"><a href="#设置隐藏" class="headerlink" title="设置隐藏"></a>设置隐藏</h2>
                  <p>首先我们创建一个文件夹，比如名字叫 SECRET，如图所示 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415114405.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415114405.jpg" alt="20150415114405"></a> 接下来我们打开命令行，输入如下命令</p>
                  <figure class="highlight dos">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">attrib</span> +s +h e:/SECRET</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415114811.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415114811.jpg" alt="20150415114811"></a> 输入命令之后，我们再查看一下E盘的内容，<strong>刷新一下，记得刷新！</strong>。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120601.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120601.jpg" alt="20150415120601"></a> 恩，那个文件夹已经不见了，有人说设置一下控制面板就显示出来了。 好，我们试试，控制面板<strong>设置显示隐藏的文件夹</strong> <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120426.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120426.jpg" alt="20150415120426"></a> 恩，我们再看看，它依然是找不到的，就是这样！ <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120601.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415120601.jpg" alt="20150415120601"></a> 那么我们怎么找到它？很简单，访问的时候只要在输入文件夹名称就会找到它了。 比如，我在地址栏中输入 E:/SECRET，就可以找到它了 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415115101.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415115101-e1429070400267.jpg" alt="20150415115101"></a> 下面我们来介绍一下这个命令的用法</p>
                  <blockquote>
                    <p>attrib命令用来显示或更改文件属性。</p>
                    <p>ATTRIB [+R | -R] [+A | -A ] [+S | -S] [+H | -H] [[drive:] [path] filename] [/S [/D]] + 设置属性。 - 清除属性。 R 只读文件属性。 A 存档文件属性。 S 系统文件属性。 H 隐藏文件属性。 [drive:][path][filename] 指定要处理的文件属性。 /S 处理当前文件夹及其子文件夹中的匹配文件。 /D 也处理文件夹。</p>
                  </blockquote>
                  <p>比如</p>
                  <figure class="highlight dos">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">attrib</span> +a +s +r +h e:/SECRET</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这句命令就是设置E盘的SECRET文件夹为存档文件、系统文件、只读文件、隐藏文件。</p>
                  <p>在这里我们只要设置为隐藏文件盒系统文件属性就可以完成文件夹的隐藏，是不是很酷炫？</p>
                  <h2 id="取消隐藏"><a href="#取消隐藏" class="headerlink" title="取消隐藏"></a>取消隐藏</h2>
                  <p>了解了上面的命令，取消隐藏就很简单啦，我们只需要输入下面的命令</p>
                  <figure class="highlight dos">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="built_in">attrib</span> -h -s e:/SECRET</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>再刷新一下目录，SECRET目录就又出现了。</p>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415115831.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150415115831.jpg" alt="20150415115831"></a></p>
                  <p>恩，会了吧，小伙伴们还不赶紧试试。不用谢我，请叫我雷锋！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-15 12:01:37" itemprop="dateCreated datePublished" datetime="2015-04-15T12:01:37+08:00">2015-04-15</time>
                </span>
                <span id="/1622.html" class="post-meta-item leancloud_visitors" data-flag-title="福利！还在用控制面板来隐藏文件夹？来试试这个吧！" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>752</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>1 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1613.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> C/C++ <i class="label-arrow"></i>
                  </a>
                  <a href="/1613.html" class="post-title-link" itemprop="url">OpenGL绘图实例二之直线和圆弧的绘制</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>在上一篇文章我们介绍了利用类库来完成一个机器人绘制的过程，这里我们一起来看一下怎样直接利用直线和圆弧生成算法来进行图形的绘制。 <strong>P.S. 本篇文章针对《计算机图形学》张彩明 版来探讨学习。关于书中的详细算法不会再赘述。</strong> <strong>P.P.S. 本篇文章算法扩展思路及代码实现为博主原创内容，如存在纰漏和错误，希望大家指正。</strong></p>
                  <h2 id="直线生成算法"><a href="#直线生成算法" class="headerlink" title="直线生成算法"></a>直线生成算法</h2>
                  <h3 id="1-DDA算法"><a href="#1-DDA算法" class="headerlink" title="1.DDA算法"></a>1.DDA算法</h3>
                  <p>DDA算法是最基本的一种直线生成算法了，代码实现简单，不过缺点是计算量比较大，画一个点要两次加法，两次取整运算。另外，DDA算法还包括了除法运算。不仅算法复杂，而且硬件实现上有一定的难度。优点就是程序简单易懂，在这里实现如下</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画直线的DDA算法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dda</span><span class="params">(<span class="keyword">int</span> x1,<span class="keyword">int</span> y1,<span class="keyword">int</span> x2,<span class="keyword">int</span> y2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> k,i;</span><br><span class="line">	<span class="keyword">float</span> x,y,dx,dy;</span><br><span class="line">	<span class="comment">//使k等于横纵坐标差值的较大者</span></span><br><span class="line">	k = <span class="built_in">abs</span>(x2-x1);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">abs</span>(y2-y1)&gt;k)</span><br><span class="line">		k = <span class="built_in">abs</span>(y2-y1);</span><br><span class="line">	<span class="comment">//直线被划分为每一小段的长度</span></span><br><span class="line">	dx = <span class="keyword">float</span>(x2-x1)/k;</span><br><span class="line">	dy = <span class="keyword">float</span>(y2-y1)/k;</span><br><span class="line">	x = <span class="keyword">float</span>(x1);</span><br><span class="line">	y = <span class="keyword">float</span>(y1);</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>;i&lt;k;i++)&#123;</span><br><span class="line">		<span class="comment">//此处先加0.5再取整的作用是四舍五入</span></span><br><span class="line">		gl_Point((<span class="keyword">int</span>)(x+<span class="number">0.5</span>),(<span class="keyword">int</span>)(y+<span class="number">0.5</span>));</span><br><span class="line">		<span class="comment">//x和y分别增加相应的单位</span></span><br><span class="line">		x = x+dx;</span><br><span class="line">		y = y+dy;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>解释一下这里的gl_Point方法，这个方法并不是直接调用类库的方法，而是我们自己来实现的画点的方法。</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画点</span></span><br><span class="line">void gl<span class="constructor">_Point(<span class="params">int</span> <span class="params">x</span>,<span class="params">int</span> <span class="params">y</span>)</span>&#123;</span><br><span class="line">	gl<span class="constructor">Begin(GL_POINTS)</span>;</span><br><span class="line">	gl<span class="constructor">Vertex2i(<span class="params">x</span>,<span class="params">y</span>)</span>;</span><br><span class="line">	gl<span class="constructor">End()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>用来画点的话，我们必须要在glBegin方法传入GL_POINTS参数，然后利用类库中画点的方法来绘制点。</p>
                  <h3 id="2-正负法"><a href="#2-正负法" class="headerlink" title="2.正负法"></a>2.正负法</h3>
                  <p>在教材中只讨论了斜率在0-1之间的情况，代码的实现也是仅仅只有0-1一种情况，对于斜率大于1，斜率在-1和0之间以及斜率小于-1的情况没有加以讨论。 如果我们直接拿来教材中的代码来用，我们会发现只能绘制出0-1斜率的直线，对于其他的情况，均绘制错误。 所以我们需要分四种情况来讨论，直线方程 F(x,y)=ax+by+c=0，其中 a=ys-ye，b=xe-xs 设直线的斜率为k，讨论分类如下 <strong>（1）k∈[0,1)</strong> 此时有 a<0，b>0 d=F(M)=F(x+1,y+0.5)=a(x+1)+b(y+0.5)+c 当d&gt;=0时，Q在M点下方，取右下方的点，d1=F(x+2,y+0.5)=a(x+2)+b(y+0.5)+c=d+a 当d<0时，Q在M点上方，取右上方的点，d2=F(x+2,y+1.5)=a(x+2)+b(y+1.5)+c=d+a+b 此时d的初始值 d0=F(xs+1,ys+0.5)=a+0.5b **（2）k∈[1,+∞]** 此时有 a<0，b>0 d=F(M)=F(x+0.5,y+1)=a(x+0.5)+b(y+1)+c 当d&gt;=0时，Q在M点右侧，取右上方的点，d1=F(x+1.5,y+2)=a(x+1.5)+b(y+2)+c=a+b+d 当d<0时，Q在M点左侧，取左上方的点，d2=F(x+0.5,y+2)=b+d 此时d的初始值 d0=F(xs+0.5,ys+1)=0.5a+b **（3）k∈[-1,0)** 此时有 a>0，b&gt;0 d=F(M)=F(x+1,y-0.5)=a(x+1)+b(y-0.5)+c 当d&gt;=0时，Q在M点下方，取右下方的点，d1=F(x+2,y-1.5)=a(x+2)+b(y-1.5)+c=a-b+d 当d<0时，Q在M点上方，取右上方的点，d2=F(x+2,y-0.5)=a(x+2)+b(y-0.5)+c=a+d 此时d的初始值 d0=F(xs+1,ys-0.5)=a-0.5b **（4）k∈[-∞,-1)** 此时有 a>0，b&gt;0 d=F(M)=F(x+0.5,y-1)=a(x+0.5)+b(y-1)+c 当d&gt;=0时，Q在M点左方，取左下方的点，d1=F(x+0.5,y-2)=a(x+0.5)+b(y-2)+c=d-b 当d&lt;0时，Q在M点右方，取右下方的点，d2=F(x+1.5,y-2)=a(x+1.5)+b(y-2)+c=a-b+d 此时d的初始值 d0=F(xs+0.5,ys-1)=0.5a-b <strong>注意：上面的a和b的符号，是在默认起点在终点的左侧来看待的</strong> 所以，如果我们传入参数时，第二个点在第一个点的左侧时，我们可能就不会得到正确的结果。所以当我们发现第二个点不在第一个点右侧时，就需要把二者的横纵坐标交换。 代码实现如下，此实现<strong>仅供参考</strong>，未经优化。</p>
                  <figure class="highlight sas">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">//画直线的正负法</span><br><span class="line">void midPointLine(int xs,int ys,int xe,int ye)&#123;</span><br><span class="line">	<span class="meta">if</span>(xs&gt;xe)&#123;</span><br><span class="line">		swap(xs,xe);</span><br><span class="line">		swap(ys,ye);</span><br><span class="line">	&#125;</span><br><span class="line">	float a,b,dt1,dt2,d,<span class="meta">x</span>,y;</span><br><span class="line">	a=ys-ye;</span><br><span class="line">	b=xe-xs;</span><br><span class="line">	float k =(float)(ye-ys)/(xe-xs);</span><br><span class="line">	<span class="meta">if</span>(k&gt;=0<span class="variable">&amp;&amp;k</span>&lt;1)&#123;</span><br><span class="line">		d=2<span class="comment">*a+b;</span></span><br><span class="line">		dt1=2<span class="comment">*a;</span></span><br><span class="line">		dt2=2<span class="comment">*(a+b);</span></span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&gt;=1)&#123;</span><br><span class="line">		d=a+2<span class="comment">*b;</span></span><br><span class="line">		dt1=2<span class="comment">*(a+b);</span></span><br><span class="line">		dt2=2<span class="comment">*b;</span></span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&lt;0<span class="variable">&amp;&amp;k</span>&gt;=-1)&#123;</span><br><span class="line">		d=2<span class="comment">*a-b;</span></span><br><span class="line">		dt1=2<span class="comment">*(a-b);</span></span><br><span class="line">		dt2=2<span class="comment">*a;</span></span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&lt;-1)&#123;</span><br><span class="line">		d=a-2<span class="comment">*b;</span></span><br><span class="line">		dt1=-2<span class="comment">*b;</span></span><br><span class="line">		dt2=2<span class="comment">*(a-b);</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">x</span>=xs;y=ys;</span><br><span class="line">	gl<span class="meta">_Point(</span><span class="meta">x</span>,y);</span><br><span class="line">	<span class="meta">if</span>(k&gt;=0<span class="variable">&amp;&amp;k</span>&lt;1)&#123;</span><br><span class="line">		<span class="meta">while</span>(<span class="meta">x</span>&lt;xe)&#123;</span><br><span class="line">			<span class="meta">if</span>(d&lt;0)&#123;</span><br><span class="line">				<span class="meta">x</span>++;y++;d+=dt2;</span><br><span class="line">			&#125;<span class="meta">else</span>&#123;</span><br><span class="line">				<span class="meta">x</span>++;d+=dt1;</span><br><span class="line">			&#125;</span><br><span class="line">			gl<span class="meta">_Point(</span><span class="meta">x</span>,y);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&gt;=1)&#123;</span><br><span class="line">		<span class="meta">while</span>(y&lt;ye)&#123;</span><br><span class="line">			<span class="meta">if</span>(d&lt;0)&#123;</span><br><span class="line">				y++;d+=dt2;</span><br><span class="line">			&#125;<span class="meta">else</span>&#123;</span><br><span class="line">				y++;<span class="meta">x</span>++;d+=dt1;</span><br><span class="line">			&#125;</span><br><span class="line">			gl<span class="meta">_Point(</span><span class="meta">x</span>,y);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&lt;0<span class="variable">&amp;&amp;k</span>&gt;=-1)&#123;</span><br><span class="line">		<span class="meta">while</span>(<span class="meta">x</span>&lt;xe)&#123;</span><br><span class="line">			<span class="meta">if</span>(d&lt;0)&#123;</span><br><span class="line">				<span class="meta">x</span>++;d+=dt2;</span><br><span class="line">			&#125;<span class="meta">else</span>&#123;</span><br><span class="line">				<span class="meta">x</span>++;y--;d+=dt1;</span><br><span class="line">			&#125;</span><br><span class="line">			gl<span class="meta">_Point(</span><span class="meta">x</span>,y);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="meta">else</span> <span class="meta">if</span>(k&lt;-1)&#123;</span><br><span class="line">		<span class="meta">while</span>(y&gt;ye)&#123;</span><br><span class="line">			<span class="meta">if</span>(d&lt;0)&#123;</span><br><span class="line">				y--;<span class="meta">x</span>++;d+=dt2;</span><br><span class="line">			&#125;<span class="meta">else</span>&#123;</span><br><span class="line">				y--;d+=dt1;</span><br><span class="line">			&#125;</span><br><span class="line">			gl<span class="meta">_Point(</span><span class="meta">x</span>,y);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在一开始我们用到了swap方法，是用来交换两个数字的，实现如下</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//交换两个数字</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;x1,<span class="keyword">int</span> &amp;x2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp = x2;</span><br><span class="line">	x2=x1;</span><br><span class="line">	x1=temp;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是正负法的实现，代码仅供参考。</p>
                  <h3 id="3-Bresenham算法"><a href="#3-Bresenham算法" class="headerlink" title="3.Bresenham算法"></a>3.Bresenham算法</h3>
                  <p>在教材中，同样是只针对斜率在0-1之间讨论。对于教材中的程序，我们也只能绘制斜率为0-1的直线，所以我们需要对另外三种情况进行扩充。 分类讨论如下 <strong>（1）k∈[0,1)</strong> 即教材中的讲解方法 <strong>（2）k∈[1,+∞]</strong> 需要把x和y互换即可 <strong>（3）k∈[-1,0)</strong> x不变，y换为-y <strong>（4）k∈[-∞,-1)</strong> x换为-y，y换为x 程序实现如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画直线的Bresenham方法</span></span><br><span class="line"><span class="built_in">void</span> bresen(<span class="built_in">int</span> x1,<span class="built_in">int</span> y1,<span class="built_in">int</span> x2,<span class="built_in">int</span> y2)&#123;</span><br><span class="line">	<span class="keyword">if</span>(x2&lt;x1)&#123;</span><br><span class="line">		swap(x1,x2);</span><br><span class="line">		swap(y1,y2);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">float</span> dx=x2-x1;</span><br><span class="line">	<span class="built_in">float</span> dy=y2-y1;</span><br><span class="line">	<span class="built_in">float</span> k=dy/dx;</span><br><span class="line">	<span class="built_in">float</span> m,e;<span class="built_in">int</span> i;</span><br><span class="line">	<span class="built_in">float</span> x=x1,y=y1;</span><br><span class="line">	<span class="keyword">if</span>(k&gt;=<span class="number">0</span>&amp;&amp;k&lt;<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="comment">//斜率为0到1</span></span><br><span class="line">		m=dy/dx;</span><br><span class="line">		e=m<span class="number">-0.5</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;dx;i++)&#123;</span><br><span class="line">			gl_Point(x,y);</span><br><span class="line">			<span class="keyword">if</span>(e&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">				y+=<span class="number">1</span>;e-=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			x+=<span class="number">1</span>;e+=m;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(k&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="comment">//x换为y,y换为x</span></span><br><span class="line">		m=dx/dy;</span><br><span class="line">		e=m<span class="number">-0.5</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;dy;i++)&#123;</span><br><span class="line">			gl_Point(x,y);</span><br><span class="line">			<span class="keyword">if</span>(e&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">				x+=<span class="number">1</span>;e-=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			y+=<span class="number">1</span>;e+=m;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(k&lt;<span class="number">0</span>&amp;&amp;k&gt;=<span class="number">-1</span>)&#123;</span><br><span class="line">		<span class="comment">//x不变，y换为-y</span></span><br><span class="line">		m=-dy/dx;</span><br><span class="line">		e=m+<span class="number">0.5</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;dx;i++)&#123;</span><br><span class="line">			gl_Point(x,y);</span><br><span class="line">			<span class="keyword">if</span>(e&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">				y-=<span class="number">1</span>;e+=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			x+=<span class="number">1</span>;e-=m;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="comment">//将x换为-y,y换为x</span></span><br><span class="line">		m=-dx/dy;</span><br><span class="line">		e=m+<span class="number">0.5</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;-dy;i++)&#123;</span><br><span class="line">			gl_Point(x,y);</span><br><span class="line">			<span class="keyword">if</span>(e&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">				x+=<span class="number">1</span>;e+=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			y-=<span class="number">1</span>;e-=m;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是Bresenham算法，经测试通过。</p>
                  <h2 id="圆弧生成算法"><a href="#圆弧生成算法" class="headerlink" title="圆弧生成算法"></a>圆弧生成算法</h2>
                  <h3 id="1-正负法"><a href="#1-正负法" class="headerlink" title="1.正负法"></a>1.正负法</h3>
                  <p>教材中只讨论了圆弧在第一象限的情况，不过有趣的是，圆是具有对称性的，在绘制圆形时，我们如果把x换为-x，就可以绘制第二象限的图形，把y换为-y，就可以绘制第四象限的图形，代码也不需要改动很多。只需要在gl_Point上面下功夫即可。 另外，教材中圆弧生成算法中没有指定圆的中心点的坐标，我们可以把它当做参数来传递进来，然后传入gl_Point绘图函数即可，相当方便。 注：此方法不需要再繁琐地分类讨论。 在这里给出博主写出的两种方法，一种是如上所介绍的思路，利用对称性，另一种是分类讨论的思想。 <strong>（1）利用对称性实现</strong></p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//正负法画圆</span></span><br><span class="line">void pnarc<span class="constructor">Arc(<span class="params">int</span> <span class="params">radius</span>,<span class="params">int</span> <span class="params">centerX</span>,<span class="params">int</span> <span class="params">centerY</span>,<span class="params">int</span> <span class="params">area</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">int</span> x,y,f;</span><br><span class="line">	x=<span class="number">0</span>;y=<span class="number">0</span>+radius;f=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(y&gt;<span class="number">0</span>)&#123;</span><br><span class="line">		switch(area)&#123;</span><br><span class="line">		case <span class="number">1</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">x</span>+<span class="params">centerX</span>,<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">2</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">x</span>+<span class="params">centerX</span>,<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">3</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">x</span>+<span class="params">centerX</span>,-<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">4</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">x</span>+<span class="params">centerX</span>,-<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(f&gt;<span class="number">0</span>)&#123;</span><br><span class="line">			f=f-<span class="number">2</span>*y+<span class="number">1</span>;</span><br><span class="line">			y=y-<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			f=f+<span class="number">2</span>*x+<span class="number">1</span>;</span><br><span class="line">			x=x+<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(y==centerY)&#123;</span><br><span class="line">		gl<span class="constructor">_Point(<span class="params">x</span>,<span class="params">y</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p> <strong>（2）分类讨论思想</strong></p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//正负法画圆3</span></span><br><span class="line"><span class="built_in">void</span> pnarcArc(<span class="built_in">int</span> radius,<span class="built_in">int</span> centerX,<span class="built_in">int</span> centerY,<span class="built_in">int</span> area)&#123;</span><br><span class="line">	<span class="built_in">int</span> x,y,f;</span><br><span class="line">	<span class="built_in">int</span> tag[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">	<span class="built_in">int</span> tagX[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">	<span class="built_in">int</span> tagY[<span class="number">4</span>]=&#123;<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">	x=<span class="number">0</span>;y=tag[area<span class="number">-1</span>]*radius;f=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(tag[area<span class="number">-1</span>]*y&gt;<span class="number">0</span>)&#123;</span><br><span class="line">		gl_Point(x+centerX,y+centerY);</span><br><span class="line">		<span class="keyword">if</span>(f&gt;<span class="number">0</span>)&#123;</span><br><span class="line">			f=f+tagY[area<span class="number">-1</span>]*<span class="number">2</span>*y+<span class="number">1</span>;</span><br><span class="line">			y=y+tagY[area<span class="number">-1</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			f=f+tagX[area<span class="number">-1</span>]*<span class="number">2</span>*x+<span class="number">1</span>;</span><br><span class="line">			x=x+tagX[area<span class="number">-1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(y==centerY)&#123;</span><br><span class="line">		gl_Point(x,y);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在上面的代码中，我们传入了centerX和centerY以及area参数。其中centerX和centerY是圆弧中心点的坐标，area是所在的<strong>象限</strong>，传入的参数需要是1,2,3,4中的一个数字，如果传入其他数字则不会绘制出任何图形。 注：此方法只能一次性绘制一个四分之一圆弧，局限性比较大，如果要融入弧度，改动量比较大。</p>
                  <h3 id="2-Bresenham算法"><a href="#2-Bresenham算法" class="headerlink" title="2.Bresenham算法"></a>2.Bresenham算法</h3>
                  <p>和上面方法类似，我们的实现同样非常简单，即使教材中只讨论了八分之一圆，我们可以利用对称的思想来实现画圆。另外我们添加了圆弧中心点坐标已经所在的区块。 从（π/4,π/2）这个区块开始，编号为1，角度为45°，顺时针旋转（0,π/4）的编号为2，以此类推，参数变量为area 代码实现如下</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//Bresenham画圆算法</span></span><br><span class="line">void bresenham<span class="constructor">Arc(<span class="params">int</span> R,<span class="params">int</span> <span class="params">centerX</span>,<span class="params">int</span> <span class="params">centerY</span>,<span class="params">int</span> <span class="params">area</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">int</span> x,y,d;</span><br><span class="line">	x=<span class="number">0</span>;y=R;d=<span class="number">3</span>-<span class="number">2</span>*R;</span><br><span class="line">	<span class="keyword">while</span>(x&lt;y)&#123;</span><br><span class="line">		switch(area)&#123;</span><br><span class="line">		case <span class="number">1</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">x</span>+<span class="params">centerX</span>,<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">2</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">y</span>+<span class="params">centerX</span>,<span class="params">x</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">3</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">y</span>+<span class="params">centerX</span>,-<span class="params">x</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">4</span>:</span><br><span class="line">			gl<span class="constructor">_Point(<span class="params">x</span>+<span class="params">centerX</span>,-<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">5</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">x</span>+<span class="params">centerX</span>,-<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">6</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">y</span>+<span class="params">centerX</span>,-<span class="params">x</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">7</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">y</span>+<span class="params">centerX</span>,<span class="params">x</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		case <span class="number">8</span>:</span><br><span class="line">			gl<span class="constructor">_Point(-<span class="params">x</span>+<span class="params">centerX</span>,<span class="params">y</span>+<span class="params">centerY</span>)</span>;</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(d&lt;<span class="number">0</span>)&#123;</span><br><span class="line">			d=d+<span class="number">4</span>*x+<span class="number">6</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			d=d+<span class="number">4</span>*(x-y)+<span class="number">10</span>;</span><br><span class="line">			y=y-<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		x=x+<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(x==y)&#123;</span><br><span class="line">		gl<span class="constructor">_Point(<span class="params">x</span>,<span class="params">y</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>此段代码亲测可用，仅供参考。</p>
                  <h2 id="终极目标"><a href="#终极目标" class="headerlink" title="终极目标"></a>终极目标</h2>
                  <p>上一节我们实现了用类库的方法和sin，cos方法来定位坐标绘制机器人，在这一节我们就利用上述的直线和圆弧生成算法，对上一篇中的机器人进行绘制。 在这里只贴出最核心的部分，那就是绘画的函数了，只是简单地传入坐标点然后调用刚才实现的一些方法，比较繁琐，但是比较简单，核心代码如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//myDisplay函数用来画图</span></span><br><span class="line"><span class="built_in">void</span> myDisplay(<span class="built_in">void</span>)&#123;</span><br><span class="line">	<span class="comment">//清除。GL_COLOR_BUFFER_BIT表示清除颜色，glClear函数还可以清除其它的东西</span></span><br><span class="line">	glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">	<span class="comment">//设置黑色颜色</span></span><br><span class="line">	glColor3f (<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>);  </span><br><span class="line">	<span class="comment">//中心的圆圈，四个象限，半径为10</span></span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//肚子中三角形，利用了DDA绘制</span></span><br><span class="line">	dda(<span class="number">-30</span>,<span class="number">-15</span>,<span class="number">30</span>,<span class="number">-15</span>);</span><br><span class="line">	dda(<span class="number">-30</span>,<span class="number">-15</span>,<span class="number">0</span>,<span class="number">28</span>);</span><br><span class="line">	dda(<span class="number">0</span>,<span class="number">28</span>,<span class="number">30</span>,<span class="number">-15</span>);</span><br><span class="line">	<span class="comment">//肚子，四条直线</span></span><br><span class="line">	midPointLine(<span class="number">-60</span>,<span class="number">60</span>,<span class="number">60</span>,<span class="number">60</span>);</span><br><span class="line">	midPointLine(<span class="number">-60</span>,<span class="number">-60</span>,<span class="number">60</span>,<span class="number">-60</span>);</span><br><span class="line">	midPointLine(<span class="number">-74</span>,<span class="number">46</span>,<span class="number">-74</span>,<span class="number">-46</span>);</span><br><span class="line">	midPointLine(<span class="number">74</span>,<span class="number">46</span>,<span class="number">74</span>,<span class="number">-46</span>);</span><br><span class="line">	<span class="comment">//肚子，四个半圆</span></span><br><span class="line">	pnarcArc(<span class="number">14</span>,<span class="number">60</span>,<span class="number">46</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">14</span>,<span class="number">-60</span>,<span class="number">46</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">14</span>,<span class="number">-60</span>,<span class="number">-46</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">14</span>,<span class="number">60</span>,<span class="number">-46</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//脖子,两条直线</span></span><br><span class="line">	bresen(<span class="number">-25</span>,<span class="number">76</span>,<span class="number">-25</span>,<span class="number">60</span>);</span><br><span class="line">	bresen(<span class="number">26</span>,<span class="number">76</span>,<span class="number">25</span>,<span class="number">60</span>);</span><br><span class="line">	<span class="comment">//脸，四条直线</span></span><br><span class="line">	midPointLine(<span class="number">-54</span>,<span class="number">150</span>,<span class="number">54</span>,<span class="number">150</span>);</span><br><span class="line">	midPointLine(<span class="number">-54</span>,<span class="number">76</span>,<span class="number">54</span>,<span class="number">76</span>);</span><br><span class="line">	midPointLine(<span class="number">-64</span>,<span class="number">140</span>,<span class="number">-64</span>,<span class="number">86</span>);</span><br><span class="line">	midPointLine(<span class="number">64</span>,<span class="number">140</span>,<span class="number">64</span>,<span class="number">86</span>);</span><br><span class="line">	<span class="comment">//脸，四个圆弧</span></span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">54</span>,<span class="number">140</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-54</span>,<span class="number">140</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-54</span>,<span class="number">86</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">54</span>,<span class="number">86</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//眼睛，两个正圆</span></span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-30</span>,<span class="number">111</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-30</span>,<span class="number">111</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-30</span>,<span class="number">111</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-30</span>,<span class="number">111</span>,<span class="number">4</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">30</span>,<span class="number">111</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">30</span>,<span class="number">111</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">30</span>,<span class="number">111</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">30</span>,<span class="number">111</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//嘴巴，两个八分之一圆</span></span><br><span class="line">	bresenhamArc(<span class="number">20</span>,<span class="number">0</span>,<span class="number">111</span>,<span class="number">4</span>);</span><br><span class="line">	bresenhamArc(<span class="number">20</span>,<span class="number">0</span>,<span class="number">111</span>,<span class="number">5</span>);</span><br><span class="line">	<span class="comment">//天线</span></span><br><span class="line">	dda(<span class="number">-35</span>,<span class="number">150</span>,<span class="number">-35</span>,<span class="number">173</span>);</span><br><span class="line">	dda(<span class="number">35</span>,<span class="number">150</span>,<span class="number">35</span>,<span class="number">173</span>);</span><br><span class="line">	<span class="comment">//右耳朵，四条直线</span></span><br><span class="line">	bresen(<span class="number">88</span>,<span class="number">98</span>,<span class="number">88</span>,<span class="number">131</span>);</span><br><span class="line">	bresen(<span class="number">67</span>,<span class="number">98</span>,<span class="number">67</span>,<span class="number">131</span>);</span><br><span class="line">	bresen(<span class="number">70</span>,<span class="number">95</span>,<span class="number">85</span>,<span class="number">95</span>);</span><br><span class="line">	bresen(<span class="number">70</span>,<span class="number">134</span>,<span class="number">85</span>,<span class="number">134</span>);</span><br><span class="line">	<span class="comment">//右耳朵，四个圆弧</span></span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">85</span>,<span class="number">131</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">70</span>,<span class="number">131</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">70</span>,<span class="number">98</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">85</span>,<span class="number">98</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//左耳朵，四条直线</span></span><br><span class="line">	bresen(<span class="number">-88</span>,<span class="number">98</span>,<span class="number">-88</span>,<span class="number">131</span>);</span><br><span class="line">	bresen(<span class="number">-67</span>,<span class="number">98</span>,<span class="number">-67</span>,<span class="number">131</span>);</span><br><span class="line">	bresen(<span class="number">-70</span>,<span class="number">95</span>,<span class="number">-85</span>,<span class="number">95</span>);</span><br><span class="line">	bresen(<span class="number">-70</span>,<span class="number">134</span>,<span class="number">-85</span>,<span class="number">134</span>);</span><br><span class="line">	<span class="comment">//左耳朵，四个圆弧</span></span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">-70</span>,<span class="number">131</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">-85</span>,<span class="number">131</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">-85</span>,<span class="number">98</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">3</span>,<span class="number">-70</span>,<span class="number">98</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//左胳膊衔接处</span></span><br><span class="line">	bresen(<span class="number">-73</span>,<span class="number">25</span>,<span class="number">-80</span>,<span class="number">25</span>);</span><br><span class="line">	bresen(<span class="number">-73</span>,<span class="number">43</span>,<span class="number">-80</span>,<span class="number">43</span>);</span><br><span class="line">	<span class="comment">//右胳膊衔接处</span></span><br><span class="line">	bresen(<span class="number">73</span>,<span class="number">25</span>,<span class="number">80</span>,<span class="number">25</span>);</span><br><span class="line">	bresen(<span class="number">73</span>,<span class="number">43</span>,<span class="number">80</span>,<span class="number">43</span>);</span><br><span class="line">	<span class="comment">//左大臂</span></span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">45</span>,<span class="number">-108</span>,<span class="number">0</span>);</span><br><span class="line">	dda(<span class="number">-81</span>,<span class="number">45</span>,<span class="number">-81</span>,<span class="number">0</span>);</span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">45</span>,<span class="number">-81</span>,<span class="number">45</span>);</span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">0</span>,<span class="number">-81</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//右大臂</span></span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">45</span>,<span class="number">108</span>,<span class="number">0</span>);</span><br><span class="line">	dda(<span class="number">81</span>,<span class="number">45</span>,<span class="number">81</span>,<span class="number">0</span>);</span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">45</span>,<span class="number">81</span>,<span class="number">45</span>);</span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">0</span>,<span class="number">81</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//左中臂</span></span><br><span class="line">	bresen(<span class="number">-101</span>,<span class="number">0</span>,<span class="number">-101</span>,<span class="number">-4</span>);</span><br><span class="line">	bresen(<span class="number">-88</span>,<span class="number">0</span>,<span class="number">-88</span>,<span class="number">-4</span>);</span><br><span class="line">	<span class="comment">//右中臂</span></span><br><span class="line">	bresen(<span class="number">101</span>,<span class="number">0</span>,<span class="number">101</span>,<span class="number">-4</span>);</span><br><span class="line">	bresen(<span class="number">88</span>,<span class="number">0</span>,<span class="number">88</span>,<span class="number">-4</span>);</span><br><span class="line">	<span class="comment">//左小臂</span></span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">-4</span>,<span class="number">-108</span>,<span class="number">-37</span>);</span><br><span class="line">	dda(<span class="number">-81</span>,<span class="number">-4</span>,<span class="number">-81</span>,<span class="number">-37</span>);</span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">-4</span>,<span class="number">-81</span>,<span class="number">-4</span>);</span><br><span class="line">	dda(<span class="number">-108</span>,<span class="number">-37</span>,<span class="number">-81</span>,<span class="number">-37</span>);</span><br><span class="line">	<span class="comment">//右小臂</span></span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">-4</span>,<span class="number">108</span>,<span class="number">-37</span>);</span><br><span class="line">	dda(<span class="number">81</span>,<span class="number">-4</span>,<span class="number">81</span>,<span class="number">-37</span>);</span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">-4</span>,<span class="number">81</span>,<span class="number">-4</span>);</span><br><span class="line">	dda(<span class="number">108</span>,<span class="number">-37</span>,<span class="number">81</span>,<span class="number">-37</span>);</span><br><span class="line">	<span class="comment">//左手</span></span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//右手</span></span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">95</span>,<span class="number">-47</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">95</span>,<span class="number">-47</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">95</span>,<span class="number">-47</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">10</span>,<span class="number">95</span>,<span class="number">-47</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//左腿衔接处</span></span><br><span class="line">	dda(<span class="number">-43</span>,<span class="number">-62</span>,<span class="number">-43</span>,<span class="number">-69</span>);</span><br><span class="line">	dda(<span class="number">-25</span>,<span class="number">-62</span>,<span class="number">-25</span>,<span class="number">-69</span>);</span><br><span class="line">	<span class="comment">//右腿衔接处</span></span><br><span class="line">	dda(<span class="number">43</span>,<span class="number">-62</span>,<span class="number">43</span>,<span class="number">-69</span>);</span><br><span class="line">	dda(<span class="number">25</span>,<span class="number">-62</span>,<span class="number">25</span>,<span class="number">-69</span>);</span><br><span class="line">	<span class="comment">//左大腿，四条直线</span></span><br><span class="line">	bresen(<span class="number">-47</span>,<span class="number">-69</span>,<span class="number">-21</span>,<span class="number">-69</span>);</span><br><span class="line">	bresen(<span class="number">-47</span>,<span class="number">-117</span>,<span class="number">-21</span>,<span class="number">-117</span>);</span><br><span class="line">	bresen(<span class="number">-51</span>,<span class="number">-70</span>,<span class="number">-51</span>,<span class="number">-113</span>);</span><br><span class="line">	bresen(<span class="number">-17</span>,<span class="number">-70</span>,<span class="number">-17</span>,<span class="number">-113</span>);</span><br><span class="line">	<span class="comment">//左大腿，四条圆弧</span></span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">-21</span>,<span class="number">-73</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">-47</span>,<span class="number">-73</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">-47</span>,<span class="number">-113</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">-21</span>,<span class="number">-113</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//右大腿，四条直线</span></span><br><span class="line">	bresen(<span class="number">47</span>,<span class="number">-69</span>,<span class="number">21</span>,<span class="number">-69</span>);</span><br><span class="line">	bresen(<span class="number">47</span>,<span class="number">-117</span>,<span class="number">21</span>,<span class="number">-117</span>);</span><br><span class="line">	bresen(<span class="number">51</span>,<span class="number">-70</span>,<span class="number">51</span>,<span class="number">-113</span>);</span><br><span class="line">	bresen(<span class="number">17</span>,<span class="number">-70</span>,<span class="number">17</span>,<span class="number">-113</span>);</span><br><span class="line">	<span class="comment">//右大腿，四条圆弧</span></span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">47</span>,<span class="number">-73</span>,<span class="number">1</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">21</span>,<span class="number">-73</span>,<span class="number">2</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">21</span>,<span class="number">-113</span>,<span class="number">3</span>);</span><br><span class="line">	pnarcArc(<span class="number">4</span>,<span class="number">47</span>,<span class="number">-113</span>,<span class="number">4</span>);</span><br><span class="line">	<span class="comment">//左脚踝</span></span><br><span class="line">	dda(<span class="number">-43</span>,<span class="number">-118</span>,<span class="number">-43</span>,<span class="number">-125</span>);</span><br><span class="line">	dda(<span class="number">-25</span>,<span class="number">-118</span>,<span class="number">-25</span>,<span class="number">-125</span>);</span><br><span class="line">	<span class="comment">//右腿衔接处</span></span><br><span class="line">	dda(<span class="number">43</span>,<span class="number">-118</span>,<span class="number">43</span>,<span class="number">-125</span>);</span><br><span class="line">	dda(<span class="number">25</span>,<span class="number">-118</span>,<span class="number">25</span>,<span class="number">-125</span>);</span><br><span class="line">	<span class="comment">//左脚</span></span><br><span class="line">	bresen(<span class="number">-59</span>,<span class="number">-125</span>,<span class="number">-8</span>,<span class="number">-125</span>);</span><br><span class="line">	bresen(<span class="number">-59</span>,<span class="number">-137</span>,<span class="number">-8</span>,<span class="number">-137</span>);</span><br><span class="line">	bresen(<span class="number">-59</span>,<span class="number">-125</span>,<span class="number">-59</span>,<span class="number">-137</span>);</span><br><span class="line">	bresen(<span class="number">-8</span>,<span class="number">-125</span>,<span class="number">-8</span>,<span class="number">-137</span>);</span><br><span class="line">	<span class="comment">//右脚</span></span><br><span class="line">	bresen(<span class="number">59</span>,<span class="number">-125</span>,<span class="number">8</span>,<span class="number">-125</span>);</span><br><span class="line">	bresen(<span class="number">59</span>,<span class="number">-137</span>,<span class="number">8</span>,<span class="number">-137</span>);</span><br><span class="line">	bresen(<span class="number">59</span>,<span class="number">-125</span>,<span class="number">59</span>,<span class="number">-137</span>);</span><br><span class="line">	bresen(<span class="number">8</span>,<span class="number">-125</span>,<span class="number">8</span>,<span class="number">-137</span>);</span><br><span class="line">	<span class="comment">//刷新机器人</span></span><br><span class="line">	glFlush();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>其他的部分不再赘述，都十分基础。</p>
                  <h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2>
                  <p>直接贴图如下 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/QQ截图20150413005949.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/QQ截图20150413005949.jpg" alt="QQ截图20150413005949"></a> 嘿嘿，我们直接用生成算法绘制的图形是不是更好看一些呢？</p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>本节介绍了各种直线生成算法和圆弧生成算法，以及利用该算法重新绘制机器人，希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-13 01:03:08" itemprop="dateCreated datePublished" datetime="2015-04-13T01:03:08+08:00">2015-04-13</time>
                </span>
                <span id="/1613.html" class="post-meta-item leancloud_visitors" data-flag-title="OpenGL绘图实例二之直线和圆弧的绘制" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>1.1k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>1 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1597.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> C/C++ <i class="label-arrow"></i>
                  </a>
                  <a href="/1597.html" class="post-title-link" itemprop="url">OpenGL绘图实例一之机器人的绘制</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>计算机图形学教材中有多种绘图方法，如直线的DDA算法、正负法、Bresenham算法和画圆弧的正负法和Bresenham算法。 同样，OpenGL类库也为我们提供了多种绘图方法，比如 glVertex2d，在这里我们用类库的方法来实现一个机器人的绘制。DDA等算法实现之后我们再替换类库的 glVertex2d 方法。</p>
                  <h2 id="绘制要求"><a href="#绘制要求" class="headerlink" title="绘制要求"></a>绘制要求</h2>
                  <p>利用 glVertex2d 和 glVertex2f 在二维平面上绘制如下的机器人。所以我们现在不需要三维的绘图方法，仅在平面绘制即可。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150410115231.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150410115231.jpg" alt="20150410115231"></a></p>
                  <h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2>
                  <p>经过观察我们发现，图中包含了圆角矩形，矩形，直线，圆形，弧形，三角形，而对于 glVertex2d 的方法，只是定位好坐标点，然后利用坐标点连线或者形成封闭图形来绘制。所以，对于圆角矩形，弧形等，我们可以利用三角函数来求取坐标，并连线即可。</p>
                  <h3 id="1-圆角矩形的解决方案"><a href="#1-圆角矩形的解决方案" class="headerlink" title="1.圆角矩形的解决方案"></a>1.圆角矩形的解决方案</h3>
                  <p>对于圆角矩形，顾名思义每个角是由一个四分之一圆弧组成的。我们定义这个圆弧的半径为cirR，整个圆角矩形的宽度为width，高度为height，那么抛出四个角的圆弧，就会在圆角矩形内部形成一个小的矩形，我们定义它的宽高分别为w，h。另外，圆角矩形的中心点为(centerX,centerY)，如下图所示 （博主原创图，盗图必究） <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/11-e1428648703474.png" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/11-e1428648703474.png" alt=""></a> 在OpenGL中，可以定义一个绘图模式</p>
                  <figure class="highlight lisp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glBegin(<span class="name">GL_LINE_LOOP</span>)<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>可以绘制封闭曲线，也就是说，我们所有调用的 glVertex2f 函数绘制的点均可以自动连接成一个封闭曲线。 所以，我们要做的就是找出圆角的坐标，利用 C++ 中的三角函数来计算右上角小圆所在的路径，我们设角度为X，所以圆弧的x方向延伸长度为 cirRcosX，在y方向延伸长度为 cirRsinX 对于右上角的四分之一圆弧，它所在的路径x坐标便是 centerX+w/2+cirRcosX = centerX+width/2-cirR+cirRcosX，同理，y路径坐标便是 centerY+h/2+cirRsinX = centerY+height/2-cirR+cirRsinX 当然对于其他的角，是加 w/2 还是减 w/2 就要看它所在的象限了。 另外对于精确度的问题，我们可以定义一个 divide 变量，将四分之一圆弧分成若干个点来绘制，当然分的份数越多，越精细，分的份数的值就是 divide，所以每次增加的弧度便是 PI/(2*divide) 方法最终实现如下，我们传入矩形的宽高，矩形中心的坐标，圆角半径即可进行绘制。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画圆角矩形，传入矩形中心点坐标，矩形宽高，角半径</span></span><br><span class="line"><span class="built_in">void</span> glRoundRec(<span class="built_in">int</span> centerX,<span class="built_in">int</span> centerY,<span class="built_in">int</span> width,<span class="built_in">int</span> height,<span class="built_in">float</span> cirR)&#123;</span><br><span class="line">	<span class="comment">//二分之PI，一个象限的角度</span></span><br><span class="line">	<span class="built_in">float</span> PI_HALF = PI/<span class="number">2</span>;</span><br><span class="line">	<span class="comment">//划分程度,值越大画得越精细</span></span><br><span class="line">	<span class="built_in">float</span> divide=<span class="number">20.0</span>;</span><br><span class="line">	<span class="comment">//圆角矩形的坐标</span></span><br><span class="line">    <span class="built_in">float</span> tx,ty; </span><br><span class="line">	<span class="comment">//画封闭曲线</span></span><br><span class="line">    glBegin(GL_LINE_LOOP);</span><br><span class="line">	<span class="comment">//四个象限不同的操作符</span></span><br><span class="line">    <span class="built_in">int</span> opX[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="built_in">int</span> opY[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">	<span class="comment">//用来计数，从第一象限到第四象限</span></span><br><span class="line">    <span class="built_in">float</span> x=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//x自增时加的值</span></span><br><span class="line">	<span class="built_in">float</span> part=<span class="number">1</span>/divide;</span><br><span class="line">	<span class="comment">//计算内矩形宽高一半的数值</span></span><br><span class="line">	<span class="built_in">int</span> w=width/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="built_in">int</span> h=height/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="comment">//循环画线</span></span><br><span class="line">    <span class="keyword">for</span>(x=<span class="number">0</span>;x&lt;<span class="number">4</span>;x+=part)&#123;</span><br><span class="line">		<span class="comment">//求出弧度</span></span><br><span class="line">		<span class="built_in">float</span> rad = PI_HALF*x;</span><br><span class="line">		<span class="comment">//计算坐标值</span></span><br><span class="line">	    tx=cirR*cos(rad)+opX[(<span class="built_in">int</span>)x]*w+centerX;</span><br><span class="line">	    ty=cirR*sin(rad)+opY[(<span class="built_in">int</span>)x]*h+centerY;</span><br><span class="line">		<span class="comment">//传入坐标画线</span></span><br><span class="line">	    glVertex2f(tx,ty);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">   glEnd();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>例如我们可以调用</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">glRoundRec(<span class="number">0</span>,<span class="number">0</span>,<span class="number">146</span>,<span class="number">120</span>,<span class="number">15</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>可以绘制如下的圆角矩形 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/0150410150933-e1428649832943.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/0150410150933-e1428649832943.jpg" alt=""></a> </p>
                  <h3 id="2-圆弧的解决方案"><a href="#2-圆弧的解决方案" class="headerlink" title="2.圆弧的解决方案"></a>2.圆弧的解决方案</h3>
                  <p>对于圆弧的画法，我们也可以利用三角函数来解决，所以我们需要知道的参数就有半径，起始角度，还有圆弧的中心点。 代码实现如下</p>
                  <figure class="highlight cpp">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画弧线，相对偏移量XY，开始的弧度，结束的弧度，半径</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">glArc</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">double</span> y,<span class="keyword">double</span> start_angle,<span class="keyword">double</span> end_angle,<span class="keyword">double</span> radius)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">	<span class="comment">//开始绘制曲线</span></span><br><span class="line">	glBegin(GL_LINE_STRIP);</span><br><span class="line">	<span class="comment">//每次画增加的弧度</span></span><br><span class="line">	<span class="keyword">double</span> delta_angle=PI/<span class="number">180</span>;</span><br><span class="line">	<span class="comment">//画圆弧</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">double</span> i=start_angle;i&lt;=end_angle;i+=delta_angle)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//绝对定位加三角函数值</span></span><br><span class="line">		<span class="keyword">double</span> vx=x+radius * <span class="built_in">cos</span>(i);</span><br><span class="line">		<span class="keyword">double</span> vy=y+radius*<span class="built_in">sin</span>(i);</span><br><span class="line">		glVertex2d(vx,vy);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束绘画</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>至于画圆，我们只需要画一个弧度为0至2PI的圆弧即可。</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//画圆</span></span><br><span class="line">void gl<span class="constructor">Circle(<span class="params">double</span> <span class="params">x</span>, <span class="params">double</span> <span class="params">y</span>, <span class="params">double</span> <span class="params">radius</span>)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">	<span class="comment">//画全圆</span></span><br><span class="line">    gl<span class="constructor">Arc(<span class="params">x</span>,<span class="params">y</span>,0,2<span class="operator">*</span>PI,<span class="params">radius</span>)</span>;  </span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="3-其他图形的解决方案"><a href="#3-其他图形的解决方案" class="headerlink" title="3.其他图形的解决方案"></a>3.其他图形的解决方案</h3>
                  <p>对于直线，三角形，矩形等等，就没有那么复杂了，只需要绘制几个端点即可完成绘制。在此不再赘述。</p>
                  <h3 id="4-坐标的解决方案"><a href="#4-坐标的解决方案" class="headerlink" title="4.坐标的解决方案"></a>4.坐标的解决方案</h3>
                  <p>要画图，最重要的便是坐标点，在此博主对图上的某些坐标进行了测量，假设总宽度为300，对应的坐标值标注如下图所示，当然比例不一样的话，坐标会有成比例的变化，在此仅作参考。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/robot-e1428650596530.png" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/robot-e1428650596530.png" alt="robot"></a> 在图中，某些点的坐标已做好标注，仅供参考。</p>
                  <h2 id="完整程序"><a href="#完整程序" class="headerlink" title="完整程序"></a>完整程序</h2>
                  <p>完整的画机器人的程序实现如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">#include &lt;glut.h&gt;</span><br><span class="line">#include &lt;math.h&gt; </span><br><span class="line">#define PI <span class="number">3.1415926</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//画矩形，传入的是左下角XY坐标和右上角XY坐标</span></span><br><span class="line"><span class="built_in">void</span> glRect(<span class="built_in">int</span> leftX,<span class="built_in">int</span> leftY,<span class="built_in">int</span> rightX,<span class="built_in">int</span> rightY)&#123;</span><br><span class="line">	<span class="comment">//画封闭曲线</span></span><br><span class="line">    glBegin(GL_LINE_LOOP);</span><br><span class="line">	<span class="comment">//左下角</span></span><br><span class="line">	glVertex2d(leftX,leftY);</span><br><span class="line">	<span class="comment">//右下角</span></span><br><span class="line">	glVertex2d(rightX,leftY);</span><br><span class="line">	<span class="comment">//右上角</span></span><br><span class="line">	glVertex2d(rightX,rightY);</span><br><span class="line">	<span class="comment">//左上角</span></span><br><span class="line">	glVertex2d(leftX,rightY);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画圆角矩形，传入矩形宽高，角半径，矩形中心点坐标</span></span><br><span class="line"><span class="built_in">void</span> glRoundRec(<span class="built_in">int</span> centerX,<span class="built_in">int</span> centerY,<span class="built_in">int</span> width,<span class="built_in">int</span> height,<span class="built_in">float</span> cirR)&#123;</span><br><span class="line">	<span class="comment">//二分之PI，一个象限的角度</span></span><br><span class="line">	<span class="built_in">float</span> PI_HALF = PI/<span class="number">2</span>;</span><br><span class="line">	<span class="comment">//划分程度,值越大画得越精细</span></span><br><span class="line">	<span class="built_in">float</span> divide=<span class="number">20.0</span>;</span><br><span class="line">	<span class="comment">//圆角矩形的坐标</span></span><br><span class="line">    <span class="built_in">float</span> tx,ty; </span><br><span class="line">	<span class="comment">//画封闭曲线</span></span><br><span class="line">    glBegin(GL_LINE_LOOP);</span><br><span class="line">	<span class="comment">//四个象限不同的操作符</span></span><br><span class="line">    <span class="built_in">int</span> opX[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="built_in">int</span> opY[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">	<span class="comment">//用来计数，从第一象限到第四象限</span></span><br><span class="line">    <span class="built_in">float</span> x=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//x自增时加的值</span></span><br><span class="line">	<span class="built_in">float</span> part=<span class="number">1</span>/divide;</span><br><span class="line">	<span class="comment">//计算内矩形宽高一半的数值</span></span><br><span class="line">	<span class="built_in">int</span> w=width/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="built_in">int</span> h=height/<span class="number">2</span>-cirR;</span><br><span class="line">	<span class="comment">//循环画线</span></span><br><span class="line">    <span class="keyword">for</span>(x=<span class="number">0</span>;x&lt;<span class="number">4</span>;x+=part)&#123;</span><br><span class="line">		<span class="comment">//求出弧度</span></span><br><span class="line">		<span class="built_in">float</span> rad = PI_HALF*x;</span><br><span class="line">		<span class="comment">//计算坐标值</span></span><br><span class="line">	    tx=cirR*cos(rad)+opX[(<span class="built_in">int</span>)x]*w+centerX;</span><br><span class="line">	    ty=cirR*sin(rad)+opY[(<span class="built_in">int</span>)x]*h+centerY;</span><br><span class="line">		<span class="comment">//传入坐标画线</span></span><br><span class="line">	    glVertex2f(tx,ty);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">   glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画弧线，相对偏移量XY，开始的弧度，结束的弧度，半径</span></span><br><span class="line"><span class="built_in">void</span> glArc(<span class="built_in">double</span> x,<span class="built_in">double</span> y,<span class="built_in">double</span> start_angle,<span class="built_in">double</span> end_angle,<span class="built_in">double</span> radius)</span><br><span class="line">&#123;   </span><br><span class="line">	<span class="comment">//开始绘制曲线</span></span><br><span class="line">	glBegin(GL_LINE_STRIP);</span><br><span class="line">	<span class="comment">//每次画增加的弧度</span></span><br><span class="line">	<span class="built_in">double</span> delta_angle=PI/<span class="number">180</span>;</span><br><span class="line">	<span class="comment">//画圆弧</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">double</span> i=start_angle;i&lt;=end_angle;i+=delta_angle)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//绝对定位加三角函数值</span></span><br><span class="line">		<span class="built_in">double</span> vx=x+radius * cos(i);</span><br><span class="line">		<span class="built_in">double</span> vy=y+radius*sin(i);</span><br><span class="line">		glVertex2d(vx,vy);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//结束绘画</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//画圆</span></span><br><span class="line"><span class="built_in">void</span> glCircle(<span class="built_in">double</span> x, <span class="built_in">double</span> y, <span class="built_in">double</span> radius)  </span><br><span class="line">&#123;  </span><br><span class="line">	<span class="comment">//画全圆</span></span><br><span class="line">    glArc(x,y,<span class="number">0</span>,<span class="number">2</span>*PI,radius);  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//画三角形，传入三个点的坐标</span></span><br><span class="line"><span class="built_in">void</span> glTri(<span class="built_in">int</span> x1,<span class="built_in">int</span> y1,<span class="built_in">int</span> x2,<span class="built_in">int</span> y2,<span class="built_in">int</span> x3,<span class="built_in">int</span> y3)&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    glBegin(GL_LINE_LOOP);</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	glVertex2d(x1,y1);</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	glVertex2d(x2,y2);</span><br><span class="line">	<span class="comment">//三点</span></span><br><span class="line">	glVertex2d(x3,y3);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画线，传入两点坐标</span></span><br><span class="line"><span class="built_in">void</span> glLine(<span class="built_in">int</span> x1,<span class="built_in">int</span> y1,<span class="built_in">int</span> x2,<span class="built_in">int</span> y2)&#123;</span><br><span class="line">	<span class="comment">//画封闭线</span></span><br><span class="line">    glBegin(GL_LINE_STRIP);</span><br><span class="line">	<span class="comment">//一点</span></span><br><span class="line">	glVertex2d(x1,y1);</span><br><span class="line">	<span class="comment">//二点</span></span><br><span class="line">	glVertex2d(x2,y2);</span><br><span class="line">	<span class="comment">//结束画线</span></span><br><span class="line">	glEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数用来画图</span></span><br><span class="line"><span class="built_in">void</span> display(<span class="built_in">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//GL_COLOR_BUFFER_BIT表示清除颜色</span></span><br><span class="line">	glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">	<span class="comment">//设置画线颜色</span></span><br><span class="line">    glColor3f(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>);</span><br><span class="line">	<span class="comment">//画点大小</span></span><br><span class="line">	glPointSize(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//画圆角矩形，大肚子</span></span><br><span class="line">	glRoundRec(<span class="number">0</span>,<span class="number">0</span>,<span class="number">146</span>,<span class="number">120</span>,<span class="number">15</span>);</span><br><span class="line">	<span class="comment">//画圆，中间小圈</span></span><br><span class="line">	glCircle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>);</span><br><span class="line">	<span class="comment">//画矩形，脖子</span></span><br><span class="line">	glRect(<span class="number">-25</span>,<span class="number">60</span>,<span class="number">25</span>,<span class="number">76</span>);</span><br><span class="line">	<span class="comment">//画圆角矩形，大脸</span></span><br><span class="line">	glRoundRec(<span class="number">0</span>,<span class="number">113</span>,<span class="number">128</span>,<span class="number">74</span>,<span class="number">10</span>);</span><br><span class="line">	<span class="comment">//两个眼睛</span></span><br><span class="line">	glCircle(<span class="number">-30</span>,<span class="number">111</span>,<span class="number">10</span>);</span><br><span class="line">	glCircle(<span class="number">30</span>,<span class="number">111</span>,<span class="number">10</span>);</span><br><span class="line">	<span class="comment">//两条天线</span></span><br><span class="line">	glLine(<span class="number">-35</span>,<span class="number">150</span>,<span class="number">-35</span>,<span class="number">173</span>);</span><br><span class="line">	glLine(<span class="number">35</span>,<span class="number">150</span>,<span class="number">35</span>,<span class="number">173</span>);</span><br><span class="line">	<span class="comment">//圆角矩形，两个耳朵</span></span><br><span class="line">	glRoundRec(<span class="number">81</span>,<span class="number">115</span>,<span class="number">20</span>,<span class="number">34</span>,<span class="number">5</span>);</span><br><span class="line">	glRoundRec(<span class="number">-81</span>,<span class="number">115</span>,<span class="number">20</span>,<span class="number">34</span>,<span class="number">5</span>);</span><br><span class="line">	<span class="comment">//圆弧，画嘴</span></span><br><span class="line">	glArc(<span class="number">0</span>,<span class="number">133</span>,<span class="number">11</span>*PI/<span class="number">8</span>,<span class="number">13</span>*PI/<span class="number">8</span>,<span class="number">45</span>);</span><br><span class="line">	<span class="comment">//画三角，肚子里的三角</span></span><br><span class="line">	glTri(<span class="number">-30</span>,<span class="number">-15</span>,<span class="number">30</span>,<span class="number">-15</span>,<span class="number">0</span>,<span class="number">28</span>);</span><br><span class="line">	<span class="comment">//画矩形，胳膊连接处</span></span><br><span class="line">	glRect(<span class="number">-81</span>,<span class="number">43</span>,<span class="number">-73</span>,<span class="number">25</span>);</span><br><span class="line">	glRect(<span class="number">81</span>,<span class="number">43</span>,<span class="number">73</span>,<span class="number">25</span>);</span><br><span class="line">	<span class="comment">//画矩形，上臂</span></span><br><span class="line">	glRect(<span class="number">-108</span>,<span class="number">45</span>,<span class="number">-81</span>,<span class="number">0</span>);</span><br><span class="line">	glRect(<span class="number">108</span>,<span class="number">45</span>,<span class="number">81</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//画矩形，中臂</span></span><br><span class="line">	glRect(<span class="number">-101</span>,<span class="number">0</span>,<span class="number">-88</span>,<span class="number">-4</span>);</span><br><span class="line">	glRect(<span class="number">101</span>,<span class="number">0</span>,<span class="number">88</span>,<span class="number">-4</span>);</span><br><span class="line">	<span class="comment">//画矩形，下臂</span></span><br><span class="line">	glRect(<span class="number">-108</span>,<span class="number">-4</span>,<span class="number">-81</span>,<span class="number">-37</span>);</span><br><span class="line">	glRect(<span class="number">108</span>,<span class="number">-4</span>,<span class="number">81</span>,<span class="number">-37</span>);</span><br><span class="line">	<span class="comment">//画圆形，手掌</span></span><br><span class="line">	glCircle(<span class="number">-95</span>,<span class="number">-47</span>,<span class="number">10</span>);</span><br><span class="line">	glCircle(<span class="number">95</span>,<span class="number">-47</span>,<span class="number">10</span>);</span><br><span class="line">	<span class="comment">//画腿连接处</span></span><br><span class="line">	glRect(<span class="number">-41</span>,<span class="number">-62</span>,<span class="number">-21</span>,<span class="number">-66</span>);</span><br><span class="line">	glRect(<span class="number">41</span>,<span class="number">-62</span>,<span class="number">21</span>,<span class="number">-66</span>);</span><br><span class="line">	<span class="comment">//画圆角矩形，大长腿</span></span><br><span class="line">	glRoundRec(<span class="number">-32</span>,<span class="number">-92</span>,<span class="number">38</span>,<span class="number">52</span>,<span class="number">10</span>);</span><br><span class="line">	glRoundRec(<span class="number">32</span>,<span class="number">-92</span>,<span class="number">38</span>,<span class="number">52</span>,<span class="number">10</span>);</span><br><span class="line">	<span class="comment">//画矩形，脚踝</span></span><br><span class="line">	glRect(<span class="number">-41</span>,<span class="number">-125</span>,<span class="number">-21</span>,<span class="number">-117</span>);</span><br><span class="line">	glRect(<span class="number">41</span>,<span class="number">-125</span>,<span class="number">21</span>,<span class="number">-117</span>);</span><br><span class="line">	<span class="comment">//画矩形，大脚掌</span></span><br><span class="line">	glRect(<span class="number">-59</span>,<span class="number">-125</span>,<span class="number">-8</span>,<span class="number">-137</span>);</span><br><span class="line">	glRect(<span class="number">59</span>,<span class="number">-125</span>,<span class="number">8</span>,<span class="number">-137</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//保证前面的OpenGL命令立即执行，而不是让它们在缓冲区中等待 </span></span><br><span class="line">	glFlush();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口大小变化时调用的函数</span></span><br><span class="line"><span class="built_in">void</span> ChangeSize(GLsizei w,GLsizei h)  </span><br><span class="line">&#123;  </span><br><span class="line">	<span class="comment">//避免高度为0</span></span><br><span class="line">    <span class="keyword">if</span>(h==<span class="number">0</span>) &#123;  </span><br><span class="line">        h=<span class="number">1</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">//定义视口大小，宽高一致  </span></span><br><span class="line">    glViewport(<span class="number">0</span>,<span class="number">0</span>,w,h);</span><br><span class="line">	<span class="built_in">int</span> half = <span class="number">200</span>;</span><br><span class="line">	<span class="comment">//重置坐标系统，使投影变换复位</span></span><br><span class="line">    glMatrixMode(GL_PROJECTION); </span><br><span class="line">	<span class="comment">//将当前的用户坐标系的原点移到了屏幕中心</span></span><br><span class="line">    glLoadIdentity();  </span><br><span class="line">   <span class="comment">//定义正交视域体  </span></span><br><span class="line">    <span class="keyword">if</span>(w&lt;h) &#123;</span><br><span class="line">		<span class="comment">//如果高度大于宽度，则将高度视角扩大，图形显示居中</span></span><br><span class="line">        glOrtho(-half,half,-half*h/w,half*h/w,-half,half);  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">//如果宽度大于高度，则将宽度视角扩大，图形显示居中</span></span><br><span class="line">        glOrtho(-half*w/h,half*w/h,-half,half,-half,half);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//程序入口</span></span><br><span class="line"><span class="built_in">int</span> main(<span class="built_in">int</span> argc, char *argv[])&#123;</span><br><span class="line">	<span class="comment">//对GLUT进行初始化，并处理所有的命令行参数</span></span><br><span class="line">	glutInit(&amp;argc, argv);</span><br><span class="line">	<span class="comment">//指定RGB颜色模式和单缓冲窗口</span></span><br><span class="line">	glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);</span><br><span class="line">	<span class="comment">//定义窗口的位置</span></span><br><span class="line">	glutInitWindowPosition(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">	<span class="comment">//定义窗口的大小</span></span><br><span class="line">	glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">	<span class="comment">//创建窗口，同时为之命名</span></span><br><span class="line">	glutCreateWindow(<span class="string">"OpenGL"</span>);</span><br><span class="line">	<span class="comment">//设置窗口清除颜色为白色</span></span><br><span class="line">	glClearColor(<span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">1.0f</span>);</span><br><span class="line">	<span class="comment">//参数为一个函数，绘图时这个函数就会被调用</span></span><br><span class="line">	glutDisplayFunc(&amp;display);</span><br><span class="line">	<span class="comment">//参数为一个函数，当窗口大小改变时会被调用</span></span><br><span class="line">	glutReshapeFunc(ChangeSize); </span><br><span class="line">	<span class="comment">//该函数让GLUT框架开始运行，所有设置的回调函数开始工作，直到用户终止程序为止</span></span><br><span class="line">	glutMainLoop();</span><br><span class="line">	<span class="comment">//程序返回</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行效果如下图所示 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150410152854.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/20150410152854.jpg" alt="20150410152854"></a></p>
                  <h2 id="综述-1"><a href="#综述-1" class="headerlink" title="综述"></a>综述</h2>
                  <p>当然，这里直接调用了类库中的画线方法，而且用的是三角函数定位坐标。对于DDA算法等实现还没有进行替换，等实现DDA算法之后，再将绘制直线，圆弧等等的算法替换掉。同样可以实现机器人的绘制。 希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-10 15:37:08" itemprop="dateCreated datePublished" datetime="2015-04-10T15:37:08+08:00">2015-04-10</time>
                </span>
                <span id="/1597.html" class="post-meta-item leancloud_visitors" data-flag-title="OpenGL绘图实例一之机器人的绘制" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>6.7k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>6 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1592.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> JavaScript <i class="label-arrow"></i>
                  </a>
                  <a href="/1592.html" class="post-title-link" itemprop="url">jQuery应用四之图片局部放大插件jQZoom</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>我们都见过淘宝上的宝贝，把鼠标放上去，会有局部放大的功能，现在我们可以利用一个叫jQZoom的插件，来实现图片的局部放大，让我们来感受一下</p>
                  <h2 id="在线演示"><a href="#在线演示" class="headerlink" title="在线演示"></a>在线演示</h2>
                  <p>我们首先来在线演示一下效果，然后我们说一下是怎样的实现，点开链接进行预览吧 <a href="http://res.cuiqingcai.com/jqplugins/jqzoom/" target="_blank" rel="noopener">在线预览</a></p>
                  <h2 id="插件文件"><a href="#插件文件" class="headerlink" title="插件文件"></a>插件文件</h2>
                  <ul>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/jqzoom/js/jquery.min.js" target="_blank" rel="noopener">jquery.min.js</a></li>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/jqzoom/js/jquery.jqzoom.js" target="_blank" rel="noopener">jquery.jqzoom.js</a></li>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/jqzoom/css/jquery.jqzoom.css" target="_blank" rel="noopener">jquery.jqzoom.css</a></li>
                  </ul>
                  <p>其中包含了两个JS文件，一个是jQuery库，另一个就是jqzoom插件文件。另外还有一个css文件，主要作用是给图片放缩规定样式</p>
                  <h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JQZoom放大镜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.jqzoom.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/jquery.jqzoom.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">           <span class="selector-tag">body</span>&#123;<span class="attribute">font-size</span>:<span class="number">13px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-tag">span</span>&#123;<span class="attribute">color</span>:Red;<span class="attribute">font-size</span>:<span class="number">12px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span>&#123;<span class="attribute">width</span>:<span class="number">260px</span>;<span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#666</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divTitle</span>&#123;<span class="attribute">padding</span>:<span class="number">5px</span>;<span class="attribute">background-color</span>:<span class="number">#eee</span>;<span class="attribute">font-weight</span>:bold&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span>&#123;<span class="attribute">padding</span>:<span class="number">8px</span>;<span class="attribute">line-height</span>:<span class="number">1.6em</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ccc</span>&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#jqzoom"</span>).jqzoom( <span class="comment">//绑定图片放大插件jqzoom</span></span></span><br><span class="line">                 &#123;</span><br><span class="line">                     zoomWidth: 230,</span><br><span class="line">                     zoomHeight: 230,</span><br><span class="line"><span class="actionscript">                     position: <span class="string">'right'</span></span></span><br><span class="line">                 &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              图片放大镜</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/bag.jpg"</span> <span class="attr">id</span>=<span class="string">"jqzoom"</span> <span class="attr">title</span>=<span class="string">"我的背包"</span>&gt;</span></span><br><span class="line">		         <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/bagsmall.jpg"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>Demo的代码如上所示，下面我们来分析一下代码调用</p>
                  <h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/bag.jpg"</span> <span class="attr">id</span>=<span class="string">"jqzoom"</span> <span class="attr">title</span>=<span class="string">"我的背包"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/bagsmall.jpg"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>最主要的部分如上所示，是一个超链接包含了一张图片。超链接的href是图片的大图，里面的img的src是小图。 利用插件时，只需要取到超链接这个元素，然后调用jqzoom方法就可以了</p>
                  <figure class="highlight yaml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="string">$("#jqzoom").jqzoom(</span> <span class="string">//绑定图片放大插件jqzoom</span></span><br><span class="line">	 <span class="string">&#123;</span></span><br><span class="line">		 <span class="attr">zoomWidth:</span> <span class="number">230</span><span class="string">,</span></span><br><span class="line">		 <span class="attr">zoomHeight:</span> <span class="number">230</span><span class="string">,</span></span><br><span class="line">		 <span class="attr">position:</span> <span class="string">'right'</span></span><br><span class="line">	 <span class="string">&#125;</span></span><br><span class="line"><span class="string">);</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>用法很简单，只需要传入一些参数就可以了。</p>
                  <h2 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h2>
                  <p><strong>下面是所有的参数详解</strong></p>
                  <ul>
                    <li>zoomType，默认值：’standard’，另一个值是’reverse’，是否将原图用半透明图层遮盖。</li>
                    <li>zoomWidth，默认值：200，放大窗口的宽度。</li>
                    <li>zoomHeight，默认值：200，放大窗口的高度。</li>
                    <li>xOffset，默认值：10，放大窗口相对于原图的x轴偏移值，可以为负。</li>
                    <li>yOffset，默认值：0，放大窗口相对于原图的y轴偏移值，可以为负。</li>
                    <li>position，默认值：’right’，放大窗口的位置，值还可以是:’right’ ,’left’ ,’top’ ,’bottom’。</li>
                    <li>lens，默认值：true，若为false，则不在原图上显示镜头。</li>
                    <li>imageOpacity，默认值：0.2，当zoomType的值为’reverse’时，这个参数用于指定遮罩的透明度。</li>
                    <li>title，默认值：true，在放大窗口中显示标题，值可以为a标记的title值，若无，则为原图的title值。</li>
                    <li>showEffect，默认值：’show’，显示放大窗口时的效果，值可以为: ‘show’ ,’fadein’。</li>
                    <li>hideEffect，默认值：’hide’，隐藏放大窗口时的效果: ‘hide’ ,’fadeout’。</li>
                    <li>fadeinSpeed，默认值：’fast’，放大窗口的渐显速度(选项: ‘fast’,’slow’,’medium’)。</li>
                    <li>fadeoutSpeed，默认值：’slow’，放大窗口的渐隐速度(选项: ‘fast’,’slow’,’medium’)。</li>
                    <li>showPreload，默认值：true，是否显示加载提示Loading zoom(选项: ‘true’,’false’)。</li>
                    <li>preloadText，默认值：’Loading zoom’，自定义加载提示文本。</li>
                    <li>preloadPosition，默认值：’center’，加载提示的位置，值也可以为’bycss’，以通过css指定位置。</li>
                  </ul>
                  <p>大家可以尝试设置上面的参数来达到想要的效果。</p>
                  <h2 id="综述-1"><a href="#综述-1" class="headerlink" title="综述"></a>综述</h2>
                  <p>通过jQZoom这个插件我们可以很方便地实现图片的局部放缩预览，希望对大家有帮助。</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-09 13:04:04" itemprop="dateCreated datePublished" datetime="2015-04-09T13:04:04+08:00">2015-04-09</time>
                </span>
                <span id="/1592.html" class="post-meta-item leancloud_visitors" data-flag-title="jQuery应用四之图片局部放大插件jQZoom" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>2.6k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>2 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1585.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> JavaScript <i class="label-arrow"></i>
                  </a>
                  <a href="/1585.html" class="post-title-link" itemprop="url">jQuery应用三之图片浏览插件LightBox</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>我们肯定用过QQ空间吧，看到QQ空间里面的照片，点一下就会出现一个悬浮框，显示放大后的图片，而且可以点击左右箭头来查看上一张和下一张照片，怎样？这种效果，想不想实现一下。 在这里，我们就引用一个jQuery插件来帮助我们完成这件事情，让我们拭目以待吧</p>
                  <h2 id="在线演示"><a href="#在线演示" class="headerlink" title="在线演示"></a>在线演示</h2>
                  <p>我们首先来在线演示一下效果，然后我们说一下是怎样的实现，点开链接进行预览吧 <a href="http://res.cuiqingcai.com/jqplugins/lightbox/" target="_blank" rel="noopener">在线预览</a></p>
                  <h2 id="插件文件"><a href="#插件文件" class="headerlink" title="插件文件"></a>插件文件</h2>
                  <ul>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/lightbox/js/jquery-1.4.2.min.js" target="_blank" rel="noopener">jquery-1.4.2.min.js</a></li>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/lightbox/js/jquery.notesforlightbox.js" target="_blank" rel="noopener">jquery.notesforlightbox.js</a></li>
                    <li><a href="http://res.cuiqingcai.com/jqplugins/lightbox/css/jquery.notesforlightbox.css" target="_blank" rel="noopener">jquery.notesforlightbox.css</a></li>
                  </ul>
                  <p>其中包含了两个JS文件，一个是jQuery库，另一个就是lightbox插件文件。另外还有一个css文件，主要作用是给图片浏览器规定样式</p>
                  <h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2>
                  <p>我们写一个DEMO，包含了六张图片，用一个ul列表呈现出来</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>notesforlightbox实例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.4.2.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.notesforlightbox.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/jquery.notesforlightbox.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">           <span class="selector-tag">body</span>&#123;<span class="attribute">font-size</span>:<span class="number">13px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span>&#123;<span class="attribute">width</span>:<span class="number">380px</span>;<span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#666</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divTitle</span>&#123;<span class="attribute">padding</span>:<span class="number">5px</span>;<span class="attribute">background-color</span>:<span class="number">#eee</span>;<span class="attribute">font-weight</span>:bold&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span>&#123;<span class="attribute">padding</span>:<span class="number">8px</span>;<span class="attribute">line-height</span>:<span class="number">1.6em</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span>&#123;<span class="attribute">background-color</span>: <span class="number">#777</span>;<span class="attribute">padding</span>: <span class="number">10px</span>;<span class="attribute">width</span>: <span class="number">344px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span> <span class="selector-tag">ul</span>&#123;<span class="attribute">list-style</span>: none;<span class="attribute">padding</span>:<span class="number">0px</span>;<span class="attribute">margin</span>:<span class="number">0px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;<span class="attribute">display</span>: inline;&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span> <span class="selector-tag">ul</span> <span class="selector-tag">img</span>&#123;<span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#444</span>;<span class="attribute">border-width</span>: <span class="number">5px</span>;<span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span> <span class="selector-tag">ul</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">5px</span> solid <span class="number">#fff</span>;<span class="attribute">border-width</span>: <span class="number">5px</span>;<span class="attribute">color</span>: <span class="number">#fff</span>;&#125;</span></span><br><span class="line"><span class="css">           <span class="selector-class">.divFrame</span> <span class="selector-class">.divContent</span> <span class="selector-class">.divPics</span> <span class="selector-tag">ul</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">color</span>: <span class="number">#fff</span>;&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.divPics a'</span>).lightBox(&#123;</span></span><br><span class="line"><span class="actionscript">                overlayBgColor: <span class="string">"#666"</span>, <span class="comment">//浏览图片时的背景色</span></span></span><br><span class="line"><span class="actionscript">                overlayOpacity: <span class="number">0.5</span>, <span class="comment">//背景色的透明度</span></span></span><br><span class="line"><span class="actionscript">                containerResizeSpeed: <span class="number">600</span> <span class="comment">//图片切换时的速度;</span></span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              我的相册</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divPics"</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img01.jpg"</span> <span class="attr">title</span>=<span class="string">"第1篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img01.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img02.jpg"</span> <span class="attr">title</span>=<span class="string">"第2篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img02.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img03.jpg"</span> <span class="attr">title</span>=<span class="string">"第3篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img03.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img04.jpg"</span> <span class="attr">title</span>=<span class="string">"第4篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img04.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img05.jpg"</span> <span class="attr">title</span>=<span class="string">"第5篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img05.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"images/img06.jpg"</span> <span class="attr">title</span>=<span class="string">"第6篇风景图片"</span>&gt;</span></span><br><span class="line">                             <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img06.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>其中images文件夹中存在了六张图片，其中每一个中的超链接的href链接是一张图片，超链接中还包含了img标签。这样可以保证点击图片的时候可以呼出一张大图。</p>
                  <h2 id="功能简析"><a href="#功能简析" class="headerlink" title="功能简析"></a>功能简析</h2>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.divPics a'</span>).lightBox(&#123;</span><br><span class="line">                overlayBgColor: <span class="string">"#666"</span>, <span class="comment">//浏览图片时的背景色</span></span><br><span class="line">                overlayOpacity: <span class="number">0.5</span>, <span class="comment">//背景色的透明度</span></span><br><span class="line">                containerResizeSpeed: <span class="number">600</span> <span class="comment">//图片切换时的速度;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>我们取到了所有的超链接元素，然后调用了lightBox方法，参数是一系列集合，在这里定义了</p>
                  <figure class="highlight dts">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="symbol">overlayBgColor:</span> <span class="string">"#666"</span>, <span class="comment">//浏览图片时的背景色</span></span><br><span class="line"><span class="symbol">overlayOpacity:</span> <span class="number">0.5</span>, <span class="comment">//背景色的透明度</span></span><br><span class="line"><span class="symbol">containerResizeSpeed:</span> <span class="number">600</span> <span class="comment">//图片切换时的速度;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里给出所有的<strong>参数说明</strong></p>
                  <p>名称</p>
                  <p>默认值</p>
                  <p>说明</p>
                  <p>overlayBgColor</p>
                  <h1 id="000"><a href="#000" class="headerlink" title="000"></a>000</h1>
                  <p>背景色</p>
                  <p>overlayOpacity</p>
                  <p>0.8</p>
                  <p>背景色透明度</p>
                  <p>fixedNavigation</p>
                  <p>false</p>
                  <p>是否始终显示上一张、下一张按钮</p>
                  <p>imageLoading</p>
                  <p>images/lightbox-ico-loading.gif</p>
                  <p>加载图片时显示的图片</p>
                  <p>imageBtnPrev</p>
                  <p>images/lightbox-btn-prev.gif</p>
                  <p>上一张按钮的图片</p>
                  <p>imageBtnNext</p>
                  <p>images/lightbox-btn-next.gif</p>
                  <p>下一张按钮的图片</p>
                  <p>imageBtnClose</p>
                  <p>images/lightbox-btn-close.gif</p>
                  <p>关闭按钮的图片</p>
                  <p>imageBlank</p>
                  <p>images/lightbox-blank.gif</p>
                  <p>上一张、下一张按钮周围空白部分的图片（默认透明）</p>
                  <p>containerBorderSize</p>
                  <p>10</p>
                  <p>展示图片的边框宽度</p>
                  <p>containerResizeSpeed</p>
                  <p>400</p>
                  <p>展示过程切换的速度</p>
                  <p>txtImage</p>
                  <p>Image</p>
                  <p>页码辅助文字</p>
                  <p>txtOf</p>
                  <p>of</p>
                  <p>页码辅助文字</p>
                  <p>keyToClose</p>
                  <p>c</p>
                  <p>关闭展示的快捷键</p>
                  <p>keyToPrev</p>
                  <p>p</p>
                  <p>上一张的快捷键</p>
                  <p>keyToNext</p>
                  <p>n</p>
                  <p>下一张的快捷键</p>
                  <p>值得注意的地方是</p>
                  <p>imageLoading</p>
                  <p>‘images/lightbox-ico-loading.gif’</p>
                  <p>加载图片时显示的图片</p>
                  <p>imageBtnPrev</p>
                  <p>‘images/lightbox-btn-prev.gif’</p>
                  <p>上一张按钮的图片</p>
                  <p>imageBtnNext</p>
                  <p>‘images/lightbox-btn-next.gif’</p>
                  <p>下一张按钮的图片</p>
                  <p>imageBtnClose</p>
                  <p>‘images/lightbox-btn-close.gif’</p>
                  <p>关闭按钮的图片</p>
                  <p>这几张张图片，我们如果不定义，则会使用JS中默认的定义路径 在 <a href="http://res.cuiqingcai.com/jqplugins/lightbox/js/jquery.notesforlightbox.js" target="_blank" rel="noopener">jquery.notesforlightbox.js</a> 中，如下程序便实现了上一张图片和下一张图片等按钮的定义</p>
                  <figure class="highlight groovy">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="string">imageLoading:</span> <span class="string">'images/loading.gif'</span>,</span><br><span class="line"><span class="string">imageBtnPrev:</span> <span class="string">'images/prev.png'</span>,</span><br><span class="line"><span class="string">imageBtnNext:</span> <span class="string">'images/next.png'</span>,</span><br><span class="line"><span class="string">imageBtnClose:</span> <span class="string">'images/close.png'</span>,</span><br><span class="line"><span class="string">imageBlank:</span> <span class="string">'images/lightbox-blank.gif'</span>,</span><br><span class="line"><span class="string">imageBtnBottomPrev:</span> <span class="string">'images/btm_prev.gif'</span>,</span><br><span class="line"><span class="string">imageBtnBottomNext:</span> <span class="string">'images/btm_next.gif'</span>,</span><br><span class="line"><span class="string">imageBtnPlay:</span> <span class="string">'images/start.png'</span>,</span><br><span class="line"><span class="string">imageBtnStop:</span> <span class="string">'images/pause.png'</span>,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>所以，如果发现图片不正常显示可以检查一下这里的路径设置问题</p>
                  <h2 id="代码下载"><a href="#代码下载" class="headerlink" title="代码下载"></a>代码下载</h2>
                  <p><a href="https://github.com/cqcre/lightbox" target="_blank" rel="noopener">源码下载</a> 代码已部署在GitHub，可以下载查看</p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>通过这个插件我们可以方便地实现图片的加载预览，效果也比较酷炫，希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-07 22:59:58" itemprop="dateCreated datePublished" datetime="2015-04-07T22:59:58+08:00">2015-04-07</time>
                </span>
                <span id="/1585.html" class="post-meta-item leancloud_visitors" data-flag-title="jQuery应用三之图片浏览插件LightBox" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>4.3k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>4 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1573.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> JavaScript <i class="label-arrow"></i>
                  </a>
                  <a href="/1573.html" class="post-title-link" itemprop="url">jQuery应用二之邮箱下拉列表自动补全</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>我想大家一定见到过，在某个网站填写邮箱的时候，还没有填写完，就会出现一系列下拉列表，帮你自动补全邮箱的功能。现在我们就用jQuery来实现一下。 博主原创代码，如有代码写的不完善的地方还望大家多多指教。</p>
                  <h2 id="功能简述"><a href="#功能简述" class="headerlink" title="功能简述"></a>功能简述</h2>
                  <ul>
                    <li>填写邮箱名字，出现下拉列表，自动补全邮箱</li>
                    <li>点击上下按键，选取下拉列表邮箱</li>
                    <li>按回车键，选中列表内容，隐藏下拉列表</li>
                    <li>鼠标经过，下拉列表选项设置为高亮</li>
                    <li>鼠标点击，选中下拉列表选项，隐藏下拉列表</li>
                  </ul>
                  <h2 id="在线演示"><a href="#在线演示" class="headerlink" title="在线演示"></a>在线演示</h2>
                  <p>在此直接插入一个iframe进行演示 链接为 <a href="http://res.cuiqingcai.com/jqplugins/emailcomplete/" target="_blank" rel="noopener">在线演示</a></p>
                  <h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2>
                  <p>HTML代码很简单，我们就一个简单的输入框，然后一个ul标签，在内部可以放好多li标签。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"css/style.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">		   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">placeholder</span>=<span class="string">"请输入您的邮箱"</span>/&gt;</span></span><br><span class="line">		   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是HTML代码</p>
                  <h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2>
                  <p>在CSS中，定义也比较简单，其中有一个 lilight 的 class，可以使背景变色，通过 remove 和 add 这个 class，我们可以轻松地实现下拉列表元素是否选中的区分。 CSS所有样式如下</p>
                  <figure class="highlight scss">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">	<span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.list</span>&#123;</span><br><span class="line">	<span class="attribute">list-style</span>:none;</span><br><span class="line">	<span class="attribute">padding</span>:<span class="number">0px</span>;</span><br><span class="line">	<span class="attribute">margin</span>:<span class="number">0px</span>;</span><br><span class="line">	<span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.list</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">	<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#EEE</span>;</span><br><span class="line">	<span class="attribute">width</span>:<span class="number">180px</span>;</span><br><span class="line">	<span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">margin</span>:<span class="number">0px</span>;</span><br><span class="line">	<span class="attribute">text-overflow</span>:ellipsis;  <span class="comment">//溢出时变为省略</span></span><br><span class="line">	<span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lilight</span>&#123;</span><br><span class="line">	<span class="attribute">background-color</span>:<span class="number">#fafafa</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是CSS代码</p>
                  <h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2>
                  <p>我们引入 jQuery 来实现对元素的操作，实现了按键和鼠标监听，代码如下</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="constructor">$(<span class="params">function</span>()</span>&#123;</span><br><span class="line">		<span class="comment">//声明所有的电子邮件变量</span></span><br><span class="line">		var mail=<span class="keyword">new</span> <span class="constructor">Array(<span class="string">"sina.com.cn"</span>,<span class="string">"126.com"</span>,<span class="string">"163.com"</span>,<span class="string">"gmail.com"</span>,<span class="string">"qq.com"</span>,<span class="string">"vip.qq.com"</span>,<span class="string">"hotmail.com"</span>,<span class="string">"sohu.com"</span>,<span class="string">"139.com"</span>,<span class="string">"vip.sina.com"</span>,<span class="string">"cuiqingcai.com"</span>)</span>;</span><br><span class="line">		<span class="comment">//生成一个个li，并加入到ul中</span></span><br><span class="line">		for(var i=<span class="number">0</span>;i&lt;mail.length;i++)&#123;</span><br><span class="line">			var liElement=<span class="constructor">$(<span class="string">"&lt;li class=\"autoli\"&gt;&lt;span class=\"ex\"&gt;&lt;/span&gt;&lt;span class=\"at\"&gt;@&lt;/span&gt;&lt;span class=\"tail\"&gt;"</span>+<span class="params">mail</span>[<span class="params">i</span>]+<span class="string">"&lt;/span&gt;&lt;/li&gt;"</span>)</span>;</span><br><span class="line">			liElement.append<span class="constructor">To(<span class="string">"ul.list"</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//首先让list隐藏起来</span></span><br><span class="line">		<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.hide<span class="literal">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="constructor">$(<span class="string">"#email"</span>)</span>.keyup(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">			<span class="comment">//键入的内容不是上下箭头和回车</span></span><br><span class="line">			<span class="keyword">if</span>(event.keyCode!=<span class="number">38</span>&amp;&amp;event.keyCode!=<span class="number">40</span>&amp;&amp;event.keyCode!=<span class="number">13</span>)&#123;</span><br><span class="line">				<span class="comment">//如果输入的值不是空或者不以空格开头</span></span><br><span class="line">				<span class="keyword">if</span>($.trim(<span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>)!=<span class="string">""</span>&amp;&amp; $.trim(<span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>).<span class="keyword">match</span>(/^@/)==null)&#123;</span><br><span class="line">					<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.show<span class="literal">()</span>;</span><br><span class="line">					<span class="comment">//如果当前有已经高亮的下拉选项卡，那么将其移除</span></span><br><span class="line">					<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li:visible"</span>)</span>.has<span class="constructor">Class(<span class="string">"lilight"</span>)</span>)&#123;</span><br><span class="line">						<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.remove<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">//如果还存在下拉选项卡，那么将其高亮</span></span><br><span class="line">					<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li:visible"</span>)</span>)&#123;</span><br><span class="line">						<span class="constructor">$(<span class="string">"ul.list li:visible:eq(0)"</span>)</span>.add<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">//否则不进行显示</span></span><br><span class="line">					<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.hide<span class="literal">()</span>;</span><br><span class="line">					<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.remove<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//输入的内容还没有包括@符号</span></span><br><span class="line">				<span class="keyword">if</span>($.trim(<span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>).<span class="keyword">match</span>(/.*@/)==null)&#123;</span><br><span class="line">					<span class="constructor">$(<span class="string">".list li .ex"</span>)</span>.text(<span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>);</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">//输入的符号已经包含了@</span></span><br><span class="line">					var str = <span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>;</span><br><span class="line">					var strs = str.split(<span class="string">"@"</span>);</span><br><span class="line">					<span class="constructor">$(<span class="string">".list li .ex"</span>)</span>.text(strs<span class="literal">[<span class="number">0</span>]</span>);</span><br><span class="line">					<span class="keyword">if</span>(<span class="constructor">$(<span class="params">this</span>)</span>.<span class="keyword">val</span><span class="literal">()</span>.length&gt;=strs<span class="literal">[<span class="number">0</span>]</span>.length+<span class="number">1</span>)&#123;</span><br><span class="line">						tail=str.substr(strs<span class="literal">[<span class="number">0</span>]</span>.length+<span class="number">1</span>);</span><br><span class="line">						<span class="constructor">$(<span class="string">".list li .tail"</span>)</span>.each(<span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">							<span class="comment">//如果数组中的元素是以文本中的后缀开头，那么就显示，否则不显示</span></span><br><span class="line">							<span class="keyword">if</span>(!(<span class="constructor">$(<span class="params">this</span>)</span>.text<span class="literal">()</span>.<span class="keyword">match</span>(tail)!=null&amp;&amp;<span class="constructor">$(<span class="params">this</span>)</span>.text<span class="literal">()</span>.index<span class="constructor">Of(<span class="params">tail</span>)</span>==<span class="number">0</span>))&#123;</span><br><span class="line">								<span class="comment">//隐藏其他的li</span></span><br><span class="line">								<span class="constructor">$(<span class="params">this</span>)</span>.parent<span class="literal">()</span>.hide<span class="literal">()</span>;</span><br><span class="line">							&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">								<span class="comment">//显示所在的li</span></span><br><span class="line">								<span class="constructor">$(<span class="params">this</span>)</span>.parent<span class="literal">()</span>.show<span class="literal">()</span>;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//按了回车时，将当前选中的元素写入到文本框中</span></span><br><span class="line">			<span class="keyword">if</span>(event.keyCode==<span class="number">13</span>)&#123;</span><br><span class="line">				<span class="constructor">$(<span class="string">"#email"</span>)</span>.<span class="keyword">val</span>(<span class="constructor">$(<span class="string">"ul.list li.lilight:visible"</span>)</span>.text<span class="literal">()</span>);</span><br><span class="line">				<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.hide<span class="literal">()</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//监听上下方向键</span></span><br><span class="line">		<span class="constructor">$(<span class="string">"#email"</span>)</span>.keydown(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">			<span class="comment">//下方向键按下了</span></span><br><span class="line">			<span class="keyword">if</span>(event.keyCode==<span class="number">40</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.is(<span class="string">".lilight"</span>))&#123;</span><br><span class="line">					<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li.lilight"</span>)</span>.next<span class="constructor">All()</span>.is(<span class="string">"li:visible"</span>))&#123;</span><br><span class="line">						<span class="constructor">$(<span class="string">"ul.list li.lilight"</span>)</span>.remove<span class="constructor">Class(<span class="string">"lilight"</span>)</span>.next(<span class="string">"li"</span>).add<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//下方向键按下了</span></span><br><span class="line">			<span class="keyword">if</span>(event.keyCode==<span class="number">38</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.is(<span class="string">".lilight"</span>))&#123;</span><br><span class="line">					<span class="keyword">if</span>(<span class="constructor">$(<span class="string">"ul.list li.lilight"</span>)</span>.prev<span class="constructor">All()</span>.is(<span class="string">"li:visible"</span>))&#123;</span><br><span class="line">						<span class="constructor">$(<span class="string">"ul.list li.lilight"</span>)</span>.remove<span class="constructor">Class(<span class="string">"lilight"</span>)</span>.prev(<span class="string">"li"</span>).add<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//当鼠标点击某个下拉项时，选中该项，下拉列表隐藏</span></span><br><span class="line">		<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.click(<span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">			<span class="constructor">$(<span class="string">"#email"</span>)</span>.<span class="keyword">val</span>(<span class="constructor">$(<span class="params">this</span>)</span>.text<span class="literal">()</span>);</span><br><span class="line">			<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.hide<span class="literal">()</span>;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//当鼠标划过某个下拉项时，选中该项，下拉列表隐藏</span></span><br><span class="line">		<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.hover(<span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">			<span class="constructor">$(<span class="string">"ul.list li"</span>)</span>.remove<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">			<span class="constructor">$(<span class="params">this</span>)</span>.add<span class="constructor">Class(<span class="string">"lilight"</span>)</span>;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//当鼠标点击其他位置，下拉列表隐藏</span></span><br><span class="line">		<span class="constructor">$(<span class="params">document</span>)</span>.click(<span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">			<span class="constructor">$(<span class="string">"ul.list"</span>)</span>.hide<span class="literal">()</span>;</span><br><span class="line">		&#125;);			</span><br><span class="line">	&#125;);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是 jQuery 代码</p>
                  <h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2>
                  <p><a href="https://github.com/cqcre/EmailComplete" target="_blank" rel="noopener">源码下载</a></p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>其实还有一个比较强大的插件，叫autocomplete，同样可以实现下拉列表的自动补全，功能更加完善，如果大家有兴趣可以去试一下。不过感觉最常用的就是邮箱自动补齐，而且直接用 jQuery 就可以比较方便地实现，所以博主就没有使用autocomplete插件，而是自己写了一下，一来练习一下，二来对这种功能的实现了解得更加透彻。 大家也可以尝试下，希望小伙伴们有帮助，加油！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-06 00:55:23" itemprop="dateCreated datePublished" datetime="2015-04-06T00:55:23+08:00">2015-04-06</time>
                </span>
                <span id="/1573.html" class="post-meta-item leancloud_visitors" data-flag-title="jQuery应用二之邮箱下拉列表自动补全" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>4.2k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>4 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1544.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> JavaScript <i class="label-arrow"></i>
                  </a>
                  <a href="/1544.html" class="post-title-link" itemprop="url">jQuery应用一之验证插件validate的使用</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>validate是一个用来验证表单提交的插件，应用十分广泛，具有如下的几个功能</p>
                  <ul>
                    <li>自带了基本的验证规则</li>
                    <li>提供了丰富的验证信息提示功能</li>
                    <li>多种事件触发验证</li>
                    <li>自定义验证规则</li>
                  </ul>
                  <p>下面我们就来感受一下这个插件的强大之处吧</p>
                  <h2 id="插件下载"><a href="#插件下载" class="headerlink" title="插件下载"></a>插件下载</h2>
                  <p>在这里我们需要用到的插件文件有</p>
                  <ul>
                    <li><a href="http://res.cuiqingcai.com/js/jquery.validate.js" target="_blank" rel="noopener">jquery.validate.js</a> </li>
                    <li><a href="http://res.cuiqingcai.com/js/jquery.validate.messages_cn.js" target="_blank" rel="noopener">jquery.validate.messages_cn.js</a></li>
                    <li><a href="http://res.cuiqingcai.com/js/jquery.min.js" target="_blank" rel="noopener">jquery.min.js</a></li>
                  </ul>
                  <p>一个是表单验证的主文件，另一个是设置中文提示的文件。</p>
                  <h2 id="实例引入"><a href="#实例引入" class="headerlink" title="实例引入"></a>实例引入</h2>
                  <p>我们先用一个小例子来感受一下使用 validate 插件的便捷之处，这个例子中加入了表单合法性验证和错误提示，代码如下</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>validate验证插件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.min.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.messages_cn.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://res.cuiqingcai.com/jqplugins/validate/style.css"</span>&gt;</span><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#frmV"</span>).validate(</span></span><br><span class="line">              &#123;</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*自定义验证规则*/</span></span></span><br><span class="line">                  rules: &#123;</span><br><span class="line"><span class="actionscript">                      username: &#123; required: <span class="literal">true</span>, minlength: <span class="number">6</span> &#125;,</span></span><br><span class="line"><span class="actionscript">                      email: &#123; required: <span class="literal">true</span>, email: <span class="literal">true</span> &#125;</span></span><br><span class="line">                  &#125;,</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*错误提示位置*/</span></span></span><br><span class="line"><span class="actionscript">                  errorPlacement: <span class="function"><span class="keyword">function</span><span class="params">(error, element)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                      error.appendTo(element.siblings(<span class="string">"span"</span>));</span></span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"frmV"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              请输入下列资料</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              用户名：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              邮箱：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divBtn"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sbtUser"</span> <span class="attr">type</span>=<span class="string">"submit"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">class</span>=<span class="string">"btn"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果如下 在这里我们定义了 rules 来控制表单的合法性，通过 errorPlacement 来控制错误的输出位置。</p>
                  <h2 id="校验规则"><a href="#校验规则" class="headerlink" title="校验规则"></a>校验规则</h2>
                  <p>下面我们详细说一下关于rules的相关知识，将校检规则总结如下</p>
                  <p>序号</p>
                  <p>规则</p>
                  <p>描述</p>
                  <p>1</p>
                  <p>required:true</p>
                  <p>必须输入的字段。</p>
                  <p>2</p>
                  <p>remote:”check.php”</p>
                  <p>使用 ajax 方法调用 check.php 验证输入值。</p>
                  <p>3</p>
                  <p>email:true</p>
                  <p>必须输入正确格式的电子邮件。</p>
                  <p>4</p>
                  <p>url:true</p>
                  <p>必须输入正确格式的网址。</p>
                  <p>5</p>
                  <p>date:true</p>
                  <p>必须输入正确格式的日期。日期校验 ie6 出错，慎用。</p>
                  <p>6</p>
                  <p>dateISO:true</p>
                  <p>必须输入正确格式的日期（ISO），例如：2009-06-23，1998/01/22。只验证格式，不验证有效性。</p>
                  <p>7</p>
                  <p>number:true</p>
                  <p>必须输入合法的数字（负数，小数）。</p>
                  <p>8</p>
                  <p>digits:true</p>
                  <p>必须输入整数。</p>
                  <p>9</p>
                  <p>creditcard:</p>
                  <p>必须输入合法的信用卡号。</p>
                  <p>10</p>
                  <p>equalTo:”#field”</p>
                  <p>输入值必须和 #field 相同。</p>
                  <p>11</p>
                  <p>accept:</p>
                  <p>输入拥有合法后缀名的字符串（上传文件的后缀）。</p>
                  <p>12</p>
                  <p>maxlength:5</p>
                  <p>输入长度最多是 5 的字符串（汉字算一个字符）。</p>
                  <p>13</p>
                  <p>minlength:10</p>
                  <p>输入长度最小是 10 的字符串（汉字算一个字符）。</p>
                  <p>14</p>
                  <p>rangelength:[5,10]</p>
                  <p>输入长度必须介于 5 和 10 之间的字符串（汉字算一个字符）。</p>
                  <p>15</p>
                  <p>range:[5,10]</p>
                  <p>输入值必须介于 5 和 10 之间。</p>
                  <p>16</p>
                  <p>max:5</p>
                  <p>输入值不能大于 5。</p>
                  <p>17</p>
                  <p>min:10</p>
                  <p>输入值不能小于 10。</p>
                  <p>比如我们针对 email 这个表单就可以定义为</p>
                  <figure class="highlight yaml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="attr">email:</span> <span class="string">&#123;</span> <span class="attr">required:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">email:</span> <span class="literal">true</span> <span class="string">&#125;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>针对url的这个输入表单就可以定义为</p>
                  <figure class="highlight yaml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="attr">url:</span> <span class="string">&#123;</span> <span class="attr">required:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">url:</span> <span class="literal">true</span> <span class="string">&#125;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是校验规则的相关内容。</p>
                  <h2 id="消息提示"><a href="#消息提示" class="headerlink" title="消息提示"></a>消息提示</h2>
                  <p>在 jquery.validate.js 这个文件中，定义了默认的消息提示，不过它是英文的提示，默认的提示如下</p>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="selector-tag">messages</span>: &#123;</span><br><span class="line">    <span class="attribute">required</span>: <span class="string">"This field is required."</span>,</span><br><span class="line">    remote: <span class="string">"Please fix this field."</span>,</span><br><span class="line">    email: <span class="string">"Please enter a valid email address."</span>,</span><br><span class="line">    url: <span class="string">"Please enter a valid URL."</span>,</span><br><span class="line">    date: <span class="string">"Please enter a valid date."</span>,</span><br><span class="line">    dateISO: <span class="string">"Please enter a valid date (ISO)."</span>,</span><br><span class="line">    dateDE: <span class="string">"Bitte geben Sie ein gültiges Datum ein."</span>,</span><br><span class="line">    number: <span class="string">"Please enter a valid number."</span>,</span><br><span class="line">    numberDE: <span class="string">"Bitte geben Sie eine Nummer ein."</span>,</span><br><span class="line">    digits: <span class="string">"Please enter only digits"</span>,</span><br><span class="line">    creditcard: <span class="string">"Please enter a valid credit card number."</span>,</span><br><span class="line">    equalTo: <span class="string">"Please enter the same value again."</span>,</span><br><span class="line">    accept: <span class="string">"Please enter a value with a valid extension."</span>,</span><br><span class="line">    maxlength: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter no more than &#123;0&#125; characters."</span>),</span><br><span class="line">    minlength: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter at least &#123;0&#125; characters."</span>),</span><br><span class="line">    rangelength: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter a value between &#123;0&#125; and &#123;1&#125; characters long."</span>),</span><br><span class="line">    range: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter a value between &#123;0&#125; and &#123;1&#125;."</span>),</span><br><span class="line">    max: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter a value less than or equal to &#123;0&#125;."</span>),</span><br><span class="line">    min: $.validator.<span class="built_in">format</span>(<span class="string">"Please enter a value greater than or equal to &#123;0&#125;."</span>)</span><br><span class="line">&#125;,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>比如，如果遇到 email 校验有问题，那么便会提示</p>
                  <figure class="highlight ebnf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="attribute">Please enter a valid email address</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>不过我们通过引入 jquery.validate.messages_cn.js 这个文件，写入了如下代码，将默认的提示修改为中文</p>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="selector-tag">jQuery</span><span class="selector-class">.extend</span>(<span class="selector-tag">jQuery</span><span class="selector-class">.validator</span><span class="selector-class">.messages</span>, &#123;</span><br><span class="line">        <span class="attribute">required</span>: <span class="string">"必选字段"</span>,</span><br><span class="line">		remote: <span class="string">"请修正该字段"</span>,</span><br><span class="line">		email: <span class="string">"请输入正确格式的电子邮件"</span>,</span><br><span class="line">		url: <span class="string">"请输入合法的网址"</span>,</span><br><span class="line">		date: <span class="string">"请输入合法的日期"</span>,</span><br><span class="line">		dateISO: <span class="string">"请输入合法的日期 (ISO)."</span>,</span><br><span class="line">		number: <span class="string">"请输入合法的数字"</span>,</span><br><span class="line">		digits: <span class="string">"只能输入整数"</span>,</span><br><span class="line">		creditcard: <span class="string">"请输入合法的信用卡号"</span>,</span><br><span class="line">		equalTo: <span class="string">"请再次输入相同的值"</span>,</span><br><span class="line">		accept: <span class="string">"请输入拥有合法后缀名的字符串"</span>,</span><br><span class="line">		maxlength: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个长度最多是 &#123;0&#125; 的字符串"</span>),</span><br><span class="line">		minlength: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个长度最少是 &#123;0&#125; 的字符串"</span>),</span><br><span class="line">		rangelength: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个长度介于 &#123;0&#125; 和 &#123;1&#125; 之间的字符串"</span>),</span><br><span class="line">		range: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个介于 &#123;0&#125; 和 &#123;1&#125; 之间的值"</span>),</span><br><span class="line">		max: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个最大为 &#123;0&#125; 的值"</span>),</span><br><span class="line">		min: jQuery.<span class="built_in">format</span>(<span class="string">"请输入一个最小为 &#123;0&#125; 的值"</span>)</span><br><span class="line">&#125;);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>当然，以上的设置都是默认的提示，我们还可以通过 messages 来设置提示，举一个小例子，加入 messages 选项</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>validate验证插件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.min.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.messages_cn.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://res.cuiqingcai.com/jqplugins/validate/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#frmV"</span>).validate(</span></span><br><span class="line">              &#123;</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*自定义验证规则*/</span></span></span><br><span class="line">                  rules: &#123;</span><br><span class="line"><span class="actionscript">					  username: &#123; required: <span class="literal">true</span>, minlength: <span class="number">6</span> &#125;,</span></span><br><span class="line"><span class="actionscript">                      email: &#123; required: <span class="literal">true</span>, email: <span class="literal">true</span> &#125;</span></span><br><span class="line">                  &#125;,</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*错误提示位置*/</span></span></span><br><span class="line"><span class="actionscript">                  errorPlacement: <span class="function"><span class="keyword">function</span><span class="params">(error, element)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                      error.appendTo(element.siblings(<span class="string">"span"</span>));</span></span><br><span class="line">                  &#125;,</span><br><span class="line">				  messages: &#123;</span><br><span class="line"><span class="actionscript">					  username: &#123; required: <span class="string">"请输入姓名"</span>, minlength: <span class="string">"长度不可小于6"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">                      email: &#123; required: <span class="string">"请输入电子邮件"</span>, email: <span class="string">"请输入正确格式"</span> &#125;</span></span><br><span class="line">				  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"frmV"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              请输入下列资料</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              用户名：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              邮箱：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divBtn"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sbtUser"</span> <span class="attr">type</span>=<span class="string">"submit"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">class</span>=<span class="string">"btn"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果如下</p>
                  <h2 id="失败验证"><a href="#失败验证" class="headerlink" title="失败验证"></a>失败验证</h2>
                  <figure class="highlight xquery">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">  errorPlacement: <span class="keyword">function</span><span class="built_in">(error</span>, <span class="keyword">element</span>) &#123;</span><br><span class="line">error.appendTo(<span class="keyword">element</span>.siblings("span"));</span><br><span class="line">&#125;,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>我们用 errorPlacement 来处理验证失败后的处理，方法有两个参数，一个是error，一个是element。 其中error是字符串，保存了messages中返回的错误信息，element是验证失败的input元素。 比如上面这一句</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">error.append<span class="constructor">To(<span class="params">element</span>.<span class="params">siblings</span>(<span class="string">"span"</span>)</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>就代表把错误加入到input元素同级的span元素中，从而在<span>标签内部显示错误的内容。 其他的情况我们可以灵活处理。</p>
                  <h2 id="成功验证"><a href="#成功验证" class="headerlink" title="成功验证"></a>成功验证</h2>
                  <p>有失败就有成功，在这里我们可以用一个函数来实现成功的验证</p>
                  <figure class="highlight subunit">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">success: </span>function(label) &#123;</span><br><span class="line">label.html("OK");</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这里的label指的是发生错误时那个标签，就是上面例子中的span，通过html()方法可以实现标签内容的变化。例如下面的例子</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>validate验证插件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.min.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.messages_cn.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://res.cuiqingcai.com/jqplugins/validate/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#frmV"</span>).validate(</span></span><br><span class="line">              &#123;</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*自定义验证规则*/</span></span></span><br><span class="line">                  rules: &#123;</span><br><span class="line"><span class="actionscript">					  username: &#123; required: <span class="literal">true</span>, minlength: <span class="number">6</span> &#125;,</span></span><br><span class="line"><span class="actionscript">                      email: &#123; required: <span class="literal">true</span>, email: <span class="literal">true</span> &#125;</span></span><br><span class="line">                  &#125;,</span><br><span class="line"><span class="actionscript">                  <span class="comment">/*错误提示位置*/</span></span></span><br><span class="line"><span class="actionscript">                  errorPlacement: <span class="function"><span class="keyword">function</span><span class="params">(error, element)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                      error.appendTo(element.siblings(<span class="string">"span"</span>));</span></span><br><span class="line">                  &#125;,</span><br><span class="line">				  messages: &#123;</span><br><span class="line"><span class="actionscript">					  username: &#123; required: <span class="string">"请输入姓名"</span>, minlength: <span class="string">"长度不可小于6"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">                      email: &#123; required: <span class="string">"请输入电子邮件"</span>, email: <span class="string">"请输入正确格式"</span> &#125;</span></span><br><span class="line">				  &#125;,</span><br><span class="line"><span class="actionscript">				  success: <span class="function"><span class="keyword">function</span><span class="params">(label)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">					  label.html(<span class="string">"OK"</span>);</span></span><br><span class="line">				  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"frmV"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              请输入下列资料</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              用户名：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>呵呵<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              邮箱：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divBtn"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sbtUser"</span> <span class="attr">type</span>=<span class="string">"submit"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">class</span>=<span class="string">"btn"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>上面就是验证成功之后的效果，在相应提示的地方会显示OK。</p>
                  <h2 id="异步验证"><a href="#异步验证" class="headerlink" title="异步验证"></a>异步验证</h2>
                  <p>有时候我们需要用到异步验证，我们可以在rules中加入remote进行远程验证，例子如下</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>validate验证插件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.min.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"http://res.cuiqingcai.com/js/jquery.validate.messages_cn.js"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://res.cuiqingcai.com/jqplugins/validate/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#frmV"</span>).validate(</span></span><br><span class="line">				&#123;</span><br><span class="line"><span class="actionscript">					<span class="comment">/*自定义验证规则*/</span></span></span><br><span class="line">					rules: &#123; </span><br><span class="line"><span class="actionscript">						username: &#123; required: <span class="literal">true</span>, minlength: <span class="number">6</span> &#125;,</span></span><br><span class="line">						phone: &#123; </span><br><span class="line"><span class="actionscript">							required: <span class="literal">true</span>, </span></span><br><span class="line">							remote:&#123;</span><br><span class="line"><span class="actionscript">								url: <span class="string">"check_phone.php"</span>,     <span class="comment">//后台处理程序</span></span></span><br><span class="line"><span class="actionscript">								type: <span class="string">"post"</span>,               <span class="comment">//数据发送方式</span></span></span><br><span class="line"><span class="actionscript">								dataType: <span class="string">"json"</span>,           <span class="comment">//接受数据格式   </span></span></span><br><span class="line"><span class="actionscript">								data: &#123;                     <span class="comment">//要传递的数据</span></span></span><br><span class="line"><span class="actionscript">									phone: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">										<span class="keyword">return</span> $(<span class="string">"#phone"</span>).val();</span></span><br><span class="line">									&#125;</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;,</span><br><span class="line"><span class="actionscript">					<span class="comment">/*错误提示位置*/</span></span></span><br><span class="line"><span class="actionscript">					errorPlacement: <span class="function"><span class="keyword">function</span><span class="params">(error, element)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">					  error.appendTo(element.siblings(<span class="string">"span"</span>));</span></span><br><span class="line">					&#125;,</span><br><span class="line">					messages: &#123;</span><br><span class="line"><span class="actionscript">					  username: &#123; required: <span class="string">"请输入姓名"</span>, minlength: <span class="string">"长度不可小于6"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">					  phone: &#123; required: <span class="string">"请输入电话"</span>, remote: <span class="string">"请输入正确格式"</span> &#125;</span></span><br><span class="line">					&#125;,</span><br><span class="line"><span class="actionscript">					success: <span class="function"><span class="keyword">function</span><span class="params">(label)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">					  label.html(<span class="string">"OK"</span>);</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"frmV"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divFrame"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divTitle"</span>&gt;</span></span><br><span class="line">              请输入下列资料</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divContent"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              用户名：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              电话号码：<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">name</span>=<span class="string">"phone"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"txt"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>*<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divBtn"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sbtUser"</span> <span class="attr">type</span>=<span class="string">"submit"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">class</span>=<span class="string">"btn"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>PHP处理程序，注意这里的返回值只能是true或者false，并且需要加引号。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> </span></span><br><span class="line"><span class="php">	$phone = $_POST[<span class="string">'phone'</span>];</span></span><br><span class="line"><span class="php">	<span class="keyword">if</span>((strlen($phone) != <span class="number">11</span>) || !(preg_match(<span class="string">"/13[0123456789]&#123;1&#125;\d&#123;8&#125;|15[012356789]\d&#123;8&#125;|18[0123456789]\d&#123;8&#125;|17[0678]\d&#123;8&#125;|14[57]\d&#123;8&#125;/"</span>,$phone)))&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"false"</span>;</span></span><br><span class="line"><span class="php">	 &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"true"</span>;</span></span><br><span class="line"><span class="php">	 &#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>演示如下 上面就是进行ajax异步验证的处理方式</p>
                  <h2 id="自定义方法"><a href="#自定义方法" class="headerlink" title="自定义方法"></a>自定义方法</h2>
                  <p>有时候我们需要自定义一些验证方法，我们就需要用到addMethod方法，介绍如下 addMethod(name,method,message)方法</p>
                  <blockquote>
                    <p>参数name 是添加的方法的名字 参数method是一个函数,接收三个参数(value,element,param) value 是元素的值,element是元素本身 param是参数,我们可以用addMethod 来添加除built-in Validation methods 之外的验证方法</p>
                  </blockquote>
                  <p>例如手机号码的验证如下</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$.validator.addMethod(<span class="string">"phone"</span>,function(value,element,params)&#123;</span><br><span class="line">		 <span class="keyword">if</span>((value.length != <span class="number">11</span>) || (!value.match(/^(<span class="number">13</span>[<span class="number">0</span><span class="number">-9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">17</span>[<span class="number">0</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>]|<span class="number">18</span>[<span class="number">0</span><span class="number">-9</span>])\d&#123;<span class="number">8</span>&#125;$/)))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,<span class="string">"请输入正确的手机号"</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>使用时如下</p>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="selector-tag">rules</span>:&#123;</span><br><span class="line">			<span class="attribute">phone</span>:&#123;</span><br><span class="line">				required:true,phone:true</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>有一个字段,只能输一个字母,范围是a-f,写法如下</p>
                  <figure class="highlight cs">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$.validator.addMethod(“af”,function(<span class="keyword">value</span>,element,<span class="keyword">params</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">value</span>.length&gt;<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">value</span>&gt;=<span class="keyword">params</span>[<span class="number">0</span>] &amp;&amp; <span class="keyword">value</span>&lt;=<span class="keyword">params</span>[<span class="number">1</span>])&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,”必须是一个字母,且a-f”);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>使用时如下</p>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="selector-tag">rules</span>:&#123;</span><br><span class="line">			<span class="attribute">username</span>:&#123; af:[<span class="string">"a"</span>,<span class="string">"f"</span>] &#125;</span><br><span class="line">		&#125;,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是自定义验证方法的方式</p>
                  <h2 id="DeBug模式"><a href="#DeBug模式" class="headerlink" title="DeBug模式"></a>DeBug模式</h2>
                  <p>开启DeBug模式后，不会进行提交，只需要在代码中加入</p>
                  <figure class="highlight d">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">debug</span>:<span class="literal">true</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>即可，这样不论怎样，都不会提交表单，对于调试十分有用。</p>
                  <h2 id="验证通过提交"><a href="#验证通过提交" class="headerlink" title="验证通过提交"></a>验证通过提交</h2>
                  <p>在上面的例子中，我们没有设置表单验证通过之后才提交，通过加入以下代码，可以实现验证之后才提交的效果</p>
                  <figure class="highlight fortran">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">submitHandler:<span class="function"><span class="keyword">function</span><span class="params">(form)</span></span>&#123; </span><br><span class="line"><span class="keyword">form</span>.submit();</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>通过设置上面的内容，我们就可以避免验证不成功submit跳转了</p>
                  <h2 id="忽略元素"><a href="#忽略元素" class="headerlink" title="忽略元素"></a>忽略元素</h2>
                  <p>有时候，我们想跳过某些元素不进行验证，可以通过加入如下代码来实现，举例如下</p>
                  <figure class="highlight avrasm">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="symbol">ignore:</span><span class="string">"input"</span>,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>忽略所有input元素</p>
                  <figure class="highlight avrasm">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="symbol">ignore:</span><span class="string">"#username"</span>,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>忽略id为username的元素</p>
                  <figure class="highlight avrasm">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="symbol">ignore:</span><span class="string">".input"</span>,</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>忽略所有class为input的元素</p>
                  <h2 id="响应事件"><a href="#响应事件" class="headerlink" title="响应事件"></a>响应事件</h2>
                  <p>在默认的响应事件是 submit 提交事件，我们还可以通过设置来改变事件的响应，比如失去焦点时验证等等，举例如下 Onubmit：类型 Boolean，默认 true，指定是否提交时验证。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;   	<span class="attr">onsubmit</span>:<span class="literal">false</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>onfocusout：类型 Boolean，默认 true，指定是否在获取焦点时验证。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;     <span class="attr">onfocusout</span>:<span class="literal">false</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>onkeyup：类型 Boolean，默认 true，指定是否在敲击键盘时验证。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;    <span class="attr">onkeyup</span>:<span class="literal">false</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>onclick：类型 Boolean，默认 true，指定是否在鼠标点击时验证（一般验证 checkbox、radiobox）。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;    <span class="attr">onclick</span>:<span class="literal">false</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>focusInvalid：类型 Boolean，默认 true。提交表单后，未通过验证的表单（第一个或提交之前获得焦点的未通过验证的表单）会获得焦点。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;    <span class="attr">focusInvalid</span>:<span class="literal">false</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>focusCleanup：类型 Boolean，默认 false。当未通过验证的元素获得焦点时，移除错误提示（避免和 focusInvalid 一起使用）。</p>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">$(<span class="string">".selector"</span>).validate(&#123;    <span class="attr">focusCleanup</span>:<span class="literal">true</span> &#125;)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>上面的响应事件一般不太常用，仅作了解即可。</p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>以上便是jQuery插件validate的用法，利用好这款插件对于编写将有极其大的帮助，希望大家能好好学习！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-04 20:50:38" itemprop="dateCreated datePublished" datetime="2015-04-04T20:50:38+08:00">2015-04-04</time>
                </span>
                <span id="/1544.html" class="post-meta-item leancloud_visitors" data-flag-title="jQuery应用一之验证插件validate的使用" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>13k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>12 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1547.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> 个人随笔 <i class="label-arrow"></i>
                  </a>
                  <a href="/1547.html" class="post-title-link" itemprop="url">致那逝去的三月</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <p>4月4日，凌晨3点，我依旧无法入眠，心里想了很多，索性起床把现在的所想记录下来。也许，在一觉过后，这些情感或许就无法挥洒出来了。现在，借着那纯音乐，借着那静谧的夜，总结一下那逝去的三月。 三月一日开学，到现在已经有了一个月多一点的时间了，都说大三下是最难熬的一段时光，亲身经历之后才觉得真的是这样，这一个月，可以用浮躁两个字来形容。 浮躁之处在哪？学习，面试，备考，社交，做事还有其他，浮躁之气充斥在方方面面。 大三开始，不得不去考虑工作或是读研的事情，身边的朋友们，有的选择考研，有的选择工作。室友三个，选择的也都是工作。开学之初，各大公司的校招纷纷开始了，朋友们纷纷开始往各大公司投简历，BAT也不例外。当然BAT终究是BAT，不是省油的灯，一些朋友就在这条道路上遭遇了不少的坎坷，有的简历初审就被PASS，有的电面几轮之后也不幸失败，过程非常坎坷。其中有些朋友一份简历投上几十家公司，想碰运气，录用上哪一个是哪一个，而在我看来，这真的没有太大的意义。投一个公司，对该公司有全面的了解是至关重要，而且公司的理念文化适不适合自己去工作也是一个重要的因素，在我看来，这种碰运气的方法，实不可取。 而对于我自己，更加倾向于读研，鉴于自己的学习成绩还算不错，前百分之五，想申请一下保研，查找了各大学校的招生信息，对自己要复习和准备的东西也有了一些把握，可这一个月以来，自己难以静心去学习。其实说来，周围的朋友纷纷在准备找工作实习，而他们的焦点则就放在了填补一些职业相关的专业知识，掌握一些面试技巧，他们一轮轮的电面，也为自己的工作积累了经验。而我，也在想在大四的时候申请一份实习工作，就算没有拿到Offer，在面试的过程中也能积累一部分的经验，索性我也去试试吧。 制作了自己的一份简历，我也投上了BAT和一些其他公司，因为我本身对网页开发比较了解，尤其是后端开发，PHP部分。而像阿里这样的公司，他们的后端不是利用PHP处理的，所以我就报了前端开发的职位。但是自己的前端功底还不太强，所以我就开始补习JS，jQuery等等的知识，这一个月以来，大多数时间就在学习这些知识。对于找工作我可以说是试一试的态度，学习起来感觉沉不住气，而且可能觉得随时会有一个电话面试打过来，所以我觉得难以系统地，静心地去学习这些知识。 其实周围的朋友和我的情况是差不多的，我特意问过他们最近是怎样的状态，他们也回应说，感觉有些浮躁，完全是在一个应试的压力下在学习，对于一些知识只是修修补补，没有一个系统的把握。仔细想想，真的是这样，他们的路就是工作，谁也想进一个更好的公司，所以他们也在尽力提升着自己，可事实却是，太浮躁。 除了这些，我真的觉得在其他方面也应该好好反思一下自己。 这一个月的作息非常乱，在寒假时曾经做过打算，早睡早起，可慢慢地，睡得越来越晚，同样，起得也越来越晚。开学的前几天，坚持12点之前入睡，可慢慢地，拖到凌晨一两点钟才睡，而理所应当地，早上就难以起床，早起了也还是觉得萎靡不振。最初课程比较少，而且都集中在周二这一天，所以，除了周二，几乎每天都有机会睡个懒觉，由于这个原因，自己也经常早上起得很晚，有时甚至起床就是中午吃饭的时间了。这么一来，一上午的时光岂不是白白浪费了吗？这样的结果归咎于什么？我想，是自己的毅力问题，难以持之以恒，难以律己。 开学以来一个最不让我后悔的决定就是，健身。曾经的时候，一天没有什么活动，就坐在那学习，娱乐，一坐一玩就是一整天，自己的身体确实也难以承受得了，处在一个亚健康状态。开学之初，和好朋友一起去了学校对面的健身馆去办了一张健身年卡，几乎每天我们都去练上一个多小时，互相督促，一起锻炼。我的目标是增肌，自己真的是太瘦了，在健身房，跑上几千米后，尝试各种健身器材，锻炼胸肌等等，另外还有一套腹肌撕裂者的动作，几乎每天都这么坚持做下来。一个月的时间说长也长，说短也短，自己本身太瘦，也在努力多吃，不过现在腹肌和胸肌还没有明显的迹象。不管怎样，坚持长期练下去吧，我相信会有成果的。 另外，在待人处事方面，还是觉得自己不够稳重，现在是21岁了，也该变得成熟些了。在言谈举止方面，现在回想起这一个月自己曾经做过的事，真的有些好幼稚，好可笑。我想，尝试着去变得更稳重，考虑事情更加周全，做事更加细致，结果一定更好。 过去的一个月，我大部分时间都是在宿舍，学习啊，娱乐啊，都是宅在那里，室友也是一样。现在觉得，的确是有些懒散了，而且懒散得效率低下，作息不规律。清明回去之后，是该换一种学习环境了，找一个安静的自习室，在那里看看书，敲敲代码。学习累了，听听音乐，出去走走，望一望周围同学努力的身影，去感受一下这样的状态，告别懒散的生活方式，大胆做一番新的尝试吧。而且，是时候为自己的保研做好好的准备了，专业课知识，英语，真的挺重要。 最后，想说几句话。 为了自己的梦想和所喜欢的事而努力，这份动力是发自内心的。 一个成熟的人，有一颗强大的内心，有一种强大的毅力，做事稳重，注重细节，让自己变得更加稳重和成熟吧。 在做每一件事之前，好好想想怎样可以把这件事做得更好，好好想想自己以后会不会为自己的所作而感到后悔。 让自己变得更优秀，好好经营自己，自己所想要的，说不定会随之而来。 现在凌晨四点十九，写完之后，心中一丝畅然，晚安，世界。</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-04-04 04:21:08" itemprop="dateCreated datePublished" datetime="2015-04-04T04:21:08+08:00">2015-04-04</time>
                </span>
                <span id="/1547.html" class="post-meta-item leancloud_visitors" data-flag-title="致那逝去的三月" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>2.2k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>2 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1534.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1534.html" class="post-title-link" itemprop="url">PHP高级特性八之mysqli函数库的使用</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <h3 id="1-什么是mysqli"><a href="#1-什么是mysqli" class="headerlink" title="1.什么是mysqli"></a>1.什么是mysqli</h3>
                  <p>PHP-MySQL 函数库是 PHP 操作 MySQL 资料库最原始的扩展库，PHP-MySQLi 的 i 代表 Improvement ，相当于前者的增强版，也包含了相对进阶的功能，另外本身也增加了安全性，比如可以大幅度减少 SQL 注入等问题的发生。</p>
                  <h3 id="2-mysql与mysqli的概念相关"><a href="#2-mysql与mysqli的概念相关" class="headerlink" title="2. mysql与mysqli的概念相关"></a>2. mysql与mysqli的概念相关</h3>
                  <p>（1）mysql与mysqli都是php方面的函数集，与mysql数据库关联不大。 （2）在php5版本之前，一般是用php的mysql函数去驱动mysql数据库的，比如mysql_query()的函数，属于面向过程 （3）在php5版本以后，增加了mysqli的函数功能，某种意义上讲，它是mysql系统函数的增强版，更稳定更高效更安全，与mysql_query()对应的有mysqli_query()，属于面向对象，用对象的方式操作驱动mysql数据库</p>
                  <h3 id="3-mysql与mysqli的主要区别"><a href="#3-mysql与mysqli的主要区别" class="headerlink" title="3. mysql与mysqli的主要区别"></a>3. mysql与mysqli的主要区别</h3>
                  <p>（1）mysql是非持继连接函数，mysql每次链接都会打开一个连接的进程，所以mysqli耗费资源少一些。 （2）mysqli是永远连接函数，mysqli多次运行mysqli将使用同一连接进程,从而减少了服务器的开销。mysqli封装了诸如事务等一些高级操作，同时封装了DB操作过程中的很多可用的方法。 （3）mysqli提供了面向对象编程方式和面向过程编程方式，而mysql则只可以面向过程。 例如如下代码分别是mysqli的面向对象编程方式和面向过程方式 面向对象方式</p>
                  <figure class="highlight awk">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$mysqli</span> = new mysqli(<span class="string">"localhost"</span>, <span class="string">"my_user"</span>, <span class="string">"my_password"</span>, <span class="string">"world"</span>);</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* check connection */</span> </span><br><span class="line"><span class="keyword">if</span> (mysqli_connect_errno()) &#123;</span><br><span class="line">    printf(<span class="string">"Connect failed: %s\n"</span>, mysqli_connect_error());</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printf(<span class="string">"Host information: %s\n"</span>, <span class="variable">$mysqli</span>-&gt;host_info);</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* close connection */</span></span><br><span class="line"><span class="variable">$mysqli</span>-&gt;close();</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>面向过程方式</p>
                  <figure class="highlight awk">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$link</span> = mysqli_connect(<span class="string">"localhost"</span>, <span class="string">"my_user"</span>, <span class="string">"my_password"</span>, <span class="string">"world"</span>);</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* check connection */</span> </span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$link</span>) &#123;</span><br><span class="line">    printf(<span class="string">"Connect failed: %s\n"</span>, mysqli_connect_error());</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printf(<span class="string">"Host information: %s\n"</span>, mysqli_get_host_info(<span class="variable">$link</span>));</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* close connection */</span></span><br><span class="line">mysqli_close(<span class="variable">$link</span>);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>（4）mysqli 可以通过预处理语句来减少开销和SQL注入的风险，而mysql则做不到。 <strong>综上所述，如果大家用的是PHP5，而且mysql版本在5.0以上，希望大家以后能用mysqli的就尽量使用mqsqli，不仅高效，而且更安全，而且推荐大家使用面向对象编程方式。</strong> 在这里，我们也只介绍面向对象编程方式。</p>
                  <h2 id="函数使用"><a href="#函数使用" class="headerlink" title="函数使用"></a>函数使用</h2>
                  <h3 id="1-连接数据库并获取相关信息"><a href="#1-连接数据库并获取相关信息" class="headerlink" title="1. 连接数据库并获取相关信息"></a>1. 连接数据库并获取相关信息</h3>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	$mysqli=@<span class="keyword">new</span> mysqli(<span class="string">"localhost"</span>, <span class="string">"root"</span>, <span class="string">""</span>, <span class="string">"mysql"</span>);</span></span><br><span class="line"><span class="php">	<span class="comment">//如果连接错误</span></span></span><br><span class="line"><span class="php">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"连接数据库失败："</span>.mysqli_connect_error();</span></span><br><span class="line"><span class="php">		$mysqli=<span class="keyword">null</span>;</span></span><br><span class="line"><span class="php">		<span class="keyword">exit</span>;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	<span class="comment">//获取当前字符集</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> $mysqli-&gt;character_set_name().<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//获取客户端信息</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> $mysqli-&gt;get_client_info().<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//获取mysql主机信息</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> $mysqli-&gt;host_info.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//获取服务器信息</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> $mysqli-&gt;server_info.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//获取服务器版本</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> $mysqli-&gt;server_version.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//关闭数据库连接</span></span></span><br><span class="line"><span class="php">	$mysqli-&gt;close();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果连接成功则运行结果</p>
                  <blockquote>
                    <p>latin1 mysqlnd 5.0.10 - 20111026 - $Id: e707c415db32080b3752b232487a435ee0372157 $ localhost via TCP/IP 5.6.12-log 50612</p>
                  </blockquote>
                  <p>如果连接失败则可能结果为</p>
                  <blockquote>
                    <p>连接数据库失败：Access denied for user ‘root’@’localhost’ (using password: YES) 连接数据库失败：Unknown database ‘hello’</p>
                  </blockquote>
                  <h3 id="2-查询数据"><a href="#2-查询数据" class="headerlink" title="2.查询数据"></a>2.查询数据</h3>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	$mysqli=@<span class="keyword">new</span> mysqli(<span class="string">"localhost"</span>, <span class="string">"root"</span>, <span class="string">""</span>, <span class="string">"design"</span>);</span></span><br><span class="line"><span class="php">	<span class="comment">//如果连接错误</span></span></span><br><span class="line"><span class="php">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"连接数据库失败："</span>.mysqli_connect_error();</span></span><br><span class="line"><span class="php">		$mysqli=<span class="keyword">null</span>;</span></span><br><span class="line"><span class="php">		<span class="keyword">exit</span>;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	<span class="comment">//构造SQL语句</span></span></span><br><span class="line"><span class="php">	$query = <span class="string">"SELECT * FROM  designer order by ID LIMIT 3"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//执行SQL语句</span></span></span><br><span class="line"><span class="php">	$result = $mysqli-&gt;query($query);</span></span><br><span class="line"><span class="php">	<span class="comment">//遍历结果</span></span></span><br><span class="line"><span class="php">	<span class="keyword">while</span>($row = $result-&gt;fetch_array(MYSQLI_BOTH))&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"id"</span>.$row[<span class="string">'id'</span>].<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	<span class="comment">//释放结果集</span></span></span><br><span class="line"><span class="php">	$result-&gt;free();</span></span><br><span class="line"><span class="php">	<span class="comment">//关闭数据库连接</span></span></span><br><span class="line"><span class="php">	$mysqli-&gt;close();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果</p>
                  <figure class="highlight">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">id10062</span><br><span class="line">id10063</span><br><span class="line">id10064</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里需要注意的是</p>
                  <figure class="highlight stylus">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="function"><span class="title">fetch_array</span><span class="params">(MYSQLI_BOTH)</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这个方法，参数有三个，分别是 MYSQLI_BOTH，MYSQLI_NUM，MYSQLI_ASSOC。 如果参数传入了 MYSQLI_BOTH，返回数组的索引既包括数字和名称。</p>
                  <figure class="highlight routeros">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">array (<span class="attribute">size</span>=26)</span><br><span class="line">  0 =&gt; string <span class="string">'10062'</span> (<span class="attribute">length</span>=5)</span><br><span class="line">  <span class="string">'id'</span> =&gt; string <span class="string">'10062'</span> (<span class="attribute">length</span>=5)</span><br><span class="line">  1 =&gt; string <span class="string">'??'</span> (<span class="attribute">length</span>=2)</span><br><span class="line">  <span class="string">'name'</span> =&gt; string <span class="string">'??'</span> (<span class="attribute">length</span>=2)</span><br><span class="line">  2 =&gt; string <span class="string">'1016903103@qq.com'</span> (<span class="attribute">length</span>=17)</span><br><span class="line">  <span class="string">'email'</span> =&gt; string <span class="string">'1016903103@qq.com'</span> (<span class="attribute">length</span>=17)</span><br><span class="line">  3 =&gt; string <span class="string">'18366119732'</span> (<span class="attribute">length</span>=11)</span><br><span class="line">  <span class="string">'phone'</span> =&gt; string <span class="string">'18366119732'</span> (<span class="attribute">length</span>=11)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果参数传入了 MYSQLI_NUM，返回数组的索引只包含数字。</p>
                  <figure class="highlight lsl">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">array (size=<span class="number">13</span>)</span><br><span class="line">  <span class="number">0</span> =&gt; <span class="type">string</span> '<span class="number">10062</span>' (length=<span class="number">5</span>)</span><br><span class="line">  <span class="number">1</span> =&gt; <span class="type">string</span> '??' (length=<span class="number">2</span>)</span><br><span class="line">  <span class="number">2</span> =&gt; <span class="type">string</span> '<span class="number">1016903103</span>@qq.com' (length=<span class="number">17</span>)</span><br><span class="line">  <span class="number">3</span> =&gt; <span class="type">string</span> '<span class="number">18366119732</span>' (length=<span class="number">11</span>)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果参数传入了 MYSQLI_BOTH，返回数组的索引只包含名称。</p>
                  <figure class="highlight routeros">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">array (<span class="attribute">size</span>=13)</span><br><span class="line">  <span class="string">'id'</span> =&gt; string <span class="string">'10062'</span> (<span class="attribute">length</span>=5)</span><br><span class="line">  <span class="string">'name'</span> =&gt; string <span class="string">'??'</span> (<span class="attribute">length</span>=2)</span><br><span class="line">  <span class="string">'email'</span> =&gt; string <span class="string">'1016903103@qq.com'</span> (<span class="attribute">length</span>=17)</span><br><span class="line">  <span class="string">'phone'</span> =&gt; string <span class="string">'18366119732'</span> (<span class="attribute">length</span>=11)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>其实还有等价的方法 fetch_row()，fetch_assoc()</p>
                  <p>他们之间的关系如下</p>
                  <blockquote>
                    <p>$result-&gt;fetch_row() = mysql_fetch_row() = $result-&gt;fetch_array(MYSQLI_NUM) = mysql_fetch_array(MYSQLI_NUM) 返回索引数组</p>
                    <p>$result-&gt;fetch_assoc() = mysql_fetch_assoc() = $result-&gt;fetch_array(MYSQLI_ASSOC) = mysql_fetch_array(MYSQLI_ASSOC) 返回索引列名</p>
                  </blockquote>
                  <p>如果 fetch_array()方法什么也不传，则默认传入了 MYSQLI_BOTH</p>
                  <h3 id="3-插入数据"><a href="#3-插入数据" class="headerlink" title="3.插入数据"></a>3.插入数据</h3>
                  <figure class="highlight awk">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="variable">$mysqli</span>=@new mysqli(<span class="string">"localhost"</span>, <span class="string">"root"</span>, <span class="string">""</span>, <span class="string">"design"</span>);</span><br><span class="line">	<span class="regexp">//</span>如果连接错误</span><br><span class="line">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span><br><span class="line">		echo <span class="string">"连接数据库失败："</span>.mysqli_connect_error();</span><br><span class="line">		<span class="variable">$mysqli</span>=null;</span><br><span class="line">		<span class="keyword">exit</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="regexp">//</span>插入数据</span><br><span class="line">	<span class="variable">$sql</span>=<span class="string">"insert into designer(name,phone) values('hello','18352682923')"</span>;</span><br><span class="line">	<span class="regexp">//</span>执行插入语句</span><br><span class="line">	<span class="variable">$result</span>=<span class="variable">$mysqli</span>-&gt;query(<span class="variable">$sql</span>);</span><br><span class="line">	<span class="regexp">//</span>如果执行错误</span><br><span class="line">	<span class="keyword">if</span>(!<span class="variable">$result</span>)&#123;</span><br><span class="line">		echo <span class="string">"SQL语句有误&lt;br&gt;"</span>;</span><br><span class="line">		echo <span class="string">"ERROR:"</span>.<span class="variable">$mysqli</span>-&gt;errno.<span class="string">"|"</span>.<span class="variable">$mysqli</span>-&gt;error;</span><br><span class="line">		<span class="keyword">exit</span>;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="regexp">//</span>如果插入成功，则返回影响的行数</span><br><span class="line">	echo <span class="variable">$mysqli</span>-&gt;affected_rows;</span><br><span class="line">	<span class="regexp">//</span>关闭数据库连接</span><br><span class="line">	<span class="variable">$mysqli</span>-&gt;close();</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果插入成功，那么结果则会是1，如果失败，则会报出错误。</p>
                  <h3 id="4-修改内容"><a href="#4-修改内容" class="headerlink" title="4.修改内容"></a>4.修改内容</h3>
                  <figure class="highlight awk">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="variable">$mysqli</span>=@new mysqli(<span class="string">"localhost"</span>, <span class="string">"root"</span>, <span class="string">""</span>, <span class="string">"design"</span>);</span><br><span class="line">	<span class="regexp">//</span>如果连接错误</span><br><span class="line">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span><br><span class="line">		echo <span class="string">"连接数据库失败："</span>.mysqli_connect_error();</span><br><span class="line">		<span class="variable">$mysqli</span>=null;</span><br><span class="line">		<span class="keyword">exit</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="regexp">//</span>插入数据</span><br><span class="line">	<span class="variable">$sql</span>=<span class="string">"update designer set name = 'hello' where id = 10062"</span>;</span><br><span class="line">	<span class="regexp">//</span>执行插入语句</span><br><span class="line">	<span class="variable">$result</span>=<span class="variable">$mysqli</span>-&gt;query(<span class="variable">$sql</span>);</span><br><span class="line">	<span class="regexp">//</span>如果执行错误</span><br><span class="line">	<span class="keyword">if</span>(!<span class="variable">$result</span>)&#123;</span><br><span class="line">		echo <span class="string">"SQL语句有误&lt;br&gt;"</span>;</span><br><span class="line">		echo <span class="string">"ERROR:"</span>.<span class="variable">$mysqli</span>-&gt;errno.<span class="string">"|"</span>.<span class="variable">$mysqli</span>-&gt;error;</span><br><span class="line">		<span class="keyword">exit</span>;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="regexp">//</span>如果插入成功，则返回影响的行数</span><br><span class="line">	echo <span class="variable">$mysqli</span>-&gt;affected_rows;</span><br><span class="line">	<span class="regexp">//</span>关闭数据库连接</span><br><span class="line">	<span class="variable">$mysqli</span>-&gt;close();</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>如果修改成功，同样返回被修改的行数。</p>
                  <h3 id="5-预处理语句"><a href="#5-预处理语句" class="headerlink" title="5.预处理语句"></a>5.预处理语句</h3>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	$mysqli = @<span class="keyword">new</span> mysqli(<span class="string">"localhost"</span>, <span class="string">"root"</span>, <span class="string">""</span>, <span class="string">"design"</span>);</span></span><br><span class="line"><span class="php">	<span class="comment">//如果连接错误</span></span></span><br><span class="line"><span class="php">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"连接数据库失败："</span>.mysqli_connect_error();</span></span><br><span class="line"><span class="php">		$mysqli=<span class="keyword">null</span>;</span></span><br><span class="line"><span class="php">		<span class="keyword">exit</span>;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	<span class="comment">//准备好一条语句放到服务器中，插入语句</span></span></span><br><span class="line"><span class="php">	$sql = <span class="string">"insert into designer(name, email) values(?, ?)"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//生成预处理语句</span></span></span><br><span class="line"><span class="php">	$stmt = $mysqli-&gt;prepare($sql);</span></span><br><span class="line"><span class="php">	<span class="comment">//给占位符号每个?号传值（绑定参数） i  d  s  b，第一个参数为格式化字符，ss代表两个字符串，d代表数字</span></span></span><br><span class="line"><span class="php">	$stmt-&gt;bind_param(<span class="string">"ss"</span>, $name, $email);</span></span><br><span class="line"><span class="php">	<span class="comment">//为变量赋值</span></span></span><br><span class="line"><span class="php">	$name = <span class="string">"Mike"</span>;</span></span><br><span class="line"><span class="php">	$email = <span class="string">"mike@live.cn"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//执行</span></span></span><br><span class="line"><span class="php">	$stmt-&gt;execute();</span></span><br><span class="line"><span class="php">	<span class="comment">//为变量赋值</span></span></span><br><span class="line"><span class="php">	$name = <span class="string">"Larry"</span>;</span></span><br><span class="line"><span class="php">	$email = <span class="string">"larry@live.cn"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//执行</span></span></span><br><span class="line"><span class="php">	$stmt-&gt;execute();</span></span><br><span class="line"><span class="php">	<span class="comment">//最后输出</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> <span class="string">"最后ID"</span>.$stmt-&gt;insert_id.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> <span class="string">"影响了"</span>.$stmt-&gt;affected_rows.<span class="string">"行&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">	<span class="comment">//关闭数据库连接</span></span></span><br><span class="line"><span class="php">	$mysqli-&gt;close();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>通过以上的预处理语句，我们也可以实现数据插入。 那么预处理语句有什么特点呢？</p>
                  <blockquote>
                    <p>1. 效率上更高， 就是如果执行多次相同的语句，只有语句数据不同， 因为将一条语句在服务器端准备好，然后将不同的值传给服务器，再让这条语句执行。相当于编译一次，使用多次。 2. 安全上：可以防止SQL注入（? 占位）这样就可以防止非正常的变量的注入。</p>
                  </blockquote>
                  <p>所以，推荐大家使用mysqli的预处理语句的方式，不仅效率高，而且更加安全。</p>
                  <h2 id="综述-1"><a href="#综述-1" class="headerlink" title="综述"></a>综述</h2>
                  <p>以上就是对mysqli的一些方法的介绍，更加详细的内容，请查看 PHP 手册。 希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-30 17:04:27" itemprop="dateCreated datePublished" datetime="2015-03-30T17:04:27+08:00">2015-03-30</time>
                </span>
                <span id="/1534.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性八之mysqli函数库的使用" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>5.7k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>5 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1527.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1527.html" class="post-title-link" itemprop="url">PHP高级特性七之验证码操作</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>对于PHP的图像处理来说，应用最广泛的便是验证码处理了，上一节我们学习到了PHP绘图的一些基本操作。现在我们实际运用一下，来感受一下验证码的相关应用。 在这里，我们将整个验证码写成了一个PHP类，以后我们用的时候直接调用这个类就好了。 传入的参数为验证码的宽度，高度，还有验证码的字符。</p>
                  <h2 id="验证码类"><a href="#验证码类" class="headerlink" title="验证码类"></a>验证码类</h2>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"></span><br><span class="line"><span class="php">	<span class="class"><span class="keyword">class</span> <span class="title">Code</span> </span>&#123;</span></span><br><span class="line"><span class="php">		<span class="comment">//验证码的宽度</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $width;</span></span><br><span class="line"><span class="php">		<span class="comment">//验证码的高度</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $height;</span></span><br><span class="line"><span class="php">		<span class="comment">//验证码字符的个数</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $codeNum;</span></span><br><span class="line"><span class="php">		<span class="comment">//图像资源</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $image;</span></span><br><span class="line"><span class="php">		<span class="comment">//干扰点的个数</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $disturbColorNum;</span></span><br><span class="line"><span class="php">		<span class="comment">//验证码字符内容</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $checkCode;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//构造方法，默认宽为80，高为20，字符个数为4</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($width=<span class="number">80</span>, $height=<span class="number">20</span>, $codeNum=<span class="number">4</span>)</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//赋值成员变量</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;width=$width;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;height=$height;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;codeNum=$codeNum;</span></span><br><span class="line"><span class="php">			<span class="comment">//获得验证码字符内容</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;checkCode=<span class="keyword">$this</span>-&gt;createCheckCode();</span></span><br><span class="line"><span class="php">			<span class="comment">//设置干扰点的个数</span></span></span><br><span class="line"><span class="php">			$number=floor($width*$height/<span class="number">15</span>);</span></span><br><span class="line"><span class="php">			<span class="keyword">if</span>($number &gt; <span class="number">240</span>-$codeNum)&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">$this</span>-&gt;disturbColorNum=	<span class="number">240</span>-$codeNum;</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">$this</span>-&gt;disturbColorNum=$number;</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//通过访问该方法向浏览器中输出图像</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">showImage</span><span class="params">($fontFace=<span class="string">""</span>)</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//第一步：创建图像背景</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;createImage();</span></span><br><span class="line"><span class="php">			<span class="comment">//第二步：设置干扰元素</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;setDisturbColor();</span></span><br><span class="line"><span class="php">			<span class="comment">//第三步：向图像中随机画出文本</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;outputText($fontFace);</span></span><br><span class="line"><span class="php">			<span class="comment">//第四步：输出图像</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;outputImage();</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">			</span></span><br><span class="line"><span class="php">		<span class="comment">//通过调用该方法获取随机创建的验证码字符串</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">getCheckCode</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">return</span> <span class="keyword">$this</span>-&gt;checkCode;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//设置图像资源</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">createImage</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//创建图像资源</span></span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;image=imagecreatetruecolor(<span class="keyword">$this</span>-&gt;width, <span class="keyword">$this</span>-&gt;height);</span></span><br><span class="line"><span class="php">			<span class="comment">//随机背景色</span></span></span><br><span class="line"><span class="php">			$backColor=imagecolorallocate(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">225</span>, <span class="number">255</span>), rand(<span class="number">225</span>,<span class="number">255</span>), rand(<span class="number">225</span>, <span class="number">255</span>));</span></span><br><span class="line"><span class="php">			<span class="comment">//为背景添充颜色</span></span></span><br><span class="line"><span class="php">			imagefill(<span class="keyword">$this</span>-&gt;image, <span class="number">0</span>, <span class="number">0</span>, $backColor);</span></span><br><span class="line"><span class="php">			<span class="comment">//设置边框颜色</span></span></span><br><span class="line"><span class="php">			$border=imagecolorallocate(<span class="keyword">$this</span>-&gt;image, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="php">			<span class="comment">//画出矩形边框</span></span></span><br><span class="line"><span class="php">			imagerectangle(<span class="keyword">$this</span>-&gt;image, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">$this</span>-&gt;width<span class="number">-1</span>, <span class="keyword">$this</span>-&gt;height<span class="number">-1</span>, $border);</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//创建干扰元素</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> <span class="function"><span class="keyword">function</span>  <span class="title">setDisturbColor</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//创建干扰的点</span></span></span><br><span class="line"><span class="php">			<span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;<span class="keyword">$this</span>-&gt;disturbColorNum; $i++)&#123;</span></span><br><span class="line"><span class="php">				$color=imagecolorallocate(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">0</span>, <span class="number">255</span>), rand(<span class="number">0</span>, <span class="number">255</span>), rand(<span class="number">0</span>, <span class="number">255</span>));</span></span><br><span class="line"><span class="php">				imagesetpixel(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">1</span>, <span class="keyword">$this</span>-&gt;width<span class="number">-2</span>), rand(<span class="number">1</span>, <span class="keyword">$this</span>-&gt;height<span class="number">-2</span>), $color); </span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">			<span class="comment">//创建干扰的线条</span></span></span><br><span class="line"><span class="php">			<span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;<span class="number">10</span>; $i++)&#123;</span></span><br><span class="line"><span class="php">				$color=imagecolorallocate(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">200</span>, <span class="number">255</span>), rand(<span class="number">200</span>, <span class="number">255</span>), rand(<span class="number">200</span>, <span class="number">255</span>));</span></span><br><span class="line"><span class="php">				imagearc(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">-10</span>, <span class="keyword">$this</span>-&gt;width), rand(<span class="number">-10</span>, <span class="keyword">$this</span>-&gt;height), rand(<span class="number">30</span>, <span class="number">300</span>), rand(<span class="number">20</span>, <span class="number">200</span>), <span class="number">55</span>, <span class="number">44</span>, $color);</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//创建随机验证码</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">createCheckCode</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			$code=<span class="string">"23456789abcdefghijkmnpqrstuvwxyzABCDEFGHIJKMNPQRSTUVWXYZ"</span>;</span></span><br><span class="line"><span class="php">			$string=<span class="string">''</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//从字符串中取出随机的字符</span></span></span><br><span class="line"><span class="php">			<span class="keyword">for</span>($i=<span class="number">0</span>; $i &lt; <span class="keyword">$this</span>-&gt;codeNum; $i++)&#123;</span></span><br><span class="line"><span class="php">				$char=$code&#123;rand(<span class="number">0</span>, strlen($code)<span class="number">-1</span>)&#125;;</span></span><br><span class="line"><span class="php">				$string.=$char;</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">			<span class="comment">//返回字符内容</span></span></span><br><span class="line"><span class="php">			<span class="keyword">return</span> $string;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//设置验证码的字符</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">outputText</span><span class="params">($fontFace=<span class="string">""</span>)</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;<span class="keyword">$this</span>-&gt;codeNum; $i++)&#123;</span></span><br><span class="line"><span class="php">				$fontcolor=imagecolorallocate(<span class="keyword">$this</span>-&gt;image, rand(<span class="number">0</span>, <span class="number">128</span>), rand(<span class="number">0</span>, <span class="number">128</span>), rand(<span class="number">0</span>, <span class="number">128</span>));</span></span><br><span class="line"><span class="php">				<span class="keyword">if</span>($fontFace==<span class="string">""</span>)&#123;</span></span><br><span class="line"><span class="php">					$fontsize=rand(<span class="number">3</span>, <span class="number">5</span>);</span></span><br><span class="line"><span class="php">					$x=floor(<span class="keyword">$this</span>-&gt;width/<span class="keyword">$this</span>-&gt;codeNum)*$i+<span class="number">3</span>;</span></span><br><span class="line"><span class="php">					$y=rand(<span class="number">0</span>, <span class="keyword">$this</span>-&gt;height<span class="number">-15</span>);</span></span><br><span class="line"><span class="php">					imagechar(<span class="keyword">$this</span>-&gt;image,$fontsize, $x, $y, <span class="keyword">$this</span>-&gt;checkCode&#123;$i&#125;,$fontcolor);</span></span><br><span class="line"><span class="php">				&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">					$fontsize=rand(<span class="number">12</span>, <span class="number">16</span>);</span></span><br><span class="line"><span class="php">					$x=floor((<span class="keyword">$this</span>-&gt;width<span class="number">-8</span>)/<span class="keyword">$this</span>-&gt;codeNum)*$i+<span class="number">8</span>;</span></span><br><span class="line"><span class="php">					$y=rand($fontSize+<span class="number">5</span>, <span class="keyword">$this</span>-&gt;height);</span></span><br><span class="line"><span class="php">					imagettftext(<span class="keyword">$this</span>-&gt;image,$fontsize,rand(<span class="number">-30</span>, <span class="number">30</span>),$x,$y ,$fontcolor, $fontFace, <span class="keyword">$this</span>-&gt;checkCode&#123;$i&#125;);</span></span><br><span class="line"><span class="php">				&#125;</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//输出验证码图像资源</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">outputImage</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">if</span>(imagetypes() &amp; IMG_GIF)&#123;</span></span><br><span class="line"><span class="php">				header(<span class="string">"Content-Type:image/gif"</span>);</span></span><br><span class="line"><span class="php">				imagepng(<span class="keyword">$this</span>-&gt;image);</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(imagetypes() &amp; IMG_JPG)&#123;</span></span><br><span class="line"><span class="php">				header(<span class="string">"Content-Type:image/jpeg"</span>);</span></span><br><span class="line"><span class="php">				imagepng(<span class="keyword">$this</span>-&gt;image);</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(imagetypes() &amp; IMG_PNG)&#123;</span></span><br><span class="line"><span class="php">				header(<span class="string">"Content-Type:image/png"</span>);</span></span><br><span class="line"><span class="php">				imagepng(<span class="keyword">$this</span>-&gt;image);</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(imagetypes() &amp; IMG_WBMP)&#123;</span></span><br><span class="line"><span class="php">				header(<span class="string">"Content-Type:image/vnd.wap.wbmp"</span>);</span></span><br><span class="line"><span class="php">				imagepng(<span class="keyword">$this</span>-&gt;image);</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">die</span>(<span class="string">"PHP不支持图像创建"</span>);</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		<span class="comment">//析构方法</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">__destruct</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//销毁图像资源</span></span></span><br><span class="line"><span class="php">			imagedestroy(<span class="keyword">$this</span>-&gt;image);</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>以上便是我们的验证码类的全部实现，保存文件名为 code.class.php， 下面我们来看一下怎样应用。</p>
                  <h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2>
                  <p>我们写好了这个类之后，该怎么来调用呢？我们写一个demo如下</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	session_start();</span></span><br><span class="line"><span class="php">	<span class="keyword">include</span> <span class="string">"code.class.php"</span>;</span></span><br><span class="line"><span class="php">	$code=<span class="keyword">new</span> Code(<span class="number">80</span>, <span class="number">20</span>, <span class="number">4</span>);</span></span><br><span class="line"><span class="php">	$code-&gt;showImage();   <span class="comment">//输出到页面中供 注册或登录使用</span></span></span><br><span class="line"><span class="php">	$_SESSION[<span class="string">"code"</span>]=$code-&gt;getCheckCode();  <span class="comment">//将验证码保存到服务器中</span></span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这段代码声明了一个code对象，然后调用 showImage 方法，显示出验证码，最后通过getCheckCode 方法，获得验证码字符串的内容，保存到了 session 全局变量中。 以上代码我们保存成 code.php 文件 之后，我们写一个表单来提交验证一下</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	session_start();</span></span><br><span class="line"><span class="php">	<span class="keyword">if</span>(@$_POST[<span class="string">"code"</span>]&amp;&amp;strtoupper($_POST[<span class="string">"code"</span>])==strtoupper($_SESSION[<span class="string">"code"</span>]))&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"ok"</span>;</span></span><br><span class="line"><span class="php">	&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">		<span class="keyword">echo</span> <span class="string">"error"</span>;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">		code: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"code"</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"code.php"</span> <span class="attr">onclick</span>=<span class="string">"this.src='code.php?'+Math.random()"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"sub"</span> <span class="attr">value</span>=<span class="string">"login"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>上面的代码包括了一个输入框还有验证码，验证码的 src 资源可以直接引用为 code.php 文件，这里需要注意的是，后面要加一个参数，防止因为浏览器缓存原因而导致验证码无法更换。 最后表单是提交到文件本身，所以就可以比较提交的数据和 session 全局变量之间的关系，如果相同输出 ok，如果不同输出 error 小伙伴可以验证一下！希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-29 14:42:05" itemprop="dateCreated datePublished" datetime="2015-03-29T14:42:05+08:00">2015-03-29</time>
                </span>
                <span id="/1527.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性七之验证码操作" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>4.8k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>4 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1515.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1515.html" class="post-title-link" itemprop="url">PHP高级特性六之图像处理</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>PHP的图像处理主要有下面几个用途，一个是验证码的操作，另一个就是图像水印操作，这里我们一起来学习一下吧。</p>
                  <h2 id="图像处理基础"><a href="#图像处理基础" class="headerlink" title="图像处理基础"></a>图像处理基础</h2>
                  <h3 id="1-总体流程"><a href="#1-总体流程" class="headerlink" title="1.总体流程"></a>1.总体流程</h3>
                  <p>首先，我们必须先了解PHP图像处理的基本函数的用法。总体来说分为以下四个步骤</p>
                  <h4 id="（1）创建画布，创建资源类型，指定-高度-宽度"><a href="#（1）创建画布，创建资源类型，指定-高度-宽度" class="headerlink" title="（1）创建画布，创建资源类型，指定 高度 宽度"></a>（1）创建画布，创建资源类型，指定 高度 宽度</h4>
                  <figure class="highlight routeros">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">resource imagecreate ( int x_size, int y_size )</span><br><span class="line">resource imagecreatetruecolor ( int x_size, int y_size )</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>imagecreate() 返回一个图像标识符，代表了一幅大小为 x_size 和 y_size 的空白图像。不过推荐使用 imagecreatetruecolor()，这个是新建一个真彩色图像。</p>
                  <h4 id="（2）绘制图像"><a href="#（2）绘制图像" class="headerlink" title="（2）绘制图像"></a>（2）绘制图像</h4>
                  <p>制定各种颜色，矩形， 圆， 点， 线段， 扇形， 画字（字符， 字符串， freetype），每一个形状和字符绘制对应一个函数，这部分我们后面详细介绍。</p>
                  <h4 id="（3）输出图像-保存处理好的图像"><a href="#（3）输出图像-保存处理好的图像" class="headerlink" title="（3）输出图像/保存处理好的图像"></a>（3）输出图像/保存处理好的图像</h4>
                  <figure class="highlight abnf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">imagegif()<span class="comment">;</span></span><br><span class="line">imagejpeg()<span class="comment">;</span></span><br><span class="line">imagepng()<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>例如，imagegif() 则将其保存为gif格式的图像。 <strong>bool imagegif ( resource image [, string filename] )</strong></p>
                  <blockquote>
                    <p>imagegif() 从 image 图像以 filename 为文件名创建一个 GIF 图像。image 参数是 imagecreatetruecolor() 函数的返回值。 filename 参数为可选，如果省略，则原始图像流将被直接输出。通过 header() 发送 Content-type: image/gif 可以使 PHP 脚本直接输出 GIF 图像。</p>
                  </blockquote>
                  <h4 id="（4）释放资源"><a href="#（4）释放资源" class="headerlink" title="（4）释放资源"></a>（4）释放资源</h4>
                  <figure class="highlight arcade">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">imagedestroy(<span class="symbol">$img</span>);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>所以，我们创建图像的一般流程用代码可以总结如下</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	<span class="comment">//创建图片资源</span></span></span><br><span class="line"><span class="php">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span></span><br><span class="line"><span class="php">	<span class="comment">//绘制图形</span></span></span><br><span class="line"><span class="php">	$red = imagecolorallocate($img, <span class="number">0xFF</span>, <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="php">	imagechar($img, <span class="number">5</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">"A"</span>, $red);</span></span><br><span class="line"><span class="php">	<span class="comment">//输出图像</span></span></span><br><span class="line"><span class="php">	header(<span class="string">"Content-Type:image/gif"</span>);</span></span><br><span class="line"><span class="php">	imagegif($img);</span></span><br><span class="line"><span class="php">	<span class="comment">//释放资源</span></span></span><br><span class="line"><span class="php">	imagedestroy($img);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>输出的结果如下，它直接在浏览器中显示如下，背景默认为黑色。 <img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328153220-e1427528691389.jpg" alt="20150328153220"> 如果我们不加header，那么则会显示字符乱码，所以一定要记得下面这句话。</p>
                  <figure class="highlight abnf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">header(<span class="string">"Content-Type:image/gif"</span>)<span class="comment">;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="2-设置色彩"><a href="#2-设置色彩" class="headerlink" title="2.设置色彩"></a>2.设置色彩</h3>
                  <p>我们主要用到下面这个函数 <strong>int imagecolorallocate ( resource image, int red, int green, int blue )</strong> imagecolorallocate() 返回一个标识符，代表了由给定的 RGB 成分组成的颜色。image 参数是 imagecreatetruecolor() 函数的返回值。red，green 和 blue 分别是所需要的颜色的红，绿，蓝成分。这些参数是 0 到 255 的整数或者十六进制的 0x00 到 0xFF。imagecolorallocate() 必须被调用以创建每一种用在 image 所代表的图像中的颜色。 例如下面的例子</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//十进制方式</span></span><br><span class="line">	$red = imagecolorallocate($img, <span class="number">0xFF</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$white = imagecolorallocate($im, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">	$black = imagecolorallocate($im, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">// 十六进制方式</span></span><br><span class="line">	$gray = imagecolorallocate($img, <span class="number">0xEE</span>, <span class="number">0xEE</span>, <span class="number">0xEE</span>);</span><br><span class="line">	$white = imagecolorallocate($im, <span class="number">0xFF</span>, <span class="number">0xFF</span>, <span class="number">0xFF</span>);</span><br><span class="line">	$black = imagecolorallocate($im, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="3-区域填充色彩"><a href="#3-区域填充色彩" class="headerlink" title="3.区域填充色彩"></a>3.区域填充色彩</h3>
                  <p><strong>bool imagefill ( resource image, int x, int y, int color )</strong> imagefill() 在 image 图像的坐标 x，y（图像左上角为 0, 0）处用 color 颜色执行区域填充（即与 x, y 点颜色相同且相邻的点都会被填充）。 好，让我们尝试一下填充背景色吧</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	<span class="comment">//创建图片资源</span></span></span><br><span class="line"><span class="php">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span></span><br><span class="line"><span class="php">	<span class="comment">//绘制图形</span></span></span><br><span class="line"><span class="php">	$red = imagecolorallocate($img, <span class="number">0xFF</span>, <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="php">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$red);</span></span><br><span class="line"><span class="php">	<span class="comment">//输出图像</span></span></span><br><span class="line"><span class="php">	header(<span class="string">"Content-Type:image/gif"</span>);</span></span><br><span class="line"><span class="php">	imagegif($img);</span></span><br><span class="line"><span class="php">	<span class="comment">//释放资源</span></span></span><br><span class="line"><span class="php">	imagedestroy($img);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>运行结果如下，背景被填充为了红色。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/QQ截图20150328154707.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/QQ截图20150328154707.jpg" alt="20150328154707"></a></p>
                  <h3 id="4-画各种元素"><a href="#4-画各种元素" class="headerlink" title="4.画各种元素"></a>4.画各种元素</h3>
                  <h4 id="（1）画空心矩形"><a href="#（1）画空心矩形" class="headerlink" title="（1）画空心矩形"></a>（1）画空心矩形</h4>
                  <p><strong>bool imagerectangle ( resource image, int x1, int y1, int x2, int y2, int col )</strong> imagerectangle() 用 col 颜色在 image 图像中画一个矩形，其左上角坐标为 x1, y1，右下角坐标为 x2, y2。图像的左上角坐标为 0, 0。</p>
                  <h4 id="（2）画填充矩形"><a href="#（2）画填充矩形" class="headerlink" title="（2）画填充矩形"></a>（2）画填充矩形</h4>
                  <p> <strong>bool imagefilledrectangle ( resource image, int x1, int y1, int x2, int y2, int color )</strong> imagefilledrectangle() 在 image 图像中画一个用 color 颜色填充了的矩形，其左上角坐标为 x1，y1，右下角坐标为 x2，y2。0, 0 是图像的最左上角。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//创建图片资源</span></span><br><span class="line">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">	<span class="comment">//声明颜色</span></span><br><span class="line">	$red=imagecolorallocate($img, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$yellow=imagecolorallocate($img, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$green=imagecolorallocate($img, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$blue=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">	<span class="comment">//填充背景</span></span><br><span class="line">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$yellow);</span><br><span class="line">	<span class="comment">//画一个矩形并填充</span></span><br><span class="line">	imagefilledrectangle($img, <span class="number">10</span>, <span class="number">10</span>, <span class="number">80</span>, <span class="number">80</span>, $green);</span><br><span class="line">	<span class="comment">//画一个矩形</span></span><br><span class="line">	imagerectangle($img, <span class="number">90</span>, <span class="number">10</span>, <span class="number">190</span>, <span class="number">80</span>, $green);</span><br><span class="line">	<span class="comment">//输出图像</span></span><br><span class="line">	header(<span class="string">"Content-Type:image/gif"</span>);</span><br><span class="line">	imagegif($img);</span><br><span class="line">	<span class="comment">//释放资源</span></span><br><span class="line">	imagedestroy($img);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328155313.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328155313.jpg" alt="20150328155313"></a></p>
                  <h4 id="（3）画一条线段"><a href="#（3）画一条线段" class="headerlink" title="（3）画一条线段"></a>（3）画一条线段</h4>
                  <p><strong>bool imageline ( resource image, int x1, int y1, int x2, int y2, int color )</strong> imageline() 用 color 颜色在图像 image 中从坐标 x1，y1 到 x2，y2（图像左上角为 0, 0）画一条线段。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//创建图片资源</span></span><br><span class="line">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">	<span class="comment">//声明颜色</span></span><br><span class="line">	$red=imagecolorallocate($img, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$yellow=imagecolorallocate($img, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$green=imagecolorallocate($img, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$blue=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">	<span class="comment">//填充背景</span></span><br><span class="line">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$yellow);</span><br><span class="line">	<span class="comment">//线段</span></span><br><span class="line">	imageline($img,<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span> ,$blue);</span><br><span class="line">	imageline($img,<span class="number">200</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, $blue);</span><br><span class="line">	<span class="comment">//输出图像</span></span><br><span class="line">	header(<span class="string">"Content-Type:image/gif"</span>);</span><br><span class="line">	imagegif($img);</span><br><span class="line">	<span class="comment">//释放资源</span></span><br><span class="line">	imagedestroy($img);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328155846.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328155846.jpg" alt="20150328155846"></a></p>
                  <h4 id="（4）画点"><a href="#（4）画点" class="headerlink" title="（4）画点"></a>（4）画点</h4>
                  <p><strong>bool imagesetpixel ( resource image, int x, int y, int color )</strong> imagesetpixel() 在 image 图像中用 color 颜色在 x，y 坐标（图像左上角为 0，0）上画一个点。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//创建图片资源</span></span><br><span class="line">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">	<span class="comment">//声明颜色</span></span><br><span class="line">	$red=imagecolorallocate($img, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$yellow=imagecolorallocate($img, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$green=imagecolorallocate($img, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$blue=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">	<span class="comment">//填充背景</span></span><br><span class="line">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$yellow);</span><br><span class="line">	<span class="comment">//点</span></span><br><span class="line">	imagesetpixel($img,<span class="number">50</span>, <span class="number">50</span> ,$red);</span><br><span class="line">	imagesetpixel($img,<span class="number">55</span>, <span class="number">50</span> ,$red);</span><br><span class="line">	imagesetpixel($img,<span class="number">59</span>, <span class="number">50</span> ,$red);</span><br><span class="line">	imagesetpixel($img,<span class="number">64</span>, <span class="number">50</span> ,$red);</span><br><span class="line">	imagesetpixel($img,<span class="number">72</span>, <span class="number">50</span> ,$red);</span><br><span class="line">	<span class="comment">//输出图像</span></span><br><span class="line">	header(<span class="string">"Content-Type:image/gif"</span>);</span><br><span class="line">	imagegif($img);</span><br><span class="line">	<span class="comment">//释放资源</span></span><br><span class="line">	imagedestroy($img);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328160304.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328160304.jpg" alt="20150328160304"></a></p>
                  <h4 id="（5）画空心圆"><a href="#（5）画空心圆" class="headerlink" title="（5）画空心圆"></a>（5）画空心圆</h4>
                  <p><strong>bool imageellipse ( resource image, int cx, int cy, int w, int h, int color )</strong> imageellipse() 在 image 所代表的图像中画一个中心为 cx，cy（图像左上角为 0, 0）的椭圆。w 和 h 分别指定了椭圆的宽度和高度，椭圆的颜色由 color 指定。</p>
                  <h4 id="（6）画实心圆"><a href="#（6）画实心圆" class="headerlink" title="（6）画实心圆"></a>（6）画实心圆</h4>
                  <p><strong>bool imagefilledellipse ( resource image, int cx, int cy, int w, int h, int color )</strong> imagefilledellipse() 在 image 所代表的图像中以 cx，cy（图像左上角为 0, 0）为中心画一个椭圆。w 和 h 分别指定了椭圆的宽和高。椭圆用 color 颜色填充。如果成功则返回 TRUE，失败则返回 FALSE。</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//创建图片资源</span></span><br><span class="line">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">	<span class="comment">//声明颜色</span></span><br><span class="line">	$red=imagecolorallocate($img, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$yellow=imagecolorallocate($img, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$green=imagecolorallocate($img, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$blue=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">	<span class="comment">//填充背景</span></span><br><span class="line">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$yellow);</span><br><span class="line">	<span class="comment">//圆</span></span><br><span class="line">	imageellipse($img, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>,$green);</span><br><span class="line">	<span class="comment">//实心圆</span></span><br><span class="line">	imagefilledellipse($img, <span class="number">100</span>, <span class="number">100</span>, <span class="number">10</span>, <span class="number">10</span>,$blue);</span><br><span class="line">	<span class="comment">//输出图像</span></span><br><span class="line">	header(<span class="string">"Content-Type:image/gif"</span>);</span><br><span class="line">	imagegif($img);</span><br><span class="line">	<span class="comment">//释放资源</span></span><br><span class="line">	imagedestroy($img);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328161138.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328161138.jpg" alt="20150328161138"></a></p>
                  <h4 id="（7）水平画一个字符"><a href="#（7）水平画一个字符" class="headerlink" title="（7）水平画一个字符"></a>（7）水平画一个字符</h4>
                  <p><strong>bool imagechar ( resource image, int font, int x, int y, string c, int color )</strong> imagechar() 将字符串 c 的第一个字符画在 image 指定的图像中，其左上角位于 x，y（图像左上角为 0, 0），颜色为 color。如果 font 是 1，2，3，4 或 5，则使用内置的字体（更大的数字对应于更大的字体）。 <strong>bool imagestring ( resource image, int font, int x, int y, string s, int col )</strong> imagestring() 用 col 颜色将字符串 s 画到 image 所代表的图像的 x，y 坐标处（这是字符串左上角坐标，整幅图像的左上角为 0，0）。如果 font 是 1，2，3，4 或 5，则使用内置字体。</p>
                  <h4 id="（8）竖直画一个字符"><a href="#（8）竖直画一个字符" class="headerlink" title="（8）竖直画一个字符"></a>（8）竖直画一个字符</h4>
                  <p><strong>bool imagecharup ( resource image, int font, int x, int y, string c, int color )</strong> imagecharup() 将字符 c 垂直地画在 image 指定的图像上，位于 x，y（图像左上角为 0, 0），颜色为 color。如果 font 为 1，2，3，4 或 5，则使用内置的字体。 <strong>bool imagestringup ( resource image, int font, int x, int y, string s, int col )</strong> imagestring() 用 col 颜色将字符串 s 垂直地画到 image 所代表的图像的 x, y 座标处（图像的左上角为 0, 0）。如果 font 是 1，2，3，4 或 5，则使用内置字体。</p>
                  <h4 id="（9）带字体写入字符"><a href="#（9）带字体写入字符" class="headerlink" title="（9）带字体写入字符"></a>（9）带字体写入字符</h4>
                  <p><strong>array imagettftext ( resource image, float size, float angle, int x, int y, int color, string fontfile, string text )</strong></p>
                  <blockquote>
                    <p>image：图像资源。见 imagecreatetruecolor()。 size： 字体大小。根据 GD 版本不同，应该以像素大小指定（GD1）或点大小（GD2）。 angle： 角度制表示的角度，0 度为从左向右读的文本。更高数值表示逆时针旋转。例如 90 度表示从下向上读的文本。 x： 由 x，y 所表示的坐标定义了第一个字符的基本点（大概是字符的左下角）。这和 imagestring() 不同，其 x，y 定义了第一个字符的左上角。例如 “top left” 为 0, 0。 y： Y 坐标。它设定了字体基线的位置，不是字符的最底端。 color： 颜色索引。使用负的颜色索引值具有关闭防锯齿的效果。见 imagecolorallocate()。 fontfile： 是想要使用的 TrueType 字体的路径。 text： 文本字符串。</p>
                  </blockquote>
                  <p>imagettftext() 返回一个含有 8 个单元的数组表示了文本外框的四个角，顺序为坐下角，右下角，右上角，左上角。这些点是相对于文本的而和角度无关，因此“左上角”指的是以水平方向看文字时其左上角。</p>
                  <figure class="highlight lsl">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	<span class="comment">//创建图片资源</span></span><br><span class="line">	$img = imagecreatetruecolor( <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">	<span class="comment">//声明颜色</span></span><br><span class="line">	$red=imagecolorallocate($img, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	$yellow=imagecolorallocate($img, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$green=imagecolorallocate($img, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">	$blue=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">	$navy=imagecolorallocate($img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0x80</span>);</span><br><span class="line">	<span class="comment">//填充背景</span></span><br><span class="line">	imagefill($img,<span class="number">0</span>,<span class="number">0</span>,$yellow);</span><br><span class="line">	<span class="comment">//画字符</span></span><br><span class="line">	imagechar($img, <span class="number">2</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">"A"</span>, $red);</span><br><span class="line">	imagechar($img, <span class="number">5</span>, <span class="number">120</span>, <span class="number">120</span>, <span class="string">"B"</span>, $red);</span><br><span class="line">	imagecharup($img, <span class="number">4</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="string">"C"</span>, $red);</span><br><span class="line">	imagecharup($img, <span class="number">5</span>, <span class="number">80</span>, <span class="number">80</span>, <span class="string">"D"</span>, $red);</span><br><span class="line">	imagestring($img, <span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="string">"Hello"</span>, $navy);</span><br><span class="line">	imagestringup($img, <span class="number">3</span>, <span class="number">10</span>, <span class="number">80</span>, <span class="string">"Hello"</span>, $navy);</span><br><span class="line">	imagettftext($img, <span class="number">25</span>, <span class="number">60</span>, <span class="number">150</span>, <span class="number">150</span>, $blue, <span class="string">"simkai.ttf"</span>, <span class="string">"Hello"</span>);</span><br><span class="line">	imagettftext($img, <span class="number">12</span>, <span class="number">-60</span>, <span class="number">50</span>, <span class="number">150</span>, $green, <span class="string">"simli.ttf"</span>, <span class="string">"Nihao"</span>);</span><br><span class="line">	<span class="comment">//输出图像</span></span><br><span class="line">	header(<span class="string">"Content-Type:image/gif"</span>);</span><br><span class="line">	imagegif($img);</span><br><span class="line">	<span class="comment">//释放资源</span></span><br><span class="line">	imagedestroy($img);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328163147.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150328163147.jpg" alt="20150328163147"></a></p>
                  <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
                  <p>以上我们总结了PHP图像绘图的相关函数的使用，在后面我们将应用于实际，比如验证码和图像水印操作中。 希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-28 16:34:50" itemprop="dateCreated datePublished" datetime="2015-03-28T16:34:50+08:00">2015-03-28</time>
                </span>
                <span id="/1515.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性六之图像处理" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>6.8k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>6 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1491.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> HTML <i class="label-arrow"></i>
                  </a>
                  <a href="/1491.html" class="post-title-link" itemprop="url">使用CSS3自定义网页字体的方法</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>CSS3已经变得非常流行，原本的CSS不支持自定义字体，但是传说中的CSS3基本上什么都可以，那么CSS3中可不可以自定义英文字体呢？这里我们就一起来感受一下。</p>
                  <h2 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a><strong>语法规则</strong></h2>
                  <figure class="highlight scss">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line"></span><br><span class="line">　　<span class="attribute">font-family</span>: 自定义的字体名称;</span><br><span class="line"></span><br><span class="line">　　<span class="attribute">src</span>: 自定义的字体的存放路径;</span><br><span class="line"></span><br><span class="line">　　<span class="attribute">font-weight</span>: normal;是否为粗体</span><br><span class="line"></span><br><span class="line">　　<span class="attribute">font-style</span>: normal;定义字体样式，如斜体</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h2 id="取值说明"><a href="#取值说明" class="headerlink" title="取值说明"></a><strong>取值说明</strong></h2>
                  <h3 id="font-famliy"><a href="#font-famliy" class="headerlink" title="font-famliy"></a>font-famliy</h3>
                  <p>此值指的就是你自定义的字体名称，最好是使用你下载的默认字体，他将被引用到你的Web元素中的font-family。如“font-family:”YourWebFontName”;”</p>
                  <h3 id="source"><a href="#source" class="headerlink" title="source"></a>source</h3>
                  <p>此值指的是你自定义的字体的存放路径，可以是相对路径也可以是绝路径;</p>
                  <h3 id="format"><a href="#format" class="headerlink" title="format"></a>format</h3>
                  <p>此值指的是你自定义的字体的格式，主要用来帮助浏览器识别，其值主要有以下几种类型：truetype,opentype,truetype-aat,embedded-opentype,avg等</p>
                  <h3 id="weight和style"><a href="#weight和style" class="headerlink" title="weight和style"></a>weight和style</h3>
                  <p>这两个值大家一定很熟悉，weight定义字体是否为粗体，style主要定义字体样式，如斜体</p>
                  <h2 id="各个浏览器需要字体的格式"><a href="#各个浏览器需要字体的格式" class="headerlink" title="各个浏览器需要字体的格式"></a><strong>各个浏览器需要字体的格式</strong></h2>
                  <h3 id="TureTpe-ttf"><a href="#TureTpe-ttf" class="headerlink" title="TureTpe(.ttf)"></a>TureTpe(.ttf)</h3>
                  <p>.ttf字体是Windows和Mac的最常见的字体，是一种RAW格式，因此他不为网站优化,支持这种字体的浏览器有 IE9+,Firefox3.5+,Chrome4+,Safari3+,Opera10+,iOS Mobile Safari4.2+</p>
                  <h3 id="OpenType-otf"><a href="#OpenType-otf" class="headerlink" title="OpenType(.otf)"></a>OpenType(.otf)</h3>
                  <p>.otf字体被认为是一种原始的字体格式，其内置在TureType的基础上，所以也提供了更多的功能,支持这种字体的浏览器有 Firefox3.5+,Chrome4.0+,Safari3.1+,Opera10.0+,iOS Mobile Safari4.2+</p>
                  <h3 id="Web-Open-Font-Format-woff"><a href="#Web-Open-Font-Format-woff" class="headerlink" title="Web Open Font Format(.woff)"></a>Web Open Font Format(.woff)</h3>
                  <p>.woff字体是Web字体中最佳格式，他是一个开放的TrueType/OpenType的压缩版本，同时也支持元数据包的分离,支持这种字体的浏览器有 IE9+,Firefox3.5+,Chrome6+,Safari3.6+,Opera11.1+</p>
                  <h3 id="Embedded-Open-Type-eot"><a href="#Embedded-Open-Type-eot" class="headerlink" title="Embedded Open Type(.eot)"></a>Embedded Open Type(.eot)</h3>
                  <p>.eot字体是IE专用字体，可以从TrueType创建此格式字体,支持这种字体的浏览器有 IE4+</p>
                  <h3 id="SVG-svg"><a href="#SVG-svg" class="headerlink" title="SVG(.svg)"></a>SVG(.svg)</h3>
                  <p>.svg字体是基于SVG字体渲染的一种格式,支持这种字体的浏览器有 Chrome4+,Safari3.1+,Opera10.0+,iOS Mobile Safari3.2+ 所以，@font-face中我们至少需要.woff,.eot两种格式字体，甚至还需要.svg等字体达到更多种浏览版本的支持。</p>
                  <h2 id="综合写法"><a href="#综合写法" class="headerlink" title="综合写法"></a><strong>综合写法</strong></h2>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"> <span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'YourWebFontName'</span>;</span><br><span class="line">    <span class="comment">/* IE9 Compat Modes */</span></span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'YourWebFontName.eot'</span>);</span><br><span class="line">    <span class="comment">/* IE6-IE8 */</span></span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'YourWebFontName.eot?#iefix'</span>) <span class="built_in">format</span>(<span class="string">'embedded-opentype'</span>), </span><br><span class="line">        <span class="comment">/* Modern Browsers */</span></span><br><span class="line">        <span class="built_in">url</span>(<span class="string">'YourWebFontName.woff'</span>) <span class="built_in">format</span>(<span class="string">'woff'</span>), </span><br><span class="line">        <span class="comment">/* Safari, Android, iOS */</span></span><br><span class="line">        <span class="built_in">url</span>(<span class="string">'YourWebFontName.ttf'</span>)  <span class="built_in">format</span>(<span class="string">'truetype'</span>), </span><br><span class="line">        <span class="comment">/* Legacy iOS */</span></span><br><span class="line">        <span class="built_in">url</span>(<span class="string">'YourWebFontName.svg#YourWebFontName'</span>) <span class="built_in">format</span>(<span class="string">'svg'</span>); </span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h2 id="获取字体"><a href="#获取字体" class="headerlink" title="获取字体"></a>获取字体</h2>
                  <p>在这里介绍一个网站，叫做 <a href="http://www.fontsquirrel.com/tools/webfont-generator" target="_blank" rel="noopener">fontsquirrel</a></p>
                  <p>在这里，你可以通过上传你的字体，来获取上面四种格式的字体文件。</p>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327005358.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327005358.jpg" alt="20150327005358"></a></p>
                  <p>我们点击按钮 UPLOAD FONTS，选择本地的字体文件，然后网站就会为我们生成上述格式的字体文件，勾选 Agreement，然后直接点击下载即可，DOWNLOAD YOUR KIT。</p>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327005550.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327005550.jpg" alt="20150327005550"></a></p>
                  <p>比如我上传的字体名叫做 FuturaICG-Light，那么下载之后的文件目录就如下</p>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327010127.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327010127.jpg" alt="20150327010127"></a></p>
                  <p>其中，这个目录下给我们生成了一个demo，可以用浏览器打开 html 后缀的文件，预览一下 demo 是怎么写的。</p>
                  <h2 id="应用字体"><a href="#应用字体" class="headerlink" title="应用字体"></a>应用字体</h2>
                  <p>如果我们要用，就把五个字体文件复制一下，复制到项目目录里。</p>
                  <p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327010641.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327010641.jpg" alt="20150327010641"></a></p>
                  <p>然后在样式表css中加入如下代码即可生效啦，这个代码在 demo 的 stylesheet 文件中，我们直接复制即可，比如我的便是</p>
                  <figure class="highlight css">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'futuraicg_lightregular'</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.eot'</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.eot?#iefix'</span>) <span class="built_in">format</span>(<span class="string">'embedded-opentype'</span>),</span><br><span class="line">         <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.woff2'</span>) <span class="built_in">format</span>(<span class="string">'woff2'</span>),</span><br><span class="line">         <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.woff'</span>) <span class="built_in">format</span>(<span class="string">'woff'</span>),</span><br><span class="line">         <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.ttf'</span>) <span class="built_in">format</span>(<span class="string">'truetype'</span>),</span><br><span class="line">         <span class="built_in">url</span>(<span class="string">'FuturaICG-Light-webfont.svg#futuraicg_lightregular'</span>) <span class="built_in">format</span>(<span class="string">'svg'</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里要注意路径问题，如果 css 在字体的上级目录，那么就要在前面加上字体文件夹的名称，我想大家都能理解。 刷新一下页面，我们可以发现页面的字体效果就已经生效啦。 如果有不生效的地方，很可能是 CSS 表中设置了 html 或者 body 的 font-family 样式，在这里我们只需要把它们去掉即可。如图所示，把改行删掉即可。 <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327011119.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327011119.jpg" alt="20150327011119"></a></p>
                  <p>这时，如果还不行，请检查路径设置。 以上就是我们用 CSS3 来自定义网页字体的方法，希望对大家有帮助。</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-27 01:13:20" itemprop="dateCreated datePublished" datetime="2015-03-27T01:13:20+08:00">2015-03-27</time>
                </span>
                <span id="/1491.html" class="post-meta-item leancloud_visitors" data-flag-title="使用CSS3自定义网页字体的方法" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>2.5k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>2 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1485.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> Other <i class="label-arrow"></i>
                  </a>
                  <a href="/1485.html" class="post-title-link" itemprop="url">Mysql数据库无法远程连接的解决方法</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <p>在远程主机上，我开启了mysql 服务，用 phpmyadmin 可以打开，比如说用户名为 root，密码为 123456。不过用 Mysql 客户端远程连接时却报了错误，比如 Mysql-Front 报了如下错误。 Access denied for user ‘root’@’121.42.8.33’(using password:YES) <a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327004005.jpg" target="_blank" rel="noopener"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/20150327004005.jpg" alt="20150327004005"></a> 比较奇怪，phpmyadmin 可以正常访问，而 Mysql-Front 为什么无法连接呢？可能的原因，应该就是 IP 限制了，phpmyadmin在连接时使用的是localhost，而我们访问页面才使用的远程主机的 IP，而 Mysql-Front 连接的是远程主机。 解决方法如下， 首先修改mysql的配置文件,my.cnf,将</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">#bind-address = <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这一行注释掉,要不然它永远限制了只能本机连接 然后我们需要新建一个用户，然后授予所有 IP 可以访问的权限就好啦。 在下面的 sql 语句中，username 即为用户名，password 为你要设置的密码。</p>
                  <figure class="highlight sql">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'username'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'password'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'localhost'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'username'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'password'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'%'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>通过执行以上语句，便创建了一个用户名为 username，密码为 password 的新账户，再用新账号登录，就可以连接成功啦。</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-27 00:43:10" itemprop="dateCreated datePublished" datetime="2015-03-27T00:43:10+08:00">2015-03-27</time>
                </span>
                <span id="/1485.html" class="post-meta-item leancloud_visitors" data-flag-title="Mysql数据库无法远程连接的解决方法" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>722</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>1 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1479.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1479.html" class="post-title-link" itemprop="url">PHP高级特性学习总结</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <p>搞WEB开发，PHP后台当然少不了，PHP的高级用法虽然不一定用到，但是作为WEB开发人员，是必须要了解的。在这里，博主把自己学习的一些高级特性总结如下，希望对大家有帮助。</p>
                  <h2 id="PHP高级特性总结"><a href="#PHP高级特性总结" class="headerlink" title="PHP高级特性总结"></a>PHP高级特性总结</h2>
                  <p><a href="http://cuiqingcai.com/1186.html">1. PHP高级特性一之正则表达式用法</a> 2. <a href="http://cuiqingcai.com/1229.html">PHP高级特性二之文件处理</a> 3. <a href="http://cuiqingcai.com/1290.html">PHP高级特性三之文件上传和下载</a> 4. <a href="http://cuiqingcai.com/1470.html">PHP高级特性四之SMTP邮件发送</a> 5. <a href="http://cuiqingcai.com/1473.html">PHP高级特性五之时间处理</a> 6. <a href="http://cuiqingcai.com/1515.html">PHP高级特性六之图像处理</a> 7. <a href="http://cuiqingcai.com/1527.html">PHP高级特性七之验证码操作</a> 随着学习的进行，会不断更新，希望对大家有帮助！</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-19 14:44:03" itemprop="dateCreated datePublished" datetime="2015-03-19T14:44:03+08:00">2015-03-19</time>
                </span>
                <span id="/1479.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性学习总结" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>234</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>1 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1473.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1473.html" class="post-title-link" itemprop="url">PHP高级特性五之时间处理</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>PHP中的时间处理函数是非常常用的，在这里我们介绍的主要内容有</p>
                  <h2 id="UNIX时间戳"><a href="#UNIX时间戳" class="headerlink" title="UNIX时间戳"></a>UNIX时间戳</h2>
                  <p>以整数表示格林威治标准时间，英文叫做 timestamp，例如 11230499325，它在UNIX系统中是以32位存储的。从协调世界时1970年1月1日0时0分0秒起至现在的总秒数，不考虑闰秒。 作用：方便我们计算使用（参于运算）。</p>
                  <h2 id="获取时间函数"><a href="#获取时间函数" class="headerlink" title="获取时间函数"></a>获取时间函数</h2>
                  <h3 id="1-int-time-void"><a href="#1-int-time-void" class="headerlink" title="1.int time ( void )"></a>1.int time ( void )</h3>
                  <p>返回自从 Unix 纪元（格林威治时间 1970 年 1 月 1 日 00:00:00）到当前时间的秒数，即返回的就是UNIX时间戳。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> </span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> time();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"> <span class="number">1426741342</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="2-array-getdate-int-timestamp-array-getDate-int-timestamp"><a href="#2-array-getdate-int-timestamp-array-getDate-int-timestamp" class="headerlink" title="2.array getdate ( [int timestamp] )/array getDate ( [int timestamp] )"></a>2.array getdate ( [int timestamp] )/array getDate ( [int timestamp] )</h3>
                  <p>可以通过传入时间戳获得时间，也可以不传参数获取时间。例如下面的例子获取了当前时间，返回类型是一个数组。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> </span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>;</span></span><br><span class="line"><span class="php">	print_r(getDate());  <span class="comment">//或者getdate();</span></span></span><br><span class="line"><span class="php">	<span class="keyword">echo</span> <span class="string">"&lt;/pre&gt;"</span>;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight php">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [seconds] =&gt; <span class="number">4</span></span><br><span class="line">    [minutes] =&gt; <span class="number">6</span></span><br><span class="line">    [hours] =&gt; <span class="number">5</span></span><br><span class="line">    [mday] =&gt; <span class="number">19</span></span><br><span class="line">    [wday] =&gt; <span class="number">4</span></span><br><span class="line">    [mon] =&gt; <span class="number">3</span></span><br><span class="line">    [year] =&gt; <span class="number">2015</span></span><br><span class="line">    [yday] =&gt; <span class="number">77</span></span><br><span class="line">    [weekday] =&gt; Thursday</span><br><span class="line">    [month] =&gt; March</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1426741564</span></span><br><span class="line">)</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>数组各个元素的说明如下</p>
                  <p>键名</p>
                  <p>说明</p>
                  <p>返回值例子</p>
                  <p>“seconds”</p>
                  <p>秒的数字表示</p>
                  <p>0 到 59</p>
                  <p>“minutes”</p>
                  <p>分钟的数字表示</p>
                  <p>0 到 59</p>
                  <p>“hours”</p>
                  <p>小时的数字表示</p>
                  <p>0 到 23</p>
                  <p>“mday”</p>
                  <p>月份中第几天的数字表示</p>
                  <p>1 到 31</p>
                  <p>“wday”</p>
                  <p>星期中第几天的数字表示</p>
                  <p>0（表示星期天）到 6（表示星期六）</p>
                  <p>“mon”</p>
                  <p>月份的数字表示</p>
                  <p>1 到 12</p>
                  <p>“year”</p>
                  <p>4 位数字表示的完整年份</p>
                  <p>例如：1999 或 2003</p>
                  <p>“yday”</p>
                  <p>一年中第几天的数字表示</p>
                  <p>0 到 365</p>
                  <p>“weekday”</p>
                  <p>星期几的完整文本表示</p>
                  <p>Sunday 到 Saturday</p>
                  <p>“month”</p>
                  <p>月份的完整文本表示</p>
                  <p>January&gt; 到 December</p>
                  <p>可以传入时间戳参数，如下所示</p>
                  <figure class="highlight reasonml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php </span><br><span class="line">	echo <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">	print<span class="constructor">_r(<span class="params">getDate</span>(<span class="params">time</span>()</span>+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>));</span><br><span class="line">	print<span class="constructor">_r(<span class="params">getdate</span>(<span class="params">time</span>()</span>));</span><br><span class="line">	echo <span class="string">"&lt;/pre&gt;"</span>;</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h2 id="时间戳转日期"><a href="#时间戳转日期" class="headerlink" title="时间戳转日期"></a>时间戳转日期</h2>
                  <h3 id="1-string-date-string-format-int-timestamp"><a href="#1-string-date-string-format-int-timestamp" class="headerlink" title="1.string date ( string format [, int timestamp] )"></a>1.string date ( string format [, int timestamp] )</h3>
                  <p>返回将整数 timestamp 按照给定的格式字串而产生的字符串。如果没有给出时间戳则使用本地当前时间。换句话说，timestamp 是可选的，默认值为 time()。</p>
                  <figure class="highlight sqf">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line"> <span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y-m-d H:i:s"</span>).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"> <span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y-m-d H:i:s"</span>,<span class="built_in">time</span>()).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"> <span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y-m-d H:i:s"</span>,<span class="built_in">time</span>()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="number">2015</span><span class="number">-03</span><span class="number">-19</span> <span class="number">05</span>:<span class="number">45</span>:<span class="number">49</span></span><br><span class="line"><span class="number">2015</span><span class="number">-03</span><span class="number">-19</span> <span class="number">05</span>:<span class="number">45</span>:<span class="number">49</span></span><br><span class="line"><span class="number">2015</span><span class="number">-03</span><span class="number">-20</span> <span class="number">05</span>:<span class="number">45</span>:<span class="number">49</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>下面是格式化的字符表</p>
                  <p>format 字符</p>
                  <p>说明</p>
                  <p>返回值例子</p>
                  <p>日</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>d</p>
                  <p>月份中的第几天，有前导零的 2 位数字</p>
                  <p>01 到 31</p>
                  <p>D</p>
                  <p>星期中的第几天，文本表示，3 个字母</p>
                  <p>Mon 到 Sun</p>
                  <p>j</p>
                  <p>月份中的第几天，没有前导零</p>
                  <p>1 到 31</p>
                  <p>l（“L”的小写字母）</p>
                  <p>星期几，完整的文本格式</p>
                  <p>Sunday 到 Saturday</p>
                  <p>N</p>
                  <p>ISO-8601 格式数字表示的星期中的第几天（PHP 5.1.0 新加）</p>
                  <p>1（表示星期一）到 7（表示星期天）</p>
                  <p>S</p>
                  <p>每月天数后面的英文后缀，2 个字符</p>
                  <p>st，nd，rd 或者 th。可以和 j 一起用</p>
                  <p>w</p>
                  <p>星期中的第几天，数字表示</p>
                  <p>0（表示星期天）到 6（表示星期六）</p>
                  <p>z</p>
                  <p>年份中的第几天</p>
                  <p>0 到 366</p>
                  <p>星期</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>W</p>
                  <p>ISO-8601 格式年份中的第几周，每周从星期一开始（PHP 4.1.0 新加的）</p>
                  <p>例如：42（当年的第 42 周）</p>
                  <p>月</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>F</p>
                  <p>月份，完整的文本格式，例如 January 或者 March</p>
                  <p>January 到 December</p>
                  <p>m</p>
                  <p>数字表示的月份，有前导零</p>
                  <p>01 到 12</p>
                  <p>M</p>
                  <p>三个字母缩写表示的月份</p>
                  <p>Jan 到 Dec</p>
                  <p>n</p>
                  <p>数字表示的月份，没有前导零</p>
                  <p>1 到 12</p>
                  <p>t</p>
                  <p>给定月份所应有的天数</p>
                  <p>28 到 31</p>
                  <p>年</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>L</p>
                  <p>是否为闰年</p>
                  <p>如果是闰年为 1，否则为 0</p>
                  <p>o</p>
                  <p>ISO-8601 格式年份数字。这和 Y 的值相同，只除了如果 ISO 的星期数（W）属于前一年或下一年，则用那一年。（PHP 5.1.0 新加）</p>
                  <p>Examples: 1999 or 2003</p>
                  <p>Y</p>
                  <p>4 位数字完整表示的年份</p>
                  <p>例如：1999 或 2003</p>
                  <p>y</p>
                  <p>2 位数字表示的年份</p>
                  <p>例如：99 或 03</p>
                  <p>时间</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>a</p>
                  <p>小写的上午和下午值</p>
                  <p>am 或 pm</p>
                  <p>A</p>
                  <p>大写的上午和下午值</p>
                  <p>AM 或 PM</p>
                  <p>B</p>
                  <p>Swatch Internet 标准时</p>
                  <p>000 到 999</p>
                  <p>g</p>
                  <p>小时，12 小时格式，没有前导零</p>
                  <p>1 到 12</p>
                  <p>G</p>
                  <p>小时，24 小时格式，没有前导零</p>
                  <p>0 到 23</p>
                  <p>h</p>
                  <p>小时，12 小时格式，有前导零</p>
                  <p>01 到 12</p>
                  <p>H</p>
                  <p>小时，24 小时格式，有前导零</p>
                  <p>00 到 23</p>
                  <p>i</p>
                  <p>有前导零的分钟数</p>
                  <p>00 到 59&gt;</p>
                  <p>s</p>
                  <p>秒数，有前导零</p>
                  <p>00 到 59&gt;</p>
                  <p>时区</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>e</p>
                  <p>时区标识（PHP 5.1.0 新加）</p>
                  <p>例如：UTC，GMT，Atlantic/Azores</p>
                  <p>I</p>
                  <p>是否为夏令时</p>
                  <p>如果是夏令时为 1，否则为 0</p>
                  <p>O</p>
                  <p>与格林威治时间相差的小时数</p>
                  <p>例如：+0200</p>
                  <p>T</p>
                  <p>本机所在的时区</p>
                  <p>例如：EST，MDT（【译者注】在 Windows 下为完整文本格式，例如“Eastern Standard Time”，中文版会显示“中国标准时间”）。</p>
                  <p>Z</p>
                  <p>时差偏移量的秒数。UTC 西边的时区偏移量总是负的，UTC 东边的时区偏移量总是正的。</p>
                  <p>-43200 到 43200</p>
                  <p>完整的日期／时间</p>
                  <p>-—</p>
                  <p>-—</p>
                  <p>c</p>
                  <p>ISO 8601 格式的日期（PHP 5 新加）</p>
                  <p>2004-02-12T15:19:21+00:00</p>
                  <p>r</p>
                  <p>RFC 822 格式的日期</p>
                  <p>例如：Thu, 21 Dec 2000 16:01:07 +0200</p>
                  <p>U</p>
                  <p>从 Unix 纪元（January 1 1970 00:00:00 GMT）开始至今的秒数</p>
                  <p>参见 time()</p>
                  <h2 id="日期转时间戳"><a href="#日期转时间戳" class="headerlink" title="日期转时间戳"></a>日期转时间戳</h2>
                  <h3 id="1-int-mktime-int-hour-int-minute-int-second-int-month-int-day-int-year-int-is-dst"><a href="#1-int-mktime-int-hour-int-minute-int-second-int-month-int-day-int-year-int-is-dst" class="headerlink" title="1.int mktime ( [int hour [, int minute [, int second [, int month [, int day [, int year [, int is_dst]]]]]]] )"></a>1.int mktime ( [int hour [, int minute [, int second [, int month [, int day [, int year [, int is_dst]]]]]]] )</h3>
                  <p>根据给出的参数返回 Unix 时间戳。时间戳是一个长整数，包含了从 Unix 纪元（January 1 1970 00:00:00 GMT）到给定时间的秒数。参数可以从右向左省略，任何省略的参数会被设置成本地日期和时间的当前值。 例如我们获取1997年12月1日的时间戳</p>
                  <figure class="highlight lsl">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">echo mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">1997</span>).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"> <span class="number">880934400</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里如果我们的年份如果填2位数，函数可以智能给我们转化，例如第六个参数填 97，那么则会识别为 1997年，如果填 03，那么则会识别为 2003年。那么有的小伙伴就问了，两个之间的分界点是哪一年哪一月哪一日呢？我们来看下面的例子</p>
                  <figure class="highlight lsl">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">	echo date(<span class="string">"m-d-Y"</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">12</span>, <span class="number">32</span>, <span class="number">1997</span>)).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">	echo date(<span class="string">"M-d-Y"</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">14</span>, <span class="number">98</span>)).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">	echo date(<span class="string">"M-d-Y"</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">03</span>)).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">	echo date(<span class="string">"M-d-Y"</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">19</span>, <span class="number">38</span>)).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">	echo date(<span class="string">"M-d-Y"</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">38</span>)).<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="number">01</span><span class="number">-01</span><span class="number">-1998</span></span><br><span class="line">Mar<span class="number">-14</span><span class="number">-1998</span></span><br><span class="line">Jan<span class="number">-01</span><span class="number">-2003</span></span><br><span class="line">Jan<span class="number">-19</span><span class="number">-2038</span></span><br><span class="line">Jan<span class="number">-01</span><span class="number">-1970</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>在这里我们可以发现，当我们输入2038年的1月19日时，可以正常识别为2038-1-19，不过当我们输入2038年1月20日时，则识别成了1970-1-1，可见分界点就在2038-1-19这一天。 在这里有个有趣的2038年问题，扩展阅读一下</p>
                  <blockquote>
                    <p>在计算机应用上，2038年问题可能会导致某些软件在2038年无法正常工作。所有使用UNIX时间表示时间的程序都将受其影响，因为它们以自1970年1月1日经过的秒数（忽略闰秒）来表示时间。这种时间表示法在类Unix（Unix-like）操作系统上是一个标准，并会影响以其C编程语言开发给其他大部份操作系统使用的软件。在大部份的32位操作系统上，此“time_t”数据模式使用一个有正负号的32位元整数(signedint32)存储计算的秒数。依照此“time_t”标准，在此格式能被表示的最后时间是2038年1月19日03:14:07，星期二（UTC）。超过此一瞬间，时间将会被掩盖（wrap around）且在内部被表示为一个负数，并造成程序无法工作，因为它们无法将此时间识别为2038年，而可能会依个别实作而跳回1970年或1901年。错误的计算及动作可能因此产生。</p>
                  </blockquote>
                  <h2 id="修改PHP默认时区"><a href="#修改PHP默认时区" class="headerlink" title="修改PHP默认时区"></a>修改PHP默认时区</h2>
                  <p>我们来看下面一个例子，是上面所说的调用date方法返回的时间。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"> <span class="keyword">echo</span> date(<span class="string">"Y-m-d H:i:s"</span>);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="number">2015</span><span class="number">-03</span><span class="number">-19</span> <span class="number">06</span>:<span class="number">03</span>:<span class="number">22</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>而现在我的电脑系统时间为</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="number">2015</span><span class="number">-03</span><span class="number">-19</span> <span class="number">14</span>:<span class="number">03</span>:<span class="number">22</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>这是什么原因？很简单，PHP程序中返回的是中时区的格林威治时间，而我们国家使用的是东八区区时，所以程序中的时间会慢8个小时。所以，我们只需要设置一下时区即可。</p>
                  <h3 id="1-设置PHP-ini文件"><a href="#1-设置PHP-ini文件" class="headerlink" title="1.设置PHP.ini文件"></a>1.设置PHP.ini文件</h3>
                  <p>这种方法是通用的设置方法，一次设置，其他所有编写的PHP文件都会生效，而且不需要在程序中设置了。只需要修改</p>
                  <figure class="highlight ini">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="section">[Date]</span></span><br><span class="line"><span class="comment">; Defines the default timezone used by the date functions</span></span><br><span class="line"><span class="comment">; http://php.net/date.timezone</span></span><br><span class="line"><span class="attr">date.timezone</span> = PRC</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>默认的 date.timezone = UTC，在这里我们修改为中国的代号PRC即可。修改完之后记得重启服务器才能生效。 再运行程序，发现时间已经很准确了。</p>
                  <h3 id="2-在程序中设置"><a href="#2-在程序中设置" class="headerlink" title="2.在程序中设置"></a>2.在程序中设置</h3>
                  <figure class="highlight ceylon">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">&lt;?php</span><br><span class="line">date<span class="number">_</span><span class="keyword">default</span><span class="number">_</span>timezone<span class="number">_</span>set(<span class="string">"PRC"</span>);</span><br><span class="line">date<span class="number">_</span><span class="keyword">default</span><span class="number">_</span>timezone<span class="number">_</span>set(<span class="string">"Asia/Shanghai"</span>);</span><br><span class="line">date<span class="number">_</span><span class="keyword">default</span><span class="number">_</span>timezone<span class="number">_</span>set(<span class="string">"Gtc/GET-8"</span>);</span><br><span class="line">?&gt;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>上面三行语句均可使用，效果相同。第一个是设置中国时区，第二个是设置上海时区，第三个是设置东八区区时。 <strong>在此附亚洲区时</strong></p>
                  <p>Asia/Aden</p>
                  <p>Asia/Almaty</p>
                  <p>Asia/Amman</p>
                  <p>Asia/Anadyr</p>
                  <p>Asia/Aqtau</p>
                  <p>Asia/Aqtobe</p>
                  <p>Asia/Ashgabat</p>
                  <p>Asia/Ashkhabad</p>
                  <p>Asia/Baghdad</p>
                  <p>Asia/Bahrain</p>
                  <p>Asia/Baku</p>
                  <p>Asia/Bangkok</p>
                  <p>Asia/Beirut</p>
                  <p>Asia/Bishkek</p>
                  <p>Asia/Brunei</p>
                  <p>Asia/Calcutta</p>
                  <p>Asia/Chita</p>
                  <p>Asia/Choibalsan</p>
                  <p>Asia/Chongqing</p>
                  <p>Asia/Chungking</p>
                  <p>Asia/Colombo</p>
                  <p>Asia/Dacca</p>
                  <p>Asia/Damascus</p>
                  <p>Asia/Dhaka</p>
                  <p>Asia/Dili</p>
                  <p>Asia/Dubai</p>
                  <p>Asia/Dushanbe</p>
                  <p>Asia/Gaza</p>
                  <p>Asia/Harbin</p>
                  <p>Asia/Hebron</p>
                  <p>Asia/Ho_Chi_Minh</p>
                  <p>Asia/Hong_Kong</p>
                  <p>Asia/Hovd</p>
                  <p>Asia/Irkutsk</p>
                  <p>Asia/Istanbul</p>
                  <p>Asia/Jakarta</p>
                  <p>Asia/Jayapura</p>
                  <p>Asia/Jerusalem</p>
                  <p>Asia/Kabul</p>
                  <p>Asia/Kamchatka</p>
                  <p>Asia/Karachi</p>
                  <p>Asia/Kashgar</p>
                  <p>Asia/Kathmandu</p>
                  <p>Asia/Katmandu</p>
                  <p>Asia/Khandyga</p>
                  <p>Asia/Kolkata</p>
                  <p>Asia/Krasnoyarsk</p>
                  <p>Asia/Kuala_Lumpur</p>
                  <p>Asia/Kuching</p>
                  <p>Asia/Kuwait</p>
                  <p>Asia/Macao</p>
                  <p>Asia/Macau</p>
                  <p>Asia/Magadan</p>
                  <p>Asia/Makassar</p>
                  <p>Asia/Manila</p>
                  <p>Asia/Muscat</p>
                  <p>Asia/Nicosia</p>
                  <p>Asia/Novokuznetsk</p>
                  <p>Asia/Novosibirsk</p>
                  <p>Asia/Omsk</p>
                  <p>Asia/Oral</p>
                  <p>Asia/Phnom_Penh</p>
                  <p>Asia/Pontianak</p>
                  <p>Asia/Pyongyang</p>
                  <p>Asia/Qatar</p>
                  <p>Asia/Qyzylorda</p>
                  <p>Asia/Rangoon</p>
                  <p>Asia/Riyadh</p>
                  <p>Asia/Saigon</p>
                  <p>Asia/Sakhalin</p>
                  <p>Asia/Samarkand</p>
                  <p>Asia/Seoul</p>
                  <p>Asia/Shanghai</p>
                  <p>Asia/Singapore</p>
                  <p>Asia/Srednekolymsk</p>
                  <p>Asia/Taipei</p>
                  <p>Asia/Tashkent</p>
                  <p>Asia/Tbilisi</p>
                  <p>Asia/Tehran</p>
                  <p>Asia/Tel_Aviv</p>
                  <p>Asia/Thimbu</p>
                  <p>Asia/Thimphu</p>
                  <p>Asia/Tokyo</p>
                  <p>Asia/Ujung_Pandang</p>
                  <p>Asia/Ulaanbaatar</p>
                  <p>Asia/Ulan_Bator</p>
                  <p>Asia/Urumqi</p>
                  <p>Asia/Ust-Nera</p>
                  <p>Asia/Vientiane</p>
                  <p>Asia/Vladivostok</p>
                  <p>Asia/Yakutsk</p>
                  <p>Asia/Yekaterinburg</p>
                  <p>Asia/Yerevan</p>
                  <h2 id="微妙精确计算"><a href="#微妙精确计算" class="headerlink" title="微妙精确计算"></a>微妙精确计算</h2>
                  <h3 id="1-mixed-microtime-bool-get-as-float"><a href="#1-mixed-microtime-bool-get-as-float" class="headerlink" title="1.mixed microtime ( [bool get_as_float] )"></a>1.mixed microtime ( [bool get_as_float] )</h3>
                  <p>microtime() 当前 Unix 时间戳以及微秒数。本函数仅在支持 gettimeofday() 系统调用的操作系统下可用。 如果调用时不带可选参数，本函数以 “msec sec” 的格式返回一个字符串，其中 sec 是自 Unix 纪元（0:00:00 January 1, 1970 GMT）起到现在的秒数，msec 是微秒部分。字符串的两部分都是以秒为单位返回的。如果传入true参数，那么则会返回sec.msec的形式，是一个浮点数。 我们大多数用来计算程序执行时间。</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	<span class="class"><span class="keyword">class</span> <span class="title">Timer</span> </span>&#123;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $startTime; <span class="comment">//开始时间</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $stopTime;  <span class="comment">//结束时间</span></span></span><br><span class="line"><span class="php">		<span class="keyword">private</span> $count = <span class="number">0</span>;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//初始化两个时间为0</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;startTime=<span class="number">0</span>;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;stopTime=<span class="number">0</span>;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//设置开始时间</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;startTime=microtime(<span class="keyword">true</span>);</span></span><br><span class="line"><span class="php">			<span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;startTime.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//设置结束时间</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;stopTime=microtime(<span class="keyword">true</span>);</span></span><br><span class="line"><span class="php">			<span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;stopTime.<span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//计算过了多长时间</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">spent</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;start();</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;dosomething();</span></span><br><span class="line"><span class="php">			<span class="keyword">$this</span>-&gt;stop();</span></span><br><span class="line"><span class="php">			<span class="keyword">return</span> (<span class="keyword">$this</span>-&gt;stopTime - <span class="keyword">$this</span>-&gt;startTime); </span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		</span></span><br><span class="line"><span class="php">		<span class="comment">//程序执行某些任务</span></span></span><br><span class="line"><span class="php">		<span class="function"><span class="keyword">function</span> <span class="title">dosomething</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;<span class="number">10000</span>; $i++)</span></span><br><span class="line"><span class="php">			&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">$this</span>-&gt;count ++;</span></span><br><span class="line"><span class="php">			&#125;	</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	</span></span><br><span class="line"><span class="php">$timer = <span class="keyword">new</span> Timer();</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $timer-&gt;spent();</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="number">1426746064.4247</span></span><br><span class="line"><span class="number">1426746064.4267</span></span><br><span class="line"><span class="number">0.0019998550415039</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>可以发现，程序执行用了 1.99 微秒。 好，关于PHP中的时间问题，我们就介绍到这里，希望对大家有帮助。</p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-19 13:39:09" itemprop="dateCreated datePublished" datetime="2015-03-19T13:39:09+08:00">2015-03-19</time>
                </span>
                <span id="/1473.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性五之时间处理" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>6.7k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>6 分钟</span>
                </span>
              </div>
            </article>
            <article itemscope itemtype="http://schema.org/Article" class="post-block index" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/1470.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="崔庆才的个人站点，记录生活的瞬间，分享学习的心得。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h2 class="post-title" itemprop="name headline">
                  <a class="label"> PHP <i class="label-arrow"></i>
                  </a>
                  <a href="/1470.html" class="post-title-link" itemprop="url">PHP高级特性四之SMTP邮件发送</a>
                </h2>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="thumb">
                  <img itemprop="contentUrl" class="random">
                </div>
                <div class="excerpt">
                  <p>
                  <h2 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h2>
                  <p>PHP的邮件发送最常见的便是SMTP，通过编写一个Smtp类，设置好smtp服务器，邮箱用户名，密码，即可实现邮件的发送</p>
                  <h2 id="邮件发送"><a href="#邮件发送" class="headerlink" title="邮件发送"></a>邮件发送</h2>
                  <p>邮件发送的类如下，文件名叫做</p>
                  <figure class="highlight angelscript">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">email.<span class="keyword">class</span>.<span class="symbol">php</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">/* smtp class */</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">smtp</span> </span>&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">/* Public Variables */</span></span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $smtp_port;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $time_out;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $host_name;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $log_file;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $relay_host;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $debug;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $auth;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $user;</span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $pass;</span></span><br><span class="line"><span class="php">    <span class="comment">/* Private Variables */</span></span></span><br><span class="line"><span class="php">    <span class="keyword">var</span> $sock;</span></span><br><span class="line"><span class="php">    <span class="comment">/* Constractor */</span></span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp</span><span class="params">($relay_host = <span class="string">""</span>, $smtp_port = <span class="number">25</span>, $auth = false, $user, $pass)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;debug = <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_port = $smtp_port;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;relay_host = $relay_host;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;time_out = <span class="number">30</span>; <span class="comment">//is used in fsockopen()</span></span></span><br><span class="line"><span class="php">        <span class="comment">//</span></span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;auth = $auth; <span class="comment">//auth</span></span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;user = $user;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;pass = $pass;</span></span><br><span class="line"><span class="php">        <span class="comment">//</span></span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;host_name = <span class="string">"localhost"</span>; <span class="comment">//is used in HELO command</span></span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;log_file = <span class="string">""</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;sock = <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="comment">/* Main Function */</span></span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">sendmail</span><span class="params">($to, $from, $subject = <span class="string">""</span>, $body = <span class="string">""</span>, $mailtype, $cc = <span class="string">""</span>, $bcc = <span class="string">""</span>, $additional_headers = <span class="string">""</span>)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $mail_from = <span class="keyword">$this</span>-&gt;get_address(<span class="keyword">$this</span>-&gt;strip_comment($from));</span></span><br><span class="line"><span class="php">        $body = preg_replace(<span class="string">"/(^|(\r\n))(\.)/"</span>, <span class="string">"\1.\3"</span>, $body);</span></span><br><span class="line"><span class="php">        $header = <span class="string">"MIME-Version:1.0\r\n"</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($mailtype == <span class="string">"HTML"</span>) &#123;</span></span><br><span class="line"><span class="php">            $header.= <span class="string">"Content-Type:text/html\r\n"</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"To: "</span> . $to . <span class="string">"\r\n"</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($cc != <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            $header.= <span class="string">"Cc: "</span> . $cc . <span class="string">"\r\n"</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"From: $from&lt;"</span> . $from . <span class="string">"&gt;\r\n"</span>;</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"Subject: "</span> . $subject . <span class="string">"\r\n"</span>;</span></span><br><span class="line"><span class="php">        $header.= $additional_headers;</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"Date: "</span> . date(<span class="string">"r"</span>) . <span class="string">"\r\n"</span>;</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"X-Mailer:By Redhat (PHP/"</span> . phpversion() . <span class="string">")\r\n"</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">list</span>($msec, $sec) = explode(<span class="string">" "</span>, microtime());</span></span><br><span class="line"><span class="php">        $header.= <span class="string">"Message-ID: &lt;"</span> . date(<span class="string">"YmdHis"</span>, $sec) . <span class="string">"."</span> . ($msec * <span class="number">1000000</span>) . <span class="string">"."</span> . $mail_from . <span class="string">"&gt;\r\n"</span>;</span></span><br><span class="line"><span class="php">        $TO = explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($to));</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($cc != <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            $TO = array_merge($TO, explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($cc)));</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($bcc != <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            $TO = array_merge($TO, explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($bcc)));</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        $sent = <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">foreach</span> ($TO <span class="keyword">as</span> $rcpt_to) &#123;</span></span><br><span class="line"><span class="php">            $rcpt_to = <span class="keyword">$this</span>-&gt;get_address($rcpt_to);</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_sockopen($rcpt_to)) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot send email to "</span> . $rcpt_to . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">                $sent = <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">                <span class="keyword">continue</span>;</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;smtp_send(<span class="keyword">$this</span>-&gt;host_name, $mail_from, $rcpt_to, $header, $body)) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"E-mail has been sent to &lt;"</span> . $rcpt_to . <span class="string">"&gt;\n"</span>);</span></span><br><span class="line"><span class="php">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot send email to &lt;"</span> . $rcpt_to . <span class="string">"&gt;\n"</span>);</span></span><br><span class="line"><span class="php">                $sent = <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">            fclose(<span class="keyword">$this</span>-&gt;sock);</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Disconnected from remote host\n"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $sent;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="comment">/* Private Functions */</span></span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_send</span><span class="params">($helo, $from, $to, $header, $body = <span class="string">""</span>)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"HELO"</span>, $helo)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="comment">//auth</span></span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;auth) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"AUTH LOGIN"</span>, base64_encode(<span class="keyword">$this</span>-&gt;user))) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">""</span>, base64_encode(<span class="keyword">$this</span>-&gt;pass))) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="comment">//</span></span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"MAIL"</span>, <span class="string">"FROM:&lt;"</span> . $from . <span class="string">"&gt;"</span>)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending MAIL FROM command"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"RCPT"</span>, <span class="string">"TO:&lt;"</span> . $to . <span class="string">"&gt;"</span>)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending RCPT TO command"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"DATA"</span>)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending DATA command"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_message($header, $body)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending message"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_eom()) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; [EOM]"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"QUIT"</span>)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending QUIT command"</span>);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen</span><span class="params">($address)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;relay_host == <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_sockopen_mx($address);</span></span><br><span class="line"><span class="php">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_sockopen_relay();</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen_relay</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Trying to "</span> . <span class="keyword">$this</span>-&gt;relay_host . <span class="string">":"</span> . <span class="keyword">$this</span>-&gt;smtp_port . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;sock = @fsockopen(<span class="keyword">$this</span>-&gt;relay_host, <span class="keyword">$this</span>-&gt;smtp_port, $errno, $errstr, <span class="keyword">$this</span>-&gt;time_out);</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!(<span class="keyword">$this</span>-&gt;sock &amp;&amp; <span class="keyword">$this</span>-&gt;smtp_ok())) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot connenct to relay host "</span> . <span class="keyword">$this</span>-&gt;relay_host . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: "</span> . $errstr . <span class="string">" ("</span> . $errno . <span class="string">")\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Connected to relay host "</span> . <span class="keyword">$this</span>-&gt;relay_host . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen_mx</span><span class="params">($address)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $domain = preg_replace(<span class="string">"/^.+@([^@]+)$/"</span>, <span class="string">"\1"</span>, $address);</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!@getmxrr($domain, $MXHOSTS)) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot resolve MX \""</span> . $domain . <span class="string">"\"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">foreach</span> ($MXHOSTS <span class="keyword">as</span> $host) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Trying to "</span> . $host . <span class="string">":"</span> . <span class="keyword">$this</span>-&gt;smtp_port . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;sock = @fsockopen($host, <span class="keyword">$this</span>-&gt;smtp_port, $errno, $errstr, <span class="keyword">$this</span>-&gt;time_out);</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> (!(<span class="keyword">$this</span>-&gt;sock &amp;&amp; <span class="keyword">$this</span>-&gt;smtp_ok())) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Warning: Cannot connect to mx host "</span> . $host . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: "</span> . $errstr . <span class="string">" ("</span> . $errno . <span class="string">")\n"</span>);</span></span><br><span class="line"><span class="php">                <span class="keyword">continue</span>;</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Connected to mx host "</span> . $host . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot connect to any mx hosts ("</span> . implode(<span class="string">", "</span>, $MXHOSTS) . <span class="string">")\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_message</span><span class="params">($header, $body)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        fputs(<span class="keyword">$this</span>-&gt;sock, $header . <span class="string">"\r\n"</span> . $body);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"&gt; "</span> . str_replace(<span class="string">"\r\n"</span>, <span class="string">"\n"</span> . <span class="string">"&gt; "</span>, $header . <span class="string">"\n&gt; "</span> . $body . <span class="string">"\n&gt; "</span>));</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_eom</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        fputs(<span class="keyword">$this</span>-&gt;sock, <span class="string">"\r\n.\r\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">". [EOM]\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_ok();</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_ok</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $response = str_replace(<span class="string">"\r\n"</span>, <span class="string">""</span>, fgets(<span class="keyword">$this</span>-&gt;sock, <span class="number">512</span>));</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_debug($response . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!preg_match(<span class="string">"/^[23]/"</span>, $response)) &#123;</span></span><br><span class="line"><span class="php">            fputs(<span class="keyword">$this</span>-&gt;sock, <span class="string">"QUIT\r\n"</span>);</span></span><br><span class="line"><span class="php">            fgets(<span class="keyword">$this</span>-&gt;sock, <span class="number">512</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Remote host returned \""</span> . $response . <span class="string">"\"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_putcmd</span><span class="params">($cmd, $arg = <span class="string">""</span>)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($arg != <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> ($cmd == <span class="string">""</span>) $cmd = $arg;</span></span><br><span class="line"><span class="php">            <span class="keyword">else</span> $cmd = $cmd . <span class="string">" "</span> . $arg;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        fputs(<span class="keyword">$this</span>-&gt;sock, $cmd . <span class="string">"\r\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"&gt; "</span> . $cmd . <span class="string">"\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_ok();</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_error</span><span class="params">($string)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Error occurred while "</span> . $string . <span class="string">".\n"</span>);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">log_write</span><span class="params">($message)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;smtp_debug($message);</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;log_file == <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        $message = date(<span class="string">"M d H:i:s "</span>) . get_current_user() . <span class="string">"["</span> . getmypid() . <span class="string">"]: "</span> . $message;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (!@file_exists(<span class="keyword">$this</span>-&gt;log_file) || !($fp = @fopen(<span class="keyword">$this</span>-&gt;log_file, <span class="string">"a"</span>))) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"Warning: Cannot open log file \""</span> . <span class="keyword">$this</span>-&gt;log_file . <span class="string">"\"\n"</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        flock($fp, LOCK_EX);</span></span><br><span class="line"><span class="php">        fputs($fp, $message);</span></span><br><span class="line"><span class="php">        fclose($fp);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">strip_comment</span><span class="params">($address)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $comment = <span class="string">"/\([^()]*\)/"</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">while</span> (preg_match($comment, $address)) &#123;</span></span><br><span class="line"><span class="php">            $address = preg_replace($comment, <span class="string">""</span>, $address);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $address;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">get_address</span><span class="params">($address)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $address = preg_replace(<span class="string">"/([ \t\r\n])+/"</span>, <span class="string">""</span>, $address);</span></span><br><span class="line"><span class="php">        $address = preg_replace(<span class="string">"/^.*&lt;(.+)&gt;.*$/"</span>, <span class="string">"\1"</span>, $address);</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $address;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_debug</span><span class="params">($message)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;debug) &#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">echo</span> $message;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>然后便是一个php文件引用该文件，设置好各种参数</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>发送状态<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"></span><br><span class="line"><span class="php">			<span class="keyword">require_once</span> <span class="string">"email.class.php"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//SMTP服务器</span></span></span><br><span class="line"><span class="php">			$smtpserver = <span class="string">"smtp.163.com"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//SMTP端口号?</span></span></span><br><span class="line"><span class="php">			$smtpserverport = <span class="number">25</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//SMTP发邮件的邮箱</span></span></span><br><span class="line"><span class="php">			$smtpusermail = <span class="string">"cqc@163.com"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//发给谁</span></span></span><br><span class="line"><span class="php">			$smtpemailto = $_POST[<span class="string">'toemail'</span>];</span></span><br><span class="line"><span class="php">			<span class="comment">//SMTP用户名，不加@163.com</span></span></span><br><span class="line"><span class="php">			$smtpuser = <span class="string">"cqc"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//SMTP用户密码</span></span></span><br><span class="line"><span class="php">			$smtppass = <span class="string">"wtf"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//主题</span></span></span><br><span class="line"><span class="php">			$mailtitle = $_POST[<span class="string">'topic'</span>];</span></span><br><span class="line"><span class="php">			<span class="comment">//构建内容</span></span></span><br><span class="line"><span class="php">			$mailcontent = <span class="string">"TA的名字 "</span>.$_POST[<span class="string">'name'</span>].<span class="string">"&lt;br&gt;内容: "</span>.$_POST[<span class="string">'content'</span>];</span></span><br><span class="line"><span class="php">			<span class="comment">//邮件内容为HTML格式</span></span></span><br><span class="line"><span class="php">			$mailtype = <span class="string">"HTML"</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//实例化对象</span></span></span><br><span class="line"><span class="php">			$smtp = <span class="keyword">new</span> smtp($smtpserver,$smtpserverport,<span class="keyword">true</span>,$smtpuser,$smtppass);</span></span><br><span class="line"><span class="php">			<span class="comment">//关闭调试信息</span></span></span><br><span class="line"><span class="php">			$smtp-&gt;debug = <span class="keyword">false</span>;</span></span><br><span class="line"><span class="php">			<span class="comment">//发送邮件</span></span></span><br><span class="line"><span class="php">			$state = $smtp-&gt;sendmail($smtpemailto, $smtpusermail, $mailtitle, $mailcontent, $mailtype);</span></span><br><span class="line"><span class="php">			<span class="comment">//检查发送状态</span></span></span><br><span class="line"><span class="php">			<span class="keyword">if</span>($state==<span class="string">""</span>)&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">echo</span> <span class="string">"邮件发送失败，请检查密码或其他设置"</span>;</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(strlen($state)!=<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="php">			<span class="comment">//发送成功</span></span></span><br><span class="line"><span class="php">				<span class="keyword">echo</span> <span class="string">"邮件发送成功"</span>;</span></span><br><span class="line"><span class="php">			&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">				<span class="keyword">echo</span> <span class="string">"未知错误"</span>;</span></span><br><span class="line"><span class="php">			&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">		<span class="meta">?&gt;</span></span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>最后是一个表单提交，包括目的邮箱，主题，内容</p>
                  <figure class="highlight xml">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>PHP利用SMTP发送邮件范例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"sendmail.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>收件人：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"toemail"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>标<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>题：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"topic"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>姓<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>内<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>容：<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">cols</span>=<span class="string">"50"</span> <span class="attr">rows</span>=<span class="string">"5"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"发送"</span>  /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h2 id="代码下载"><a href="#代码下载" class="headerlink" title="代码下载"></a>代码下载</h2>
                  <p><a href="https://github.com/cqcre/sendmail" target="_blank" rel="noopener">代码下载</a></p>
                  </p>
                </div>
              </div>
              <div class="post-meta">
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-user"></i>
                  </span>
                  <span class="post-meta-item-text">作者</span>
                  <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                </span>
                <span class="post-meta-item">
                  <span class="post-meta-item-icon">
                    <i class="far fa-calendar"></i>
                  </span>
                  <span class="post-meta-item-text">发表于</span>
                  <time title="创建时间：2015-03-18 19:36:15" itemprop="dateCreated datePublished" datetime="2015-03-18T19:36:15+08:00">2015-03-18</time>
                </span>
                <span id="/1470.html" class="post-meta-item leancloud_visitors" data-flag-title="PHP高级特性四之SMTP邮件发送" title="阅读次数">
                  <span class="post-meta-item-icon">
                    <i class="fa fa-eye"></i>
                  </span>
                  <span class="post-meta-item-text">阅读次数：</span>
                  <span class="leancloud-visitors-count"></span>
                </span>
                <span class="post-meta-item" title="本文字数">
                  <span class="post-meta-item-icon">
                    <i class="far fa-file-word"></i>
                  </span>
                  <span class="post-meta-item-text">本文字数：</span>
                  <span>8.9k</span>
                </span>
                <span class="post-meta-item" title="阅读时长">
                  <span class="post-meta-item-icon">
                    <i class="far fa-clock"></i>
                  </span>
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                  <span>8 分钟</span>
                </span>
              </div>
            </article>
            <script>
              document.querySelectorAll('.random').forEach(item => item.src = "https://picsum.photos/id/" + Math.floor(Math.random() * Math.floor(300)) + "/200/133")

            </script>
            <nav class="pagination">
              <a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
            </nav>
          </div>
          <script>
            window.addEventListener('tabs:register', () =>
            {
              let
              {
                activeClass
              } = CONFIG.comments;
              if (CONFIG.comments.storage)
              {
                activeClass = localStorage.getItem('comments_active') || activeClass;
              }
              if (activeClass)
              {
                let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
                if (activeTab)
                {
                  activeTab.click();
                }
              }
            });
            if (CONFIG.comments.storage)
            {
              window.addEventListener('tabs:click', event =>
              {
                if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
                let commentClass = event.target.classList[1];
                localStorage.setItem('comments_active', commentClass);
              });
            }

          </script>
        </div>
        <div class="toggle sidebar-toggle">
          <span class="toggle-line toggle-line-first"></span>
          <span class="toggle-line toggle-line-middle"></span>
          <span class="toggle-line toggle-line-last"></span>
        </div>
        <aside class="sidebar">
          <div class="sidebar-inner">
            <ul class="sidebar-nav motion-element">
              <li class="sidebar-nav-toc"> 文章目录 </li>
              <li class="sidebar-nav-overview"> 站点概览 </li>
            </ul>
            <!--noindex-->
            <div class="post-toc-wrap sidebar-panel">
            </div>
            <!--/noindex-->
            <div class="site-overview-wrap sidebar-panel">
              <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <img class="site-author-image" itemprop="image" alt="崔庆才" src="/images/avatar.png">
                <p class="site-author-name" itemprop="name">崔庆才</p>
                <div class="site-description" itemprop="description">崔庆才的个人站点，记录生活的瞬间，分享学习的心得。</div>
              </div>
              <div class="site-state-wrap motion-element">
                <nav class="site-state">
                  <div class="site-state-item site-state-posts">
                    <a href="/archives/">
                      <span class="site-state-item-count">519</span>
                      <span class="site-state-item-name">日志</span>
                    </a>
                  </div>
                  <div class="site-state-item site-state-categories">
                    <a href="/categories/">
                      <span class="site-state-item-count">21</span>
                      <span class="site-state-item-name">分类</span></a>
                  </div>
                  <div class="site-state-item site-state-tags">
                    <a href="/tags/">
                      <span class="site-state-item-count">122</span>
                      <span class="site-state-item-name">标签</span></a>
                  </div>
                </nav>
              </div>
              <div class="links-of-author motion-element">
                <span class="links-of-author-item">
                  <a href="https://github.com/Germey" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Germey" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
                </span>
                <span class="links-of-author-item">
                  <a href="mailto:cqc@cuiqingcai.com.com" title="邮件 → mailto:cqc@cuiqingcai.com.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>邮件</a>
                </span>
                <span class="links-of-author-item">
                  <a href="https://weibo.com/cuiqingcai" title="微博 → https:&#x2F;&#x2F;weibo.com&#x2F;cuiqingcai" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>微博</a>
                </span>
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/Germey" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;Germey" rel="noopener" target="_blank"><i class="fa fa-magic fa-fw"></i>知乎</a>
                </span>
              </div>
            </div>
            <div style=" width: 100%;" class="sidebar-panel sidebar-panel-image sidebar-panel-active">
              <a href="https://www.abuyun.com/http-proxy/introduce.html" target="_blank" rel="noopener">
                <img src="https://qiniu.cuiqingcai.com/88au8.jpg" style=" width: 100%;">
              </a>
            </div>
            <div style=" width: 100%;" class="sidebar-panel sidebar-panel-image sidebar-panel-active">
              <a href="https://tutorial.lengyue.video/?coupon=12ef4b1a-a3db-11ea-bb37-0242ac130002_cqx_850" target="_blank" rel="noopener">
                <img src="https://qiniu.cuiqingcai.com/bco2a.png" style=" width: 100%;">
              </a>
            </div>
            <div style=" width: 100%;" class="sidebar-panel sidebar-panel-image sidebar-panel-active">
              <a href="https://luminati-china.io/?affiliate=ref_5fbbaaa9647883f5c6f77095" target="_blank" rel="noopener">
                <img src="https://qiniu.cuiqingcai.com/ikkq9.jpg" style=" width: 100%;">
              </a>
            </div>
            <div class="sidebar-panel sidebar-panel-tags sidebar-panel-active">
              <h4 class="name"> 标签云 </h4>
              <div class="content">
                <a href="/tags/2048/" style="font-size: 10px;">2048</a> <a href="/tags/599/" style="font-size: 10px;">599</a> <a href="/tags/Bootstrap/" style="font-size: 11.25px;">Bootstrap</a> <a href="/tags/CDN/" style="font-size: 10px;">CDN</a> <a href="/tags/CQC/" style="font-size: 10px;">CQC</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/CSS-%E5%8F%8D%E7%88%AC%E8%99%AB/" style="font-size: 10px;">CSS 反爬虫</a> <a href="/tags/CV/" style="font-size: 10px;">CV</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Eclipse/" style="font-size: 11.25px;">Eclipse</a> <a href="/tags/FTP/" style="font-size: 10px;">FTP</a> <a href="/tags/GitHub/" style="font-size: 11.25px;">GitHub</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/IT/" style="font-size: 10px;">IT</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/K8s/" style="font-size: 10px;">K8s</a> <a href="/tags/LOGO/" style="font-size: 10px;">LOGO</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MIUI/" style="font-size: 10px;">MIUI</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/PHP/" style="font-size: 11.25px;">PHP</a> <a href="/tags/PS/" style="font-size: 10px;">PS</a> <a href="/tags/Pathlib/" style="font-size: 10px;">Pathlib</a> <a href="/tags/PhantomJS/" style="font-size: 10px;">PhantomJS</a> <a href="/tags/PySpider/" style="font-size: 10px;">PySpider</a> <a href="/tags/Python/" style="font-size: 16.25px;">Python</a> <a href="/tags/Python3/" style="font-size: 12.5px;">Python3</a> <a href="/tags/Pythonic/" style="font-size: 10px;">Pythonic</a> <a href="/tags/QQ/" style="font-size: 10px;">QQ</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SAE/" style="font-size: 10px;">SAE</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SVG/" style="font-size: 10px;">SVG</a> <a href="/tags/Scrapy/" style="font-size: 10px;">Scrapy</a> <a href="/tags/Scrapy-redis/" style="font-size: 10px;">Scrapy-redis</a> <a href="/tags/Scrapy%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">Scrapy分布式</a> <a href="/tags/Selenium/" style="font-size: 10px;">Selenium</a> <a href="/tags/TKE/" style="font-size: 10px;">TKE</a> <a href="/tags/Ubuntu/" style="font-size: 11.25px;">Ubuntu</a> <a href="/tags/Vue/" style="font-size: 11.25px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/Winpcap/" style="font-size: 10px;">Winpcap</a> <a href="/tags/WordPress/" style="font-size: 13.75px;">WordPress</a> <a href="/tags/object-Object/" style="font-size: 10px;">[object Object]</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/cocos2d-x/" style="font-size: 10px;">cocos2d-x</a> <a href="/tags/e6/" style="font-size: 10px;">e6</a> <a href="/tags/fitvids/" style="font-size: 10px;">fitvids</a> <a href="/tags/git/" style="font-size: 11.25px;">git</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/js%E9%80%86%E5%90%91/" style="font-size: 10px;">js逆向</a> <a href="/tags/kubernetes/" style="font-size: 10px;">kubernetes</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/logging/" style="font-size: 10px;">logging</a> <a href="/tags/matlab/" style="font-size: 11.25px;">matlab</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/pywin32/" style="font-size: 10px;">pywin32</a> <a href="/tags/style/" style="font-size: 10px;">style</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/uwsgi/" style="font-size: 10px;">uwsgi</a> <a href="/tags/validate-cert/" style="font-size: 10px;">validate_cert</a> <a href="/tags/vsftpd/" style="font-size: 10px;">vsftpd</a> <a href="/tags/wamp/" style="font-size: 10px;">wamp</a> <a href="/tags/wineQQ/" style="font-size: 10px;">wineQQ</a> <a href="/tags/%E4%B8%83%E7%89%9B/" style="font-size: 11.25px;">七牛</a> <a href="/tags/%E4%B8%8A%E6%B5%B7/" style="font-size: 10px;">上海</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/" style="font-size: 10px;">个人网站</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 10px;">主题</a> <a href="/tags/%E4%BA%91%E5%AD%98%E5%82%A8/" style="font-size: 10px;">云存储</a> <a href="/tags/%E4%BA%AC%E4%B8%9C%E4%BA%91/" style="font-size: 10px;">京东云</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 10px;">人工智能</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 10px;">代理</a> <a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 10px;">代码</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 10px;">优化</a> <a href="/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/" style="font-size: 10px;">位运算</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 10px;">分享</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">分布式</a> <a href="/tags/%E5%88%9B%E4%B8%9A/" style="font-size: 10px;">创业</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 11.25px;">前端</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">博客</a> <a href="/tags/%E5%8E%9F%E7%94%9FAPP/" style="font-size: 10px;">原生APP</a> <a href="/tags/%E5%8F%8D%E7%88%AC%E8%99%AB/" style="font-size: 12.5px;">反爬虫</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 10px;">命令</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/" style="font-size: 10px;">响应式布局</a> <a href="/tags/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A/" style="font-size: 10px;">域名绑定</a> <a href="/tags/%E5%A4%A7%E4%BC%97%E7%82%B9%E8%AF%84/" style="font-size: 10px;">大众点评</a> <a href="/tags/%E5%AD%97%E4%BD%93%E5%8F%8D%E7%88%AC%E8%99%AB/" style="font-size: 10px;">字体反爬虫</a> <a href="/tags/%E5%AE%9E%E7%94%A8/" style="font-size: 10px;">实用</a> <a href="/tags/%E5%B4%94%E5%BA%86%E6%89%8D/" style="font-size: 18.75px;">崔庆才</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E6%89%8B%E6%9C%BA%E8%AE%BF%E9%97%AE/" style="font-size: 10px;">手机访问</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 10px;">教程</a> <a href="/tags/%E6%97%85%E6%B8%B8/" style="font-size: 10px;">旅游</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 10px;">日志</a> <a href="/tags/%E6%9D%9C%E5%85%B0%E7%89%B9/" style="font-size: 10px;">杜兰特</a> <a href="/tags/%E6%A1%8C%E9%9D%A2/" style="font-size: 10px;">桌面</a> <a href="/tags/%E6%B1%9F%E5%8D%97/" style="font-size: 10px;">江南</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 10px;">游戏</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 15px;">爬虫</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 10px;">环境变量</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">生活笔记</a> <a href="/tags/%E7%99%BB%E5%BD%95/" style="font-size: 10px;">登录</a> <a href="/tags/%E7%9F%A5%E4%B9%8E/" style="font-size: 10px;">知乎</a> <a href="/tags/%E7%9F%AD%E4%BF%A1/" style="font-size: 10px;">短信</a> <a href="/tags/%E7%BA%B8%E5%BC%A0/" style="font-size: 10px;">纸张</a> <a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 10px;">网站</a> <a href="/tags/%E8%82%89%E5%A4%B9%E9%A6%8D/" style="font-size: 10px;">肉夹馍</a> <a href="/tags/%E8%A5%BF%E5%B0%91%E7%88%B7/" style="font-size: 10px;">西少爷</a> <a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 10px;">视频</a> <a href="/tags/%E8%BF%9C%E7%A8%8B/" style="font-size: 10px;">远程</a> <a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 10px;">逆向</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">配置</a> <a href="/tags/%E9%87%8D%E8%A3%85/" style="font-size: 10px;">重装</a> <a href="/tags/%E9%9D%99%E8%A7%85/" style="font-size: 17.5px;">静觅</a> <a href="/tags/%E9%A2%A0%E8%A6%86/" style="font-size: 10px;">颠覆</a> <a href="/tags/%E9%A3%9E%E4%BF%A1/" style="font-size: 10px;">飞信</a>
              </div>
              <script>
                const tagsColors = ['#00a67c', '#5cb85c', '#d9534f', '#567e95', '#b37333', '#f4843d', '#15a287']
                const tagsElements = document.querySelectorAll('.sidebar-panel-tags .content a')
                tagsElements.forEach((item) =>
                {
                  item.style.backgroundColor = tagsColors[Math.floor(Math.random() * tagsColors.length)]
                })

              </script>
            </div>
            <div class="sidebar-panel sidebar-panel-categories sidebar-panel-active">
              <h4 class="name"> 分类 </h4>
              <div class="content">
                <ul class="category-list">
                  <li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a><span class="category-list-count">23</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><span class="category-list-count">13</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">5</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">26</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">15</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Net/">Net</a><span class="category-list-count">4</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a><span class="category-list-count">38</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">27</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Paper/">Paper</a><span class="category-list-count">2</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">256</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/TypeScript/">TypeScript</a><span class="category-list-count">2</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E5%B1%95%E7%A4%BA/">个人展示</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/">个人日记</a><span class="category-list-count">6</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E9%9A%8F%E7%AC%94/">个人随笔</a><span class="category-list-count">10</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/">技术杂谈</a><span class="category-list-count">75</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E7%AC%94%E8%AE%B0/">生活笔记</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A6%8F%E5%88%A9%E4%B8%93%E5%8C%BA/">福利专区</a><span class="category-list-count">6</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E8%81%8C%E4%BD%8D%E6%8E%A8%E8%8D%90/">职位推荐</a><span class="category-list-count">2</span></li>
                </ul>
              </div>
            </div>
            <div class="sidebar-panel sidebar-panel-friends sidebar-panel-active">
              <h4 class="name"> 友情链接 </h4>
              <ul class="friends">
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/j2dub.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.findhao.net/" target="_blank" rel="noopener">FindHao</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/ou6mm.jpg">
                  </span>
                  <span class="link">
                    <a href="https://diygod.me/" target="_blank" rel="noopener">DIYgod</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/6apxu.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.51dev.com/" target="_blank" rel="noopener">IT技术社区</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://www.jankl.com/img/titleshu.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.jankl.com/" target="_blank" rel="noopener">liberalist</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/bqlbs.png">
                  </span>
                  <span class="link">
                    <a href="http://www.urselect.com/" target="_blank" rel="noopener">优社电商</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/8s88c.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.yuanrenxue.com/" target="_blank" rel="noopener">猿人学</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/4i7yf.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.lizenghai.com/" target="_blank" rel="noopener">Python量化投资</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/2wgg5.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.yunlifang.cn/" target="_blank" rel="noopener">云立方</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/shwr6.png">
                  </span>
                  <span class="link">
                    <a href="http://lanbing510.info/" target="_blank" rel="noopener">冰蓝</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/blvoh.jpg">
                  </span>
                  <span class="link">
                    <a href="https://lengyue.me/" target="_blank" rel="noopener">冷月</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="http://qianxunclub.com/favicon.png">
                  </span>
                  <span class="link">
                    <a href="http://qianxunclub.com/" target="_blank" rel="noopener">千寻啊千寻</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/0044u.jpg">
                  </span>
                  <span class="link">
                    <a href="http://kodcloud.com/" target="_blank" rel="noopener">可道云</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/ygnpn.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.kunkundashen.cn/" target="_blank" rel="noopener">坤坤大神</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/22uv1.png">
                  </span>
                  <span class="link">
                    <a href="http://www.cenchong.com/" target="_blank" rel="noopener">岑冲博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/ev9kl.png">
                  </span>
                  <span class="link">
                    <a href="http://www.zxiaoji.com/" target="_blank" rel="noopener">张小鸡</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://www.chrafz.com/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="https://www.chrafz.com/" target="_blank" rel="noopener">张弦先生</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://www.503error.com/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="https://www.503error.com/" target="_blank" rel="noopener">张志明个人博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://seofangfa.com/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="https://seofangfa.com/" target="_blank" rel="noopener">方法SEO</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/x714o.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.hubwiz.com/" target="_blank" rel="noopener">汇智网</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/lfmj3.png">
                  </span>
                  <span class="link">
                    <a href="http://frankchen.xyz/" target="_blank" rel="noopener">不正经数据科学家</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/129d8.png">
                  </span>
                  <span class="link">
                    <a href="https://www.bysocket.com/" target="_blank" rel="noopener">泥瓦匠BYSocket</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://www.xiongge.club/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="https://www.xiongge.club/" target="_blank" rel="noopener">熊哥club</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/3w4fe.png">
                  </span>
                  <span class="link">
                    <a href="https://zerlong.com/" target="_blank" rel="noopener">知语</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/262r1.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.ysir308.com/" target="_blank" rel="noopener">程序员虾说</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/44hxf.png">
                  </span>
                  <span class="link">
                    <a href="http://redstonewill.com/" target="_blank" rel="noopener">红色石头</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/8g1fk.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.laodong.me/" target="_blank" rel="noopener">老董博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/wkaus.jpg">
                  </span>
                  <span class="link">
                    <a href="https://zhaoshuai.me/" target="_blank" rel="noopener">碎念</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/pgo0r.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.chenwenguan.com/" target="_blank" rel="noopener">陈文管的博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/kk82a.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.lxlinux.net/" target="_blank" rel="noopener">良许Linux教程网</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/lj0t2.jpg">
                  </span>
                  <span class="link">
                    <a href="https://tanqingbo.cn/" target="_blank" rel="noopener">IT码农</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/i8cdr.png">
                  </span>
                  <span class="link">
                    <a href="https://junyiseo.com/" target="_blank" rel="noopener">均益个人博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/chwv2.png">
                  </span>
                  <span class="link">
                    <a href="https://brucedone.com/" target="_blank" rel="noopener">大鱼的鱼塘</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://qiniu.cuiqingcai.com/2y43o.png">
                  </span>
                  <span class="link">
                    <a href="http://bbs.nightteam.cn/" target="_blank" rel="noopener">夜幕爬虫安全论坛</a>
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </aside>
        <div id="sidebar-dimmer"></div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-inner">
        <div class="copyright"> &copy; <span itemprop="copyrightYear">2021</span>
          <span class="with-love">
            <i class="fa fa-heart"></i>
          </span>
          <span class="author" itemprop="copyrightHolder">崔庆才丨静觅</span>
          <span class="post-meta-divider">|</span>
          <span class="post-meta-item-icon">
            <i class="fa fa-chart-area"></i>
          </span>
          <span title="站点总字数">2.5m</span>
          <span class="post-meta-divider">|</span>
          <span class="post-meta-item-icon">
            <i class="fa fa-coffee"></i>
          </span>
          <span title="站点阅读时长">37:35</span>
        </div>
        <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动 </div>
        <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备18015597号-1 </a>
        </div>
        <script>
          (function ()
          {
            function leancloudSelector(url)
            {
              url = encodeURI(url);
              return document.getElementById(url).querySelector('.leancloud-visitors-count');
            }

            function addCount(Counter)
            {
              var visitors = document.querySelector('.leancloud_visitors');
              var url = decodeURI(visitors.id);
              var title = visitors.dataset.flagTitle;
              Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify(
              {
                url
              }))).then(response => response.json()).then((
              {
                results
              }) =>
              {
                if (results.length > 0)
                {
                  var counter = results[0];
                  leancloudSelector(url).innerText = counter.time + 1;
                  Counter('put', '/classes/Counter/' + counter.objectId,
                  {
                    time:
                    {
                      '__op': 'Increment',
                      'amount': 1
                    }
                  }).catch(error =>
                  {
                    console.error('Failed to save visitor count', error);
                  });
                }
                else
                {
                  Counter('post', '/classes/Counter',
                  {
                    title,
                    url,
                    time: 1
                  }).then(response => response.json()).then(() =>
                  {
                    leancloudSelector(url).innerText = 1;
                  }).catch(error =>
                  {
                    console.error('Failed to create', error);
                  });
                }
              }).catch(error =>
              {
                console.error('LeanCloud Counter Error', error);
              });
            }

            function showTime(Counter)
            {
              var visitors = document.querySelectorAll('.leancloud_visitors');
              var entries = [...visitors].map(element =>
              {
                return decodeURI(element.id);
              });
              Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify(
              {
                url:
                {
                  '$in': entries
                }
              }))).then(response => response.json()).then((
              {
                results
              }) =>
              {
                for (let url of entries)
                {
                  let target = results.find(item => item.url === url);
                  leancloudSelector(url).innerText = target ? target.time : 0;
                }
              }).catch(error =>
              {
                console.error('LeanCloud Counter Error', error);
              });
            }
            let
            {
              app_id,
              app_key,
              server_url
            } = {
              "enable": true,
              "app_id": "6X5dRQ0pnPWJgYy8SXOg0uID-gzGzoHsz",
              "app_key": "ziLDVEy73ne5HtFTiGstzHMS",
              "server_url": null,
              "security": false
            };

            function fetchData(api_server)
            {
              var Counter = (method, url, data) =>
              {
                return fetch(`${api_server}/1.1${url}`,
                {
                  method,
                  headers:
                  {
                    'X-LC-Id': app_id,
                    'X-LC-Key': app_key,
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data)
                });
              };
              if (CONFIG.page.isPost)
              {
                if (CONFIG.hostname !== location.hostname) return;
                addCount(Counter);
              }
              else if (document.querySelectorAll('.post-title-link').length >= 1)
              {
                showTime(Counter);
              }
            }
            let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;
            if (api_server)
            {
              fetchData(api_server);
            }
            else
            {
              fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id).then(response => response.json()).then((
              {
                api_server
              }) =>
              {
                fetchData('https://' + api_server);
              });
            }
          })();

        </script>
      </div>
      <div class="footer-stat">
        <span id="cnzz_stat_icon_1279355174"></span>
        <script type="text/javascript">
          document.write(unescape("%3Cspan id='cnzz_stat_icon_1279355174'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1279355174%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));

        </script>
      </div>
    </footer>
  </div>
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/.js"></script>
  <script src="/js/schemes/pisces.js"></script>
  <script src="/.js"></script>
  <script src="/js/next-boot.js"></script>
  <script src="/.js"></script>
  <script>
    (function ()
    {
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x = document.getElementsByTagName("link");
      //Find the last canonical URL
      if (x.length > 0)
      {
        for (i = 0; i < x.length; i++)
        {
          if (x[i].rel.toLowerCase() == 'canonical' && x[i].href)
          {
            canonicalURL = x[i].href;
          }
        }
      }
      //Get protocol
      if (!canonicalURL)
      {
        curProtocol = window.location.protocol.split(':')[0];
      }
      else
      {
        curProtocol = canonicalURL.split(':')[0];
      }
      //Get current URL if the canonical URL does not exist
      if (!canonicalURL) canonicalURL = window.location.href;
      //Assign script content. Replace current URL with the canonical URL
      ! function ()
      {
        var e = /([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,
          r = canonicalURL,
          t = document.referrer;
        if (!e.test(r))
        {
          var n = (String(curProtocol).toLowerCase() === 'https') ? "https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif" : "//api.share.baidu.com/s.gif";
          t ? (n += "?r=" + encodeURIComponent(document.referrer), r && (n += "&l=" + r)) : r && (n += "?l=" + r);
          var i = new Image;
          i.src = n
        }
      }(window);
    })();

  </script>
  <script src="/js/local-search.js"></script>
  <script src="/.js"></script>
</body>

</html>
